# 数据工程师的崛起

> 原文：<https://www.freecodecamp.org/news/the-rise-of-the-data-engineer-91be18f1e603/>

马克西姆·博彻明

# 数据工程师的崛起

![GKmKRHjcqTJ0ozn2qe1PCt3c-NIcVfPuxtme](img/556ede02ecfff14b81b372dd218f5246.png)

我于 2011 年加入脸书，担任**商业智能工程师**。到 2013 年我离开的时候，我已经是一名**的数据工程师**。

我没有被提升或分配到这个新职位。相反，脸书意识到我们正在做的工作超越了传统的商业智能。我们为自己创造的角色是一个全新的领域。

我的团队处于这一转变的最前沿。我们在开发新的技能、新的做事方式、新的工具，并且——通常情况下——放弃传统的方法。

我们是先驱。我们是数据工程师！

### 数据工程？

作为一门学科，数据科学正在经历自我肯定和自我定义的青春期。与此同时，**数据工程**是它的弟弟妹妹，但它正在经历类似的事情。数据工程学科从它的兄弟姐妹那里得到线索，同时也在对立中定义自己，并找到自己的身份。

像数据科学家一样，数据工程师也写代码。他们分析能力很强，对数据可视化很感兴趣。

与数据科学家不同——受我们更成熟的母公司**软件工程**的启发——数据工程师构建工具、基础设施、框架和服务。事实上，数据工程更接近于软件工程而不是数据科学是有争议的。

相对于**以前存在的角色**，数据工程领域可以被认为是**商业智能**和**数据仓库**的超集，从**软件工程**中带来更多元素。该学科还集成了围绕所谓“大数据”分布式系统操作的专业化，以及围绕扩展 Hadoop 生态系统、流处理和大规模计算的概念。

在规模较小的公司中，还没有正式的**数据基础架构**团队，数据工程角色可能还包括设置和操作组织数据基础架构的工作量。这包括设置和操作 Hadoop/Hive/HBase、Spark 等平台。

在较小的环境中，人们倾向于使用亚马逊或 Databricks 提供的托管服务，或者从 Cloudera 或 Hortonworks 等公司获得支持——这实际上是将数据工程角色分包给其他公司。

在较大的环境中，随着对数据基础架构团队需求的增长，往往会有专业化和创建正式角色来管理这一工作负载。在那些组织中，自动化一些数据工程过程的角色落在数据工程和数据基础设施团队的手中，并且这些团队通常协作解决更高级别的问题。

当这个角色的工程方面的范围越来越大时，最初的业务工程角色的其他方面就变得次要了。像制作和维护报告和仪表板的组合这样的领域不是数据工程师的主要关注点。

我们现在有了更好的自助工具，分析师、数据科学家和普通“信息工作者”变得更加了解数据，可以自主处理数据消费。

#### ETL 正在改变

我们还观察到了从拖放 [ETL(提取、转换和加载)](https://en.wikipedia.org/wiki/Extract,_transform,_load)工具向更加程序化的方法的普遍转变。Informatica、IBM Datastage、Cognos、AbInitio 或微软 SSIS 等平台上的产品知识在现代数据工程师中并不常见，正在被更通用的软件工程技能以及对 Airflow、Oozie、Azkabhan 或 Luigi 等编程或配置驱动平台的理解所取代。工程师开发和管理自己的作业编排器/调度器也很常见。

有很多原因可以解释为什么复杂的软件不能使用拖放工具来开发:这是因为最终**代码**是软件的最佳抽象。虽然讨论这个话题超出了本文的范围，但是很容易推断出这些原因适用于编写 ETL，就像它适用于任何其他软件一样。代码允许任意级别的抽象，允许以熟悉的方式进行所有逻辑操作，与源代码控制集成良好，易于版本化和协作。事实上，ETL 工具发展到公开图形界面似乎是数据处理历史上的一个弯路，并且肯定会成为一篇有趣的博文。

让我们强调这样一个事实，即传统 ETL 工具暴露的抽象是偏离目标的。当然，有必要抽象出数据处理、计算和存储的复杂性。但是我认为解决方案不是以拖放的方式公开 ETL 原语(比如源/目标、聚合、过滤)。所需的抽象是更高层次的。

例如，现代数据环境中所需抽象的一个例子是 A/B 测试框架中实验的配置:*所有的实验是什么？有哪些相关的治疗方法？应该暴露多大比例的用户？每个实验预期影响的指标是什么？实验什么时候生效？*在本例中，我们有一个框架，它接收精确的高级输入，执行复杂的统计计算，并提供计算结果。我们期望为一个新的实验添加一个条目会导致额外的计算和结果被交付。在这个例子中需要注意的是，这个抽象的输入参数不是由传统的 ETL 工具提供的，并且在拖放界面中构建这样的抽象是不可管理的。

对于现代数据工程师来说，传统的 ETL 工具很大程度上已经过时了，因为逻辑不能用代码来表达。因此，所需的抽象无法在这些工具中直观地表达出来。现在知道了数据工程师的角色很大程度上包括定义 ETL，并且知道需要一套全新的工具和方法，人们可以认为这迫使该学科从头开始重建。新的堆栈、新的工具、新的约束集，在许多情况下，还有新一代的个体。

#### 数据建模正在发生变化

典型的数据建模技术，如[星型模式](https://en.wikipedia.org/wiki/Star_schema)，定义了我们为通常与数据仓库相关的分析工作负载进行数据建模的方法，与过去相比，现在已经不再适用。数据仓库的传统最佳实践在不断变化的堆栈上失去了基础。存储和计算比以往任何时候都更便宜，随着线性扩展的分布式数据库的出现，更稀缺的资源是工程时间。

下面是在数据建模技术中观察到的一些变化:

*   进一步的**反规范化:**维护维度中的[代理键](http://www.kimballgroup.com/1998/05/surrogate-keys/)可能会很棘手，这会降低事实表的可读性。在事实表中使用自然的、人类可读的键和维度属性正变得越来越普遍，从而减少了对分布式数据库中代价高昂的连接的需求。还要注意，在 Parquet 或 ORC 等序列化格式中，或者在 Vertica 等数据库引擎中，对编码和压缩的支持解决了通常与反规范化相关的大多数性能损失。那些系统已经被教导去标准化数据以便自己存储。
*   **blob:**现代数据库通过本机类型和函数对 blob 的支持越来越多。这在数据建模师的剧本中开启了新的一步，并允许事实表在需要时一次存储多个粒度
*   **动态模式**:自从 map reduce 出现以来，随着文档存储的日益流行和数据库中对 blobs 的支持，不执行 [DML](https://en.wikipedia.org/wiki/Data_definition_language) 来发展数据库模式变得越来越容易。这使得拥有一个迭代的仓储方法变得更加容易，并且消除了在开发之前获得完全一致和认可的需要。
*   系统地**快照**维度(为每个 ETL 调度周期存储维度的完整副本，通常在不同的表分区中)作为处理[缓慢变化的维度](https://en.wikipedia.org/wiki/Slowly_changing_dimension) (SCD)的通用方法是一种简单的通用方法，不需要太多的工程工作，并且与经典方法不同，在编写 ETL 和查询时很容易掌握。将维度的属性反规范化到事实表中以跟踪其在事务发生时的值也很容易且相对便宜。回想起来，复杂的 SCD 建模技术并不直观，并且降低了可访问性。
*   **一致性**，正如在[中一致的维度](http://www.kimballgroup.com/data-warehouse-business-intelligence-resources/kimball-techniques/dimensional-modeling-techniques/conformed-dimension/)和度量标准，在现代数据环境中仍然极其重要，但是随着数据仓库快速移动的需要，以及更多的团队和角色被邀请为这项工作做出贡献，它就不那么必要了，更多的是一种权衡。在分歧变得难以控制的领域，共识和趋同可以作为背景过程发生。

此外，更一般地说，随着计算周期的商品化和更多的人比以前更了解数据，预计算和在仓库中存储结果的需求减少了，这是有争议的。例如，您可以拥有复杂的 Spark 作业，它只能按需计算复杂的分析，而不能被安排为仓库的一部分。

### 角色和责任

#### 数据仓库

数据仓库是专门为查询和分析而构建的交易数据的副本。 —拉尔夫·金博尔

数据仓库是面向主题的、集成的、时变的和非易失的数据集合，用于支持管理层的决策过程。 —比尔·恩门

数据仓库和以前一样重要，数据工程师负责其构建和操作的许多方面。数据工程师的焦点是数据仓库，并围绕着它工作。

现代数据仓库是一个比过去更加公开的机构，欢迎数据科学家、分析师和软件工程师参与它的构建和操作。数据对于公司的活动来说太过集中，以至于没有限制哪些角色可以管理它的流动。虽然这允许扩展以匹配组织的数据需求，但它通常会导致基础架构更加混乱、变形和不完善。

数据工程团队通常在数据仓库中拥有一些经过认证的高质量区域。例如，在 Airbnb，有一组由数据工程团队管理的“核心”模式，其中服务水平协议(SLA)被明确定义和衡量，命名约定被严格遵循，业务元数据和文档是最高质量的，相关的管道代码遵循一组定义良好的最佳实践。

通过定义标准、最佳实践和数据对象的认证过程，数据工程团队也成为“卓越中心”。团队可以参与或领导一个分享其核心能力的教育项目，以帮助其他团队成为数据仓库的更好公民。例如，脸书有一个“数据营”教育项目，Airbnb 正在开发一个类似的“数据大学”项目，由数据工程师主持课程，教人们如何精通数据。

数据工程师也是数据仓库的“图书管理员”，对元数据进行编目和组织，定义从数据仓库中归档或提取数据的过程。在一个快速增长、快速发展、略显混乱的数据生态系统中，元数据管理和工具成为现代数据平台的重要组成部分。

#### 性能调整和优化

随着数据变得比以往任何时候都更具战略意义，公司正在为其数据基础架构增加可观的预算。这使得数据工程师在数据处理和存储的性能调整和优化上花费时间变得越来越合理。由于这一领域的预算很少缩减，优化通常是从用同样数量的资源实现更多的角度出发，或者试图将资源利用率和成本的指数增长线性化。

了解到数据工程堆栈的复杂性正在爆炸式增长，我们可以假设优化此类堆栈和流程的复杂性同样具有挑战性。在不费吹灰之力就能轻松获得巨大成功的地方，收益递减法则通常适用。

构建可随公司规模扩展的基础设施，并时刻保持资源意识，这绝对符合数据工程师的利益。

#### 数据集成

数据集成，即通过数据交换来集成业务和系统的实践，与以往一样重要和具有挑战性。随着[软件即服务(SaaS)](https://en.wikipedia.org/wiki/Software_as_a_service) 成为公司运营的新标准方式，跨这些系统同步参考数据的需求变得越来越重要。不仅 SaaS 需要最新的数据来运行，我们还经常希望将他们生成的数据带入我们的数据仓库，以便可以与我们的其他数据一起进行分析。当然，SaaS 经常有他们自己的分析产品，但系统地缺乏你公司其他数据提供的视角，所以通常有必要收回一些数据。

让这些 SaaS 产品在没有集成和共享公共主键的情况下重新定义引用数据是一场灾难，应该不惜一切代价避免。没有人想在两个不同的系统中手动维护两个员工或客户名单，最糟糕的是:将他们的人力资源数据带回仓库时必须进行模糊匹配。

最糟糕的是，公司高管经常在没有真正考虑数据整合挑战的情况下与 SaaS 提供商签署协议。供应商为了促进他们的销售，系统地淡化了集成工作量，并让数据工程师不得不做不被重视的工作。更不用说典型的 SaaS API 通常设计糟糕，文档不清晰并且“敏捷”的事实:这意味着你可以预期它们会在没有通知的情况下改变。

#### 服务

数据工程师在更高的抽象层次上工作，在某些情况下，这意味着提供服务和工具来自动化数据工程师、数据科学家或分析师可能手动完成的工作类型。

以下是数据工程师和数据基础架构工程师可以构建和操作的一些服务示例。

*   数据摄取:围绕“抓取”数据库、加载日志、从外部存储或 API 获取数据的服务和工具…
*   度量计算:计算和总结参与度、增长或细分相关度量的框架
*   异常检测:自动化数据消费，在发生异常事件或趋势发生重大变化时向人们发出警报
*   元数据管理:允许生成和消费元数据的工具，使得在数据仓库中及其周围查找信息变得容易
*   实验:A/B 测试和实验框架通常是公司分析的一个关键部分，具有重要的数据工程成分
*   检测:分析从记录事件和与这些事件相关的属性开始，数据工程师在确保上游捕获高质量数据方面有既得利益
*   会话化:专门用于及时理解一系列动作的管道，允许分析师理解用户行为

就像软件工程师一样，数据工程师应该不断寻求自动化他们的工作负载，并构建允许他们攀登复杂性阶梯的抽象。虽然可以自动化的工作流的性质因环境而异，但自动化工作流的需求是普遍的。

### 所需技能

**SQL 精通:**如果英语是商业语言，SQL 就是
数据的语言。如果你不能说一口流利的英语，你能成为一个成功的商人吗？虽然几代技术都在老化和褪色，但 SQL 仍然是数据的通用语言。数据工程师应该能够使用“相关子查询”和窗口函数等技术来表达 SQL 中的任何复杂程度。SQL/DML/DDL 原语非常简单，对于数据工程师来说应该没有秘密可言。除了 SQL 的声明性质之外，她/他应该能够阅读和
理解数据库执行计划，并且理解所有的
步骤是什么、索引如何工作、不同的连接算法以及计划中的
分布式维度。

**数据建模技术:**对于一个数据工程师来说，实体关系建模应该是一种认知反射，伴随着对规范化的清晰理解，并对反规范化权衡有着敏锐的直觉。数据工程师应熟悉[维度建模](https://en.wikipedia.org/wiki/Dimensional_modeling)及相关概念和词汇领域。

**ETL 设计:**编写高效、有弹性且“可进化”的 ETL 是关键。我
计划在即将到来的博客文章中扩展这个话题。

**架构设计:**像任何专业领域的专业人员一样，数据工程师需要对大多数工具、平台、库和其他资源有很高的理解。不同风格的数据库、计算引擎、流处理器、消息队列、工作流编制器、序列化格式和其他相关技术背后的属性、用例和微妙之处。在设计解决方案时，她/他应该能够对使用哪些技术做出正确的选择，并对如何使这些技术协同工作有远见。

### 总而言之

在过去的 5 年里，我在硅谷的 Airbnb、脸书和雅虎工作。，并与为谷歌、网飞、亚马逊、优步、Lyft 等公司以及数十家各种规模的公司工作的各种数据团队进行了大量互动，我观察到关于“数据工程”正在演变成什么的共识越来越多，并感到有必要分享我的一些发现。

我希望这篇文章可以作为数据工程的某种宣言，并且我希望能够激起相关领域的社区的反应！