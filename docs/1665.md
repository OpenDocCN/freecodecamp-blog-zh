# 使用 Selenium 创建一个 Web 抓取机器人

> 原文：<https://www.freecodecamp.org/news/use-selenium-to-create-a-web-scraping-bot/>

Selenium 是一个强大的 web 自动化工具，可用于浏览器自动化、测试前端代码和创建 web 抓取机器人。

我们刚刚在 freeCodeCamp.org 网站上发布了一个完整的课程，在你构建一个网络抓取机器人的时候，它会教你 Selenium。

JimShapedCoding 的 Jim 开发了这个课程。Jim 他在我们的频道和他自己的频道中创建了许多受欢迎的课程。

本课程包括以下几个部分:

*   从基础开始
*   显性与隐性
*   发送键和 CSS 选择器
*   构建 Bot 项目
*   交易搜索
*   预订过滤
*   从 CLI 执行
*   交易报告

观看以下全部课程或在 freeCodeCamp.org YouTube 频道观看(3 小时观看)。

[https://www.youtube.com/embed/j7VZsCCnptM?feature=oembed](https://www.youtube.com/embed/j7VZsCCnptM?feature=oembed)

## 副本

(自动生成)

Selenium 是用于测试 web 应用程序的可移植框架。

来自 JimShapedCoding 的 Jim 教授这门硒元素课程。

他在 freeCodeCamp 频道和他自己的频道上创建了许多受欢迎的课程。

大家好，欢迎来到 Python Selenium 系列，在这里我们将学习如何为网站创建用户界面自动化。

所以硒被广泛使用。

它非常受欢迎是有原因的。

因为它可以帮助您为 web 应用程序创建测试。

它还可以帮助你创建在线机器人，这是非常好的。

所以在这个系列中，我们将从基础开始学习如何使用硒。

稍后，我们将学习如何创建一个在线机器人，从预订网站报告最便宜的交易。

这个系列真的会包括一些很棒的剧集，所以一定要点击订阅按钮，并点击铃声通知。

所以你永远不会错过这整个系列的一集。

所以拿杯咖啡，我们开始吧。

太好了。

因此，在我们真正开始之前，我们需要了解一些先决条件。

所以在这个系列中，我将假设您已经安装了 Python。

除此之外，您还可以获得一个类似 Python 的 id，并使用 Python 对其进行正确配置。

现在你也可以使用类似 Sublime Text 的随机文本编辑器，但是要确保它正确地连接到你的系统解释器。

如果你没有任何这些，那么你可以访问我的五我们的初学者课程，赶上装置。

好的，就像 Python 编程语言中的许多库一样，我们需要以某种方式使用 scillonian 的库。

所以这就是为什么我们需要在我们的电脑上安装它。

我们可以用 PIP 命令来实现。

现在，如果你安装了 Python，那么你也应该安装了 PIP 包管理器。

所以现在我要在这里打开我们的终端。

我会说 pip 像那样安装 Selenium。

现在我在系统解释器中这样做，因为我不打算在整个系列中使用虚拟环境。

这就是为什么我可以允许自己在终端上这样做。

好的，如果你没有看到箭头，那意味着一切都很好。

我们可以回到饼图，基本上导入这个库，看看我们如何使用它。

好的，在这里，我将从 Selenium 导入 WebDriver。

所以我在 Selenium 库中导入了一些非常特别的东西。

这样做有一个很好的理由。

现在，当谈到在 web 浏览器中执行用户界面自动化时，我们需要以某种方式打开 web 浏览器。

这就是为什么我们需要导入一个专用的库来自动打开网页浏览器。

现在，当我们谈论在 web 浏览器上执行自动化时，我们需要理解，对于每个 web 浏览器，都将有一个专用于执行这些自动化任务的版本。

例如，如果我们想在 chrome 浏览器上执行这些自动化任务，那么我们需要实例化 Chrome 驱动程序类来执行其中的自动化操作。

这就是为什么我们需要导入这个库。

好了，既然我们已经导入了这个，那么我们必须实例化负责弹出 Chrome 浏览器的库。

所以这就是我要下去的原因。

而且我要说，比如 driver 等于 WebDriver 点 Chrome，就那样。

正如你在这里看到的，实际上比 Chrome 有更多的选择。

因此，如果我删除它，并按下 control space，那么您可以看到我们也有 Firefox。

而且我相信果然有 edge。

如你所见，你可以在不同的浏览器中执行这些自动操作。

但实际上，在整个系列中，我将使用 Chrome 浏览器。

这就是为什么我会说 Chrome，我们会像那样实例化这个类。

现在，我们可以继续尝试执行这个。

但是我们会收到一些箭头，这些箭头将会讨论一个叫做 chromedriver 的东西。

我的电脑上没有。

而且它不在 tat 里。

因此，让我们把这个错误分解成我们需要做的两个重要步骤。

所以首先，我们需要下载 chrome 驱动程序。

实际上，chrome driver 是一个独立的可执行文件，Selenium WebDriver 使用它在 chrome 浏览器中执行这些自动操作。

所以这意味着我们需要下载这个 chrome 驱动文件到我们的电脑上。

这就是为什么我要把这个网站带到这里。

我肯定会在描述中加入链接。

正如你所看到的，这是我们可以下载 chrome 驱动程序的页面，如果我们向下滚动，你可以看到有很多版本的 Chrome 驱动程序可供下载。

现在，你可能会问自己，我将如何决定哪个版本应该安装在我的计算机上？嗯，这取决于你现在电脑上安装的 Chrome 浏览器版本。

所以，如果你像我一样默认使用 Chrome 浏览器，那么我们可以做的基本上是转到一个单独的标签，我们可以在这里，Chrome，冒号，两个正斜杠，然后说，版本。

紧接着，我们将看到如下所示的输出。

正如你从这里看到的，这是我使用的谷歌浏览器版本。

如您所见，我们的主要版本是 89。

所以对你自己来说，可能是 9091 92，甚至是 84。

但你需要确保这个测量版本将与你从 chromedriver 页面下载的版本相匹配。

对我来说，我现在要回到那一页。

我将搜索以 89 开头的版本。

这就是为什么我要点击这里。

之后，我将搜索我需要的特定归档。

肯定会是 windows，因为那是我机器的操作系统。

我将单击此处，它应该会开始下载，在我们下载完之后，我们需要解压缩它，因为它实际上是一个 zip 存档。

好的，你可能知道，在 Windows 中，默认情况下，下载文件会被下载到下载库中。

你想把它移动到一个你想要安装 chromedriver 的地方。

对我来说，它将位于 c 盘下。

在我命名为 salonu drivers 的文件夹中，你可以在我的屏幕左侧看到。

因此，我将从这里剪切它，并将其移动到我想要的文件夹中。

所以我打算这么做。

在那之后，让我们继续做下面的工作。

如你所见，它的位置是 C Selenium 驱动程序。

同样，您可以将它放在您想要邀请的任何位置，我将在这里提取文件。

一旦我完成了这些，您就可以看到我们在这个目录中获得了可执行文件。

所以这是一个很好的开始来解决我们的问题，当我们试图执行这场战斗的文件。

完美。

所以回到 Python。

现在，如果我们再次尝试执行这个文件，我们将会以同样的错误结束。

这是因为当我们看到这个错误时，我们没有执行我所说的第二步。

我们现在需要将 chromedriver 的位置放入一个名为 path 的环境变量中。

现在，PATH 环境变量将负责您的系统在您希望从终端立即执行这些文件时应该查找的文件。

这就是为什么它应该在 PATH 环境变量中。

现在，我们可以在系统级完成这项工作。

但这实际上不是一个好主意。

如果有一天你想在另一台服务器上执行 Selenium 项目。

这就是为什么在代码级别而不是系统级别配置这个环境变量被认为是最佳实践的原因。

这就是为什么我要在这里说 up top，类似于 import OAS。

现在，我将向已经存在的 PATH 环境变量再上传一个值。

所以我会说，哦，s 点 n，v 错了。

然后我会查找 cat 的键，确保你们像我一样，全部大写。

现在，我们想使用 plus equals，因为我们正在向现有的 pad 添加一个 pet 值，我们可以为这个环境变量设置多个值。

在这里，我们要指定 chrome 驱动程序的位置。

所以我可以在这里开始输入 C，冒号和福特斜线。

所以我指着我电脑的 c 盘。

我要在这里说，selenium 驱动程序就是这样，因为这是 chrome 驱动程序所在的文件夹名。

好的，在我们做完这些之后，我们应该在双引号前加上我们的字母。

这实际上是前缀的约定，它将标记为角色字符串，当您指定不同位置的路径时，这将很有帮助。

所以现在如果我们尝试执行这个程序，我们应该会看到 chrome 弹出来了，这就是正在发生的事情。

因此，这意味着现在我们已经准备好工作，并开始尝试在一个随机的网站上执行一些自动化。

好了，现在我们已经了解了如何设置 Selenium 环境，让我们尝试在一个随机的网站上执行一些自动化操作。

具体来说，在这一集里，我将从一个测试 Selenium 的网站开始，它将允许我们基本上采取一些基本的行动来开始使用它。

所以我要用这个硒 ez.com 网站。

我将转到这里的这个 URL，我会在描述中放上它的链接。

我将尝试单击开始下载，仅使用 Selenium 来执行它。

就在我们点击它之后，我们应该以某种方式确认进度已经完成。

因此，实际上，这些类型的操作是您想要使用 Selenium 执行的操作的良好候选，而不需要手动点击这些按钮。

所以让我们开始吧。

因此，首先，我们应该了解如何识别我们想要点击的元素。

为了做类似的事情，我们可以去找我们想要的元素。

我们可以点击如下所示的“检查”。

实际上，当涉及到页面时，每个页面都有自己独特的 HTML 架构。

每个 HTML 元素都将由每种类型来描述。

以及一些附加属性。

所以，让我们来看看我是怎么说的。

所以我要说检查。

如你所见，这条线是蓝色背景的。

正如我所说，这种元素是按钮，因为我们看到它就在标签之后。

这就是为什么它被称为按钮 HTML 元素。

如你所见，它有不同的属性，比如 class，Id。

因此，我们在这里可以做的是尝试识别具有下载按钮 ID 的元素，就像这里所说的那样。

让我们试着去做，看看我们如何识别这个特定的元素，然后试着点击它。

好吧，让我们回到圆周率的魅力。

在此之前，让我复制一下该网站的链接，因为我们马上就要使用它了。

好了，现在如果我打开 pi charm，向下走，这里我们准备写一些额外的代码。

现在，在一切之前，我们需要指定 selenium，我们将在自动化中使用的网站是什么，因此应该使用驱动程序将拥有的 get 方法来完成。

所以我会说司机不明白。

如您所见，它需要一个 URL，因此我可以直接放入我们实际看到的 URL 的链接，以执行一些自动操作。

如你所见，这是驱动程序应该执行的方式。

好了，现在我们已经完成了，那么我们应该以某种方式告诉 Selenium，我们喜欢点击一个元素，这个元素会吃掉 ID 的下载按钮。

所以我在这里要说，驱动点找下划线元素，下划线靠 ID。

正如你所看到的，我们有多种方法来查找元素，所以我们有类名，CSS 选择器，甚至更像名字。

这些都是我们将在未来的系列中看到的方法。

但是让我们从身份证开始。

我要说的是，下载按钮，就像下面这样。

现在，由于整个语句将返回一个对象，我们实际上可以使用它进行一些额外的操作，那么我应该将它分配给一个变量。

所以我可以说我的元素之类的。

然后在下面，我可以这样说我的元素。

我们应该看到 Selenium 驱动程序试图点击那个元素。

让我们来测试一下。

所以我现在就要执行它。

我不会碰任何东西。

让我们来看看实际情况。

好了，我们到了这里。

您可以立即看到，只需单击该元素，因为我们会看到一个进度框，告诉我们下载已经完成。

但是这样做实际上有一个很大的问题。

因为有时，在大多数情况下，加载整个网站可能需要一些时间。

这就是为什么我们可以在这两行之间，在对一个元素执行操作之前，先等待。

这就是为什么在这些字里行间，说一些像驱动程序这样隐含等待的东西。

在这里，我们应该指定我们希望等待该网站的秒数，所有这些都已成功加载。

因此，我们可以说，我们想等待，例如，三秒钟，所以这被认为是一个更好的事情，因为现在我们完全安全，从我们的浏览器有时有点慢。

或者，在某些情况下，我们的服务器可能非常慢。

这就是为什么在这里等一会儿，可能会有更好的主意。

如果我们再运行一次程序，让我们看看结果。

首先，页面被加载。

然后，正如你所看到的，立即尝试下载这个文件。

再次强调，这只是一个模拟，并不会将任何内容下载到您的计算机上。

好吧，让我们确认一下这里发生了什么。

首先，我们可以理解它真的没有等三秒钟。

这意味着隐式等待对我们的驱动对象做了一些特殊的事情，因为我们并没有真正等待三秒钟。

现在让我们用 30 秒来测试一下。

所以我要再执行一次。

正如你所看到的，就在一秒钟内，它听起来像是要再下载一次。

所以这实际上不会在这一行指定的时间内等待。

这是怎么回事，为什么我们看到了立即采取的行动。

我们可以在这里使用类似 time dot sleep 的东西，指定等待的秒数。

但这是我们不喜欢在这里做的事情。

因为有时我们不喜欢等待完整的持续时间，以防在指定的持续时间之前找到元素，它需要继续执行下一行代码。

所以用在这里，隐式等待实际上非常非常有用。

因为同样，如果元素已经在网页中，我们不需要等待 30 秒。

现在，公平地说，我还想谈更多的事情。等等，因为它有更多的功能，我会在以后再谈。

如果你对这个棘手的方法有任何疑问，请在下面的评论区告诉我。

好的，在我们继续比较这些权重之前，让我们澄清一些关于隐式等待的要点。

到目前为止，我们知道这比输入时间 dot sleep 更有效，因为我们并不总是愿意等 30 秒，比如说，在通过 ID 找到一个元素之前。

但是有一条关于隐式等待的信息我们应该知道，它将在你所有的 scillonian 项目中被设置为超时。

这意味着，你只需要调用这个隐式的 await 方法一次，然后它会为所有你以后要寻找的元素设置一个隐式的等待时间。

举个例子，我可以在这里说一些类似于我的第二个元素的东西，我可以让它等于 driver dot find element by ID。

我将在这里放置一些元素，这些元素甚至不存在于页面的左侧。

所以我可以说，我们随便写点什么吧。

然后我就可以试着执行我们的程序了。

出于测试的原因，让我把它减少到 8 秒。

所以我们不会真的等 30 秒就看到这个程序崩溃。

好，如果我们再运行一次，让我们看看结果。

如你所见，我们对第一个元素没有问题。

但是大约一两秒钟后，我们应该会收到一条错误消息，指出 Selenium 无法识别此处具有该 ID 的元素。

所以这实际上是需要记住的重要一点。

因为一旦我们说了隐式等待，它将基本上应用于所有的元素，我们将尝试在未来以某种方式找到它们。

好了，现在我们完全理解了隐式等待的行为，让我们继续自动化。

所以现在作为下一步，最好能确定下载是否已经成功完成。

我们知道，要表示这样的东西，我们需要理解，这里的这段文字，什么时候会完全等同于一个感叹号。

所以让我们试着写一个这样的自动化。

因此，我将选择这里的所有内容，并尝试单击“Inspect”。

让我再来一次，因为它并没有真正指向它。

好的，我们可以看到这个带有感叹号的完整的 HTML 元素，它告诉我们它的类型是 Dave，它的类别是 progress label。

到目前为止，我们并没有真正通过类名来识别特定的 HTML 元素。

实际上有一个很好的方法可以做到这一点，那就是再次使用带有 find 元素前缀的方法。

所以让我们来看看如何做到这一点。

让我删除这一行，我会坚持用那一行。

所以我可以说，progress 元素等于 driver 点 find 元素，然后我可以选择一个由类名调用的方法。

所以我们不能通过类名来识别一个元素。

所以选择它是个好主意。

现在我只需要传入类值。

因此，这将是我们前面看到的进度破折号标签。

现在，对于那些在网络世界中混淆了什么是类的人来说，它基本上是对一个归档方法的引用，不像 Python，它指的是我们在面向对象编程中使用它的类。

所以我只是想确保我们不会混淆网络中类的含义。

现在我有了这个，然后我可以去一个新的行。

我可以在这里说，比如 print，我可以使用格式化的字符串。

我可以试着打印这些元素的文本。

所以它将由两个文本组成，它在这里显示为文本。

如果我们这样做，再运行一次，让我们测试一下结果。

好吧，我们有新的一页被上诉了。

正如你所看到的，它立即显示了这个元素的文本，现在立即显示文本实际上不是一个好主意，因为我们可能喜欢等待一段时间，直到我们看到完整的。

但是实际上没有一个好的方法可以用我们到目前为止学到的方法做到这一点。

所以我们需要使用另一个工具。

为此，selenium 中存在一种叫做显式等待的东西。

现在有了这个，我们实际上可以让我们的程序等待意外的情况。

然后我们基本上可以等到这种情况再次出现。

这意味着什么，意味着我们通过这里的表达来看待这个问题。

所以我可以在这里说，用感叹号结束。

在我们的例子中，如果我们不以一种聪明的方式等待，那么我们将总是得到假的。

所以我们需要想办法等到这种情况过去。

让我们继续，看看我们如何做到这一点。

好的，为了使用显式等待，我们需要导入 Selenium 中的几个二级库。

因此，我们将在顶部说一些类似于 Selenium dot web driver 的内容，这很常见。

我们还将在这里再导入两件东西。

因此它将来自 Selenium dot web driver . support . ui。

就像这样，我们需要在 Selenium 中导入内置的类，称为 web 驱动等待。

我们还想导入最后一样东西，那就是 Selenium dot WebDriver dot 支持。

将预期条件作为 EC 导入，两者都是这样大写的。

现在，我知道我们使用了大量信息作为输入。

但是实际上有一个很好的理由。

我们马上就会知道为什么。

现在我会在这里开始写，我们想要等待的条件。

现在为了开始，首先我将实例化 WebDriver weight 类。

所以我会说 web 驱动程序权重，我会实例化它，但不会将其赋给变量。

首先我们需要传入驱动程序对象。

所以我们就在这里说，司机。

现在我们想指定，在预期条件为真或假之前，我们应该等待的秒数。

所以我在这里又要说 30 秒，实际上已经足够了。

然后我会自动启动直到这里的方法。

按照惯例，写在这个 until 方法中的信息通常在单独的一行。

所以我要在这里按回车键。

然后我们需要写条件，我们希望它在某个时候通过。

我们的情况是大约 30 秒后。

所以我们可以在这里说 e . c，它代表预期条件，我们在这里用它作为输入。

我们现在可以使用一种方法，让文本出现在元素中。

正如我们所理解的，这个方法被设计成基本上一直等到文本有了预期的文本。

我将在这里再次启动这个方法，按 enter 键。

所以再一次，我只是把论点写在单独的一行里。

这个方法需要两个重要的参数，第一个是我们想要检查条件的元素。

第二个是我们希望在 30 秒后看到的文本。

所以我就在这里评论一下，那些 downs 我就在这里说，元素过滤。

作为第二个，我们会这样说预期的文本。

好的，所以我们要识别我们想要检查的元素的方法是使用 by 类。

现在，这只是在网页中查找元素的另一种方法。

所以看起来不会很复杂。

这很简单，就像在这里说，我在这里创建一个元组，然后开始过滤。

所以我们想通过类名再次找到它。

如您所见，我们有自动完成功能。

所以我可以像那样使用类名。

紧挨着它的第二条信息应该是类名值，所以它将和以前一样是进度破折号标签。

所以这整个表达式只是在网页中查找元素的另一种方式，不像使用通过类名查找元素，多管闲事，我刚刚意识到我没有删除我们不需要的那两行。

所以让我们开始吧。

然后在第二行，就在我们说逗号之后，我们要写预期的文本。

所以它将以一个感叹号结束。

所以现在，如果我们运行我们的程序，我们应该不会收到任何错误，因为这种情况可能会在 30 秒内返回。

因此，如果我们现在运行自动化，并等待结果，那么我们再次单击这个下载按钮。

让我们看看，马上，会发生什么。

好了，我们得到了完整的文本。

如果我们回到我们的程序，那么您可以看到程序成功完成。

这意味着我们能够编写一个很好的自动化程序，直到我们等待，这确实验证了一些文件的下载已经成功完成。

因此，在这些等待方法之间进行切换是非常好的，我们可以使用隐式等待来查找整个页面中的元素。

我们也可以使用显式等待，这是一种更加自定义的等待，这意味着如果我们希望执行等待一段时间，直到达到某个条件，我们就需要使用它。

现在，对于每个有兴趣知道可以使用的预期条件的人来说，你可以在这里看到所有的选项。

所以如果我们删除这里的所有内容，再次使用，你可以看到我们有很多选项，可以使用期望条件。

因此，您可以看到，我们有可点击的元素要选择，基本上等待新窗口打开。

如你所见，如果你想等到某个预期的条件实现，你可以使用大量的选项。

因此，这是 Selenium 的一个非常好的特性，我们可以使用它来编写更多的动态机器人，以及编写更有效的测试用例。

好的，所以你想学习向上键或点击不同按钮的原因是为了执行像登录和注册账户这样的操作。

这是非常有用的，当你想克服一些网站的授权，基本上执行一些用户界面测试或出于任何原因创建一个机器人。

为了实践这一点，我将再次从硒 easy.com 拉起这个网站。

这实际上是我们要尝试发送密钥的页面。

如你所见，这里有一些 HTML 表单。

实际上，当我们想要发送密钥时，通常我们希望在 HTML 表单中进行，我们实际上需要在其中写入一些数据，然后我们需要单击某个按钮来提交我们的数据。

如你所见，这里，我们有一些形式，要求两个值。

如果我们单击“Get total ”,您会看到它显示 30，如果我将其更改为其他数字，您会看到它正在更新。

这就是我们现在试图用 Selenium 实现的自动化。

首先，让我在这里找到这一部分的网站，然后回到 Python，实际上在这里说竞争对手 dot get，链接肯定会在描述中出现。

所以你可以直接从那里复制粘贴。

所以现在我要把这个贴进去。

在我们完成了这些之后，我们应该再次尝试，通过 ID 类名，或者其他方法，来识别这个元素。

我会回到我们的网站，像往常一样，我会说 inspect，你可以看到这里有一个叫做 class 的东西，我们可以通过 class 找到元素。

和 ID 一样。

现在，我总是喜欢按 ID 过滤，因为我认为这是最强的领域，总是唯一的。

所以我会用这个 ID。

我相信这里的第二个盒子应该是一些工具。

所以，如果我用 inspect 检查一下，你会发现它和预期的一样。

所以我们需要提取这些元素，然后试着给它发送一些键。

所以我要回到 Python。

这里我要说，有些一等于驱动点通过 ID 找到元素。

我可以用这里的人。

我可以做完全相同的事情，就是把这个复制到这里，粘贴到这里，把值改成数字 2，就像这样。

然后我可以试着送一些钥匙。

所以这就像拉动元素一样简单。

因为现在我们完全可以访问它，并且基本上推出了像那样发送密钥的方法。

现在，你可以在这里输入任何你想输入的内容，正如你所看到的，它需要一个值。

所以这可以是你想要传入的任何值，它可以是一个字符串，也可以是一个数字。

让我们用数字来表示，比如 15，就像我们手动完成的那样。

我会用一些工具做同样的事情。

所以我也会发 15 的。

现在我们可以实际测试一下，看看它是否有效。

但在此之前，我们会继续说，有些东西像竞争对手一样在暗中等待。

对于每个元素，在这里等待 5 秒钟就足够了。

现在我们可以测试一下。

所以如果我运行我们的程序，让我们看看结果。

好了，页面已经加载了。

你可以看到我们收到了这条信息。

我们马上会处理。

但是你可以在背景中看到，我们得到了这些值。

我知道这里有点透明，但你可以在背景中看到。

好的，我认为我们在这里有了一个新的挑战，正如我们看到的这个输出。

我们需要以某种方式执行操作，不点击任何东西来继续我们的自动化。

因此，这实际上是一个很好的候选人来处理沿途的事情。

现在，我可以在这里进行检查，看看需要做些什么来基本识别这里的这个按钮，并在我们继续进行自动化之前单击它。

好的，你可以看到这个元素有多个类。

如果我看一下这里，你可以看到这里有一些类，用空格分开。

现在，如我所说，如果你看到由空格分隔的类，那么这意味着它指的是不同的类。

所以我实际上可以通过类名来过滤这个元素，没有破折号按钮，因为它可能是我可以用来过滤这个元素的最独特的类名。

所以我可以到这里，实际上使用让我把它复制下来，用 Python 来操作它。

所以在我们开始之前，请让我把这段文字粘贴到这里。

如你所见，这是我们想要筛选的类名。

所以我会删除一切。

我会从这里剪断这根线。

而且我会说没有按钮等于驱动点按类名找元素。

我将粘贴回我们想要过滤的类名。

而现在我做到了这一点，那么我基本上就可以应用点击法了。

所以它不会像那样点击按钮。

最后一件很棒的事情是用 try except 块包装它，因为我们并不总是通过这个类名找到一个元素，因为也许下一次这个弹出窗口就不会出现了。

所以在这里使用是个好主意，试着在 try 块下找到这两行。

然后，如果 Selenium 找不到任何具有该类名的元素，那么它不会使我们的程序崩溃。

因为在 except 块中，我们只能说类似于 print no element with this class name 的话。

所以我可以说就像那样跳过。

好的，在下面，我可以像那样继续我们的自动化。

好，如果我们在这里运行程序，那么让我们看看这次会发生什么。

所以页面已经打开了。

如您所见，现在我们看不到弹出窗口，也看不到来自 except walk 的任何消息。

这意味着 Selenium 用这个类名来标识元素，并发出 Click，点击我们在第一阶段想要点击的按钮。

然后它继续执行，基本上执行了剩下的代码行。

你可以看到这些值就在那里。

因此，我们非常接近完成我们想要完成的自动化。

现在，在我们继续获取 total 元素之前，我想给你们看最后一个东西。

我说的是我们可以直接发送密钥，而不仅仅是指定我们想要发送的文本。

这意味着我们可以发送像 Shift Alt，enter control 这样的键。

它的工作方式是从 Selenium 导入 keys 类。

这是一些有用的东西，你会希望基本上自动化一些可能需要复制一些文本的操作。

所以你需要自动化 Ctrl C。

再说一次，这很有用，因为有时你想自动直接按下某个键，而不是发送一些随机的文本。

所以我要从 Selenium dot WebDriver，dot common dot keys，import keys 这样的。

在这个类中，你有所有的选项，基本上是存在于每个关键字中的键盘按键。

为了向你们展示这一点，我现在要把它变成类似键的东西。

如您所见，在下拉列表中，我们有所有选项。

所以我们甚至有 F 1234。

我们甚至有 num，它们存在于电缆的右侧，即 numpad 中。

因此，如果我们愿意，我们可以从数字小键盘发送密钥，我知道这种情况下不太有用。

但是同样，当你需要的时候，直接发送密钥在某些情况下会非常非常有用。

如你所见，这里有所有选项。

如果有一天，你想看看所有的选项，那么你可以随时到这里，基本上使用 Python 中的 Ctrl B 或可视化代码中的 F 12，你可以检查到那个类。

您可以看到所有选项都在这里。

这非常非常有用。

现在为了证明这是可行的，让我用数字小键盘试试。

所以在有人的时候，我会发 numpad。

一，我还会注意，我可以用逗号分隔值。

我可以在这里输入数字小键盘 5，然后它会发送 15。

因此，这将相当于我们所做的。

为了证明这是可行的，我可以再次启动我们的程序。

你可以看到下面的结果是完全一样的。

这是发送密钥的另一种方式。

命运八号背后的美妙之处在于，你可以发送现有的所有键盘按键。

好的，现在我们只有一个按钮来过滤。

现在，我们并不总是希望通过 ID 或类名来过滤 HTML 元素，我们可能有更多的属性键值对，我们可以尝试通过它们来过滤元素。

所以现在我要去检查这里。

我们再做一次。

正如您所看到的，我们这里有一个以前没有看到的属性，那就是点击。

现在假设我想通过 onClick 等于这里的值来过滤这个元素。

这是我们直到那时才学会的事情。

这可以通过 CSS 选择器来实现。

CSS 选择器是一种根据样式过滤元素的模式。

现在，与通过 ID 或类名查找元素的方法不同。

使用 CSS 选择器，我们并不总是需要过滤一个匹配一个精确字符串的元素。

例如，使用 CSS 选择器，可以选择通过搜索元素包含的子串来识别元素。

这非常有用，因为我们并不总是希望通过精确的键值匹配来过滤元素，因为我们可能希望对具有相同前缀或后缀的元素执行一些操作。

所以让我们看看 CSS 选择器是如何工作的。

好了，我们又回到了 pi charm。

让我们来看看如何使用 CSS 选择器。

所以我在这里要说，button 等于 driver dot 通过 CSS 选择器那样找到元素。

在这里，我们需要传递 CSS 选择器表达式。

我们要做的就是使用一些存在的特殊模式。

现在通过 CSS 选择器选择一个元素。

您有多种选择，但我们将使用 HTML 元素类型的模式，后跟匹配的键值。

现在作为一个例子，我们实际上可以回到我们的按钮，看看我们要如何过滤它。

你可以看到这是一种按钮。

从这里我们可以看到，它的关键值是点击总回报。

这意味着我们可以尝试过滤掉所有具有 onClick 属性的按钮，这些按钮的返回值都是这样的。

为了做到这一点，我们将回到这里，我们将说按钮，然后我们将需要打开一个方括号。

我们将需要在这里说点击等于，然后我们将在这里使用双引号。

我用双引号的原因是因为我一开始就用单引号。

我们不想错过比赛。

现在在这里，我可以这样说总回报。

正如你所看到的，这是 CSS 选择器工作的一种方式，你基本上可以指定 HTML 元素，后跟键值匹配，并确保它在它后面的方括号内。

现在我将在后面展示所有的 CSS 证书或选项，因为你可以通过 CSS 选择器在元素中过滤大量的选项。

好的，所以我希望这个按钮基本上有这个按钮的 HTML 元素。

然后我基本上可以按预期用按钮点一下了。

所以现在我们可以测试这是否可行。

因此，如果我们运行我们的自动化，再一次，让我们看看会发生什么。

好的，在下面，你可以看到我们收到的文本，A 加 B 的总数是 30。

这正是我们所期待的结果。

这意味着我们能够通过 CSS 选择器成功地选择一个元素。

这是完美的。

好的，我之前说过，我会向你们展示我使用 CSS 选择器表达式模式的页面。

你可以看到，现在，我的意思是，一个页面有多个例子，你可以使用 CSS 选择器过滤元素。

因此，您可以看到我们有一个包含所有选择器选项的表格。

以及所有模式的一些附加示例。

所以你可以看到，如果我们向下滚动，那么我实际上使用了这些模式。

这是一个包含元素类型的模式。

在这个例子中，类型是 a，代表 anchor。

您可以看到，在这里的方括号中，它查找匹配的键值。

但是在这种情况下，正如我前面所说的，你不仅可以搜索包含一个精确字符串的元素，还可以搜索包含某个字符串的元素。

因此，您可以看到，在描述中，它表示选择每八个 href 属性值以 HTTP s 开头的标记元素。

当你想选择一些以文本结尾的元素时，情况也是如此。

所以你可以看到我们有很多选择。

这非常有用。

我可以完全肯定 CSS 选择器是我使用最多的方法，因为它比其他元素给你更多的控制。

因此，当您想要对元素执行一些自动化操作时，它确实有助于您找到要查找的元素。

好的，那么我们要做的第一件事就是为这个项目创建一个文件。

在我开始记录之前，我已经创建了这个板文件夹。

所以这将包括我们项目的代码。

你可以在任何你想要的地方创建文件夹，只要确保你连接到 Python。

因此，我将单击“确定”。

我们将从这里开始。

现在你可以注意到，默认情况下 Python 为我们创建了 main.py 文件，所以我们基本上可以删除这里的所有内容，继续工作。

因此，如果自动生成的文件没有发生在你身上，那么就自己创建一个新的文件，并命名为 main。

好的，现在，我将开始设计这个项目的结构。

我将按照我在我的频道上的项目结构视频中描述的方式来组织这个项目。

如果你不知道我的意思，那么我有一个视频，描述了 Python 项目应该如何构建，无论是初学者项目还是高级项目。

所以如果你想看一看，你可以点击建议的链接。

因此，现在我将继续创建一个名为 Woking 的子目录。

我这样做是因为我想在这个目录中包含预订机器人的所有相关代码。

然后这个 main.py 文件将继续从这个目录中调用必要的 Python 文件。

让我把它改成跑步，这样赢起来更舒服。

所以我会继续做下去。

好了，在这个预订目录中，我们将从创建三个文件开始。

因此，让我们继续创建第一个。

所以第一个将被命名为预订。

在这里，我将有一个类，它将有一些实例方法，我们将调用它们，以便让我们的板执行一些操作。

第二个是常量。

所以我们将会有很多价值观，我们真的想通过我们项目的执行来改变它。

这就是为什么把这些变量放在另一个文件中，我们可以称之为常数，这是一个好主意。

因此，我将继续这样做。

我现在要创建的另一个文件将用下面的方式调用。

所以它会被加两次下划线。

实际上，我这样命名这个文件是有原因的，因为这是当你想创建一个 Python 包时的惯例。

现在你想创建一个 Python 包的原因是因为我们想从这个 run.pi 文件调用这个包。

现在请注意 run.pi 文件是如何位于工作目录之外的。

这是我创建这个双下划线的另一个原因，你需要双下划线文件，这只是一个惯例，将这个目录标记为 Python 包。

现在，我将用几秒钟的时间来解释双下划线 init 文件的一些特殊之处。

假设我们转到 run.py 文件，我们希望从常量文件中导入一些内容，以便成功地执行一些内容。

所以我们可以这样说，比如从预订点常量，导入一个，现在我知道这个变量实际上并不存在，所以我们可以这样创建它。

注意现在我在常量里面了。

如果我回去跑步，我们就完全没问题了。

现在，在我这样做之前，让我到双下划线 init 文件并说，我将首先打印。

现在我在这里的意思是，无论你从预订目录导入哪个子模块，首先，双下划线 init 文件总是会被执行。

为了证明这一点，我将执行 run.py 文件，它基本上只从常量文件中导入一个变量。

如果我继续运行它，您会看到我们收到了这条消息。

因此，对于 Python 包，这是我们应该注意的另一个重要行为。

我们也将在我们的项目中利用这一优势。

但是我只是想确保你理解 Python 包的行为。

现在我们已经完全准备好开始建造我们的机器人了。

现在，在我们开始之前，我不建议运行这个机器人，或者每隔几秒钟运行一次，因为这可能会导致服务器端自动禁用您的公共 IP 地址。

这总是不好的，因为这样你就不得不联系那个网站，并解释说你并不想造成任何伤害。

这就是为什么当你在那些更大的网站上测试你的机器人时，一定要给你足够的空间，比如我们要用的 booking.com 网站。

好的，所以我已经删除了之前给你们看的所有例子。

现在我们准备开始写我们的类了。

现在我说我们要让这个项目面向对象。

因此，我命名为 booking.py 文件的这个文件将负责描述稍后我们将调用的方法，这些方法将采取我们希望我们的机器人采取的行动。

所以让我们开始吧。

首先，我们想从 Selenium 库中导入 WebDriver。

所以我们可以创建一个类，它将继承 Selenium 库中的一些实用程序。

因此，我们将从 Selenium 导入 web 驱动程序开始，然后我们将深入到行。

我们会说“班级预订”,这实际上是我们班级的一个好名字。

现在这个类将从 web driver . Chrome 继承。

我们之所以要这样做，是因为我希望 sale 对象既可以选择使用 WebDriver 点 chrome 方法，也可以选择我将为类 booking 本身设计的方法。

所以现在我可以进入我们的类，原谅我这些反斜杠，设计双下划线 init 方法。

这是我们类的构造函数，所以一旦我们实例化了这个类的一个实例，这个方法就会被立即调用。

所以我们会这样写 def 双下划线。

我们将收到一个参数，我可以给这个驱动程序命名，就像这样。

如果记得的话，这将存储我们的司机的位置信息。

现在，为了节省一点时间，我将收到该参数的默认值，这正是我在本同义词系列的前三集中使用的值。

所以这将是所有的花名册，我会在这里打开，双引号，我会说 C 列反斜杠，说 lynnium。

因为这是我安装 chrome 驱动程序的地方。

好的，现在我可以说 self dot 对手 pad 等于对手 path。

除此之外，我会说，超级。

我在这里使用 super 的原因是因为我想在这个过程中实例化 web driver . chrome 类。

我想这么做的原因是，构造函数会抱怨继承的类还没有被实例化。

所以这就是为什么我不能允许自己用超级方法这么做。

现在，如果你从未见过我使用 super 方法，那么我实际上有一个视频，来自我一年前创作的一个系列，你可以看一个专门用于类继承的视频。

所以我会把建议视频的链接放在最上面。

好的，这个 super 将接收当前类的名称作为参数，以及 self 对象。

现在我也要调用 webdriver.com 类的双下划线 init 方法。

所以这一行也将成功地实例化 web driver . chrome 类的一个实例。

为了做到这一点，我们来设计一种随机金属。

所以让我们在这里说，像这样的东西着陆在第一页，并接收 self 作为参数，因为这是一个实例方法。

现在，如果我说 self dot get，那么你可以看到我对 WebDriver dot chrome 类的方法有完全的访问权。

你可以看到，我也可以利用 find 元素。

以及使用 get 方法。

所以这些方法对我们来说很熟悉，因为我们在系列的开始部分看到过。

所以这是完美的。

现在我有了一个类，我可以使用 Selenium 方法来处理我们想要对我们的在线工具栏执行的操作。

好的，所以我要利用这个方法。

我将把我们的板指向我们想要这样做的第一个位置。

我将在这里使用 get 方法。

作为 URL，我将传入我们试图在其上制作在线板的网站的 URL。

所以将会是 booking.com 的两倍的 HTTPS。

实际上，这是我创建常数点 p，y 的确切原因，在这种情况下，我们可以做什么，这里的值可能是不会变的。

所以一般来说，因为这是我们会一直使用的网站。

这就是为什么把这个值移到我已经创建的文件中，比如 constants.py，是一个完美的主意。

所以我们可以通过存储一些常量来利用这个文件。

按照编程惯例，当我们有常量时，我们应该使用所有的强制变量。

所以我要说的是，基线 URL 等于这里的精确 URL。

现在我可以回到我们的预订了。

我可以使用像 const 那样的导入预订点常量，只是为了使它更短，更容易阅读。

我现在可以说 const，点基 URL。

现在我们准备从这里继续。

现在，实际上，在我们测试之前，如果你还记得，在前三集我们实例化 WebDriver chrome 类之前，我们必须做一些强制性的事情，因为否则 Selenium 会抱怨它在 PATH 变量的系统级别中没有驱动程序 Pat。

这就是为什么我们用了看起来像是嫉妒的东西，如果你还记得的话。

所以在我们使用这种超级金属之前，我们先这么做，因为，否则圆柱体会抱怨这个错误。

所以我要从这里开始，我要说 import always，我要下去，我要在这里使用 always dot envy Ron，我要访问 cat 变量。

我要用加号等于。

然后，我将添加像这样的自我点驱动程序路径。

现在，如果你不记得这是做什么的，一定要考虑看一两分钟第一集。

但是让我把第一集的代码拿来。

所以我现在在我最近发布的 GitHub 知识库中，当我发布这个系列的时候。

如果我们看一下，你会看到我在最开始用的，这一行，把这个路径添加到路径变量中。

这就是为什么我基本上在我们的课上使用了相同的表达。

好吧，让我们回到五位先生继续。

现在我们可以做的就是转到 run.py 文件，导入这个类并创建它的一个实例。

所以我们真的可以像登陆第一页一样使用它的方法。

如果我们转到 run.py 文件，放大一点，比如说，从 booking，实际上，应该是从 booking dot booking，因为我们也想引用文件名，我们只想导入 booking 类，我就是这样命名的。

现在我可以说 inst 相当于一个预订实例。

我不会传递任何东西，因为我想利用这个驱动程序板的默认值。

现在我真的可以尝试使用我们推出的第一种金属。

所以这将是第一页。

所以这条线将负责把我们的机器人带到 booking.com 主页。

所以现在我可以执行 run.py 文件并测试是否一切正常。

所以如果我运行它，让我们看看会发生什么。

好的，你可以看到我们已经进入了我们从一开始就想进入的页面。

现在我们可以从这里继续设计我们的机器人。

现在将会有成吨的行动，我们想采取，基本上填写我们要去的地方，或日期，我们想检查加上检查，以及增加更多的人到我们的假期。

因此，所有这些的组合将被分为，举例来说，奖牌。

事实上，我们这样做将使我们的代码更具可读性和可维护性。

这就是为什么在这里使用面向对象是一个完美的想法，因为它给了你扩展应用程序的选择，如果你以后想这么做的话。

好的，在这个阶段，我们还想设计一个非常有趣的东西。

现在，您可能注意到，尽管我们只想启动索引页面，但我们仍然打开了驱动程序实例。

这意味着在我们的下一次测试中，Chrome 浏览器仍然会被打开。

这可能会导致我们在电脑上打开 10 个甚至 20 个浏览器。

现在，有时当我们测试一些东西时，一旦电路板完成了它的工作，我们会立即强制关闭我们的浏览器。

所以这就是为什么有时我们想要控制我们是否想要退出 Chrome 的应用程序，或者让它保持开放。

所以这是我们为什么喜欢使用上下文管理器的一个很好的候选，因为使用上下文管理器可以给我们更多的控制，当我们想要开始什么，当我们想要破坏什么的时候。

这就是为什么我要在整个项目中使用上下文管理器。

因此，为了实现这一点，接下来让我向您展示在类级别需要做些什么。

如果你还没有听说过上下文管理器，那么我将在这里给你一个简短的解释。

但基本上，如果你想更深入地了解它，那么我有一个视频是专门为 Python 中的上下文管理器准备的。

所以，如果你愿意，一定要考虑看看建议的链接。

但是让我们去把这个盖住。

所以我要去 booking.pi 文件。

我将使用另外两个神奇的方法，让我们基本上利用上下文管理器。

现在，在实例级使用上下文管理器的方式是实例化一个类的实例，该类具有类似的宽度、关键字和工具。

然后我现在要水平分割窗格，我相信，不，我们应该这样做，对不起。

我想垂直地做那件事。

好了，在左侧窗格中，我将看到我们的 booking.py 文件，在右侧窗格中，我将看到 rumbaut py 文件。

因此，在右侧，我现在将删除所有内容，我将说“等待”,像 board 那样预订，然后我将转到这里，我将在第一页上购买该土地。

使用这种方法的好处在于，一旦 Python 到达缩进之外的那一行，它就会执行一些拆卸操作。

我们想要定义这些拆卸动作的位置，按照惯例是用在神奇的金属下面，叫做水平下划线出口。

为了实现它，我会在这里，在那里，用双下划线退出。

我将使用 Python 的这个建议，因为默认情况下，它会接收更多的参数。

我不想把事情搞砸。

所以我就在 Python 的建议下按回车就好了。

所以现在我可以说 self dot 退出。

因此，一旦我们完成了所有工作，退出将是负责关闭 Chrome 浏览器的方法。

为了证明这一点，我要运行这个。

我要说的是缩进里面，出来，就像这样。

现在让我们再运行一次 run.py 文件，看看会发生什么。

所以我要运行它。

当我们收到这个页面时，你可以看到我们已经退出了，紧接着，Chrome 浏览器关闭了。

这意味着一旦 Python 跳出了权重表达式的缩进，它就会自动执行双下划线退出中间，这就是复杂管理器的工作方式。

当我们希望在项目开发过程中测试多种东西时，拥有这样的东西是完美的。

现在，我们可以选择何时拆除它。

或者当我们不想拆的时候，那么我们基本上可以在这里多接收一个参数。

所以我现在在预订文件里面，那么我可以说 tear down 默认等于 false。

我可以说，在退出模式下，类似于 if teardown。

所以这基本上是指对不起，这将是自我点拆卸。

我们应该在这里说 self dot teardown 等于 teardown，然后我可以在这里用一个 if 语句，说 self dot teardown。

因此，如果这是真的，那么运行 self 点退出。

但是如果这是假的，那么就不要做任何事情，让浏览器打开。

现在当我想拆的时候，我可以传到这里，直到我等于真，或者我不能传。

如果我没有通过，那么浏览器将保持打开。

所以，这是一个很好的控制方式，无论你是想关闭浏览器还是想让它保持打开，有时你可能想测试其他东西，而不仅仅是测试 Selenium 代码。

现在，让我也删除退出行，现在我们明白了这一点。

我认为这就是上下文管理器。

所以我希望你理解了上下文管理器的工作原理。

好了，在那个阶段，我们已经离开了上一个教程，我们在上一集中已经了解了，我们如何使用这个预订类，以便在我们的 WebDriver chrome 类中有更多的控制。

我们还设计了一些有用的方法，比如双下划线退出。

因此，当我们实例化这个 booking 类的实例时，我们可以选择使用上下文管理器。

我们还在这里设计了这种金属，看起来就像是铺上了第一页。

它基本上是将这些 cons 思想的基础 URL，即 booking.com，借给电路板，它位于 constants.py 文件中。

好了，现在在我们继续并了解下一步是什么之前，让我再做两个动作，这对我们获得更多控制非常有用。

所以第一个是添加隐式权重方法。

快速提醒一下，重量是一种金属，它允许我们等待一段时间，直到元素在网站上准备好。

因此，如果我们说 self 点隐式等待，例如，在这里传递 15 秒，那么无论哪个方法将被执行与查找元素的前缀，然后它将等待大约 15 秒。

但是他也可以用更少的时间进行下一个查找元素的方法，因为并不总是这样，我们想等 15 秒，这个方法会对此负责。

我想在这里添加的第二行代码是 self 点最大化窗口。

我想这么做的原因是，我想在测试电路板时看起来更清楚。

现在让我运行 run.py 文件。

现在你可以看到网页浏览器已经在最大化的窗口中打开，所以它更漂亮了。

你也可以看到我们如预期的那样在 booking.com 境内。

好吧。

现在我们已经完成了这一步，下一步可能是自动点击选择您的货币。

现在你可能会认为我们应该自动检查你要去哪里，检查结账日期，选择我们有多少人，但实际上，首先，改变货币可能是一个好主意。

因此，在我们搜索之后，我们将对所有将要达成的交易有一个更常见的看法。

那么现在，让我们基本上了解我们需要自动化什么。

所以我们需要自动点击它。

紧接着，我们需要自动点击美元或欧元或我们寻找的任何货币。

现在，出于本教程的目的，我将尝试自动点击美元，因为基本上，这是最受欢迎的货币之一。

所以这是我们应该做的，我们应该基本上点击这一个。

在那之后，我们应该试着点击那个。

在我们点击之后，您可以看到货币已经发生了变化。

然后，我们准备尝试在“你去哪里”文本框中发送一些文本。

现在，让我们试着理解一下我们将如何自动点击它。

我将单击右键，然后单击“Inspect”。

这样我们就可以了解哪个元素负责显示这个按钮。

现在，我不知道为什么我总是要做两次。

但是我真的还没想明白。

但是如果这也发生在你身上，那么也许你可以试着再做一次。

它基本上会像预期的那样将元素着色为蓝色背景。

所以我会再做一次。

您可以看到，这个按钮实际上负责显示货币元素。

所以现在，当我们试图用硒来识别一种元素时，那么我们应该总是足够聪明，尽可能用最独特的表达来识别这种元素。

现在，ID 属性实际上是 HTML 元素可能拥有的最独特的属性，但并不总是如此，我们将为 HTML 元素拥有 ID。

所以这就是为什么我们需要找出其他方法来找到那个元素。

在我们的例子中，也许你已经教过用类来找到这个元素，等于是 UI 按钮。

但实际上，这可能不是最明智的做法。

因为该类中可能还有一些其他按钮，因为 HTML 中的类是用于设计元素样式的。

所以多个按钮可以有相同的样式。

这就是为什么我觉得在这个按钮上的数据提示文本等于选择你的货币是一个更独特的表达方式，我们可以使用。

所以现在，我要从这里复制这个表达式。

我要用我们在第三集中学过的 CSS 选择器方法来识别它。

所以我要回到圆周率魅力。

下面，我要说的是他们的兑换货币。

我还将在这里接收货币作为参数，以便我们可以选择换成不同的货币，而不是美元。

所以我要说货币。

在下面，我会说 self dot find 元素通过 CSS 选择器。

我将打开和关闭，我将按 enter 键，因为我不想让代码行太长，所以用下面的方法把它们分开是个好主意。

我现在要打开一个代码，我要用按钮来打开和关闭方括号。

如果你还记得，这就是我们使用 CSS 选择器的方式，我们首先编写 HTML 元素的类型。

然后在里面我们写了表达式，我们应该过滤这个按钮，这将是数据工具提示文本等于选择你的货币。

然后把整个表达式赋给一个变量是个好主意。

所以我要说货币，下划线元素等于那个。

在下面，我可以说货币下划线元素点，所以它会自动点击。

现在让我将这个参数改为默认值。

所以我们不需要一直传递这个值。

现在我要打开右侧的运行点 p y。

让我把它垂直分开。

让我像这样打开这个，然后让我调用这些按钮。

所以它会像那样被兑换成货币。

然后让我运行这个 run.py 文件并测试结果。

正如所料，我们现在在主页上，您可以看到我们已经自动单击了“仅更改货币”元素。

这很好。

这是实现我们目标的伟大的第一步。

现在，我们希望自动化的下一件事可能是单击其中一种货币。

出于本教程的目的，让我首先展示我们如何识别美元。

现在，在未来，我们有一个接收货币类型的参数。

因此，也许我们可以从四舍五入的 p y 中选择，这是一种我们可以自动点击的不同货币。

所以让我再次使用 inspect。

所以我们可以识别这个元素。

现在，如果我单击这个元素来展开它的 innerHTML 元素，那么您可以看到，在这里，我们有这个文本和这个文本。

但实际上，整个按钮都来自这个锚标记，因为如果我把鼠标放在这里，然后我悬停它，你可以看到我们有一个绿色的背景包围我们的货币。

这就是为什么我们应该试着找到这些 a 元素。

我们应该用一些东西来帮助我们识别这些标签。

现在我在这里扩大了检查的范围，这样我们可以看得更清楚。

您可以看到，我们这里还有一些关键值属性，现在我可以尝试查找数据模型标题 async URL params，类似这样的内容，其中包含的文本看起来像选定的下划线货币等于美元。

现在我知道我们没有学习如何找到包含一些子字符串的元素。

但是使用 CSS 选择器方法也很容易做到这一点。

让我们用饼状图来说明如何做到这一点，好的，下面，我将使用一个新的变量，我们可以将其命名为 selected currency 元素，这将是 CSS 选择器的 self dot find 元素。

这里我们要重新写下这个表达式。

所以它会是单引号 a，然后我们会用方括号。

现在我们将使用这些长表达式来帮助我们识别这个元素。

因此，它将是数据破折号，模态破折号，希瑟，破折号，异步破折号，URL 破折号参数，就像这样。

所以我知道这是一个很长的表达。

但这实际上是识别这种元素的一个很好的方法。

这将包括一个子串。

所以除了做等于二，那么我们应该用星号等于。

现在我又知道了，这不是我在前三集里讲过的。

但是现在我们知道如何找到包含 substring 的表达式。

这就像在等号旁边使用星号一样简单。

然后我会在这里用双引号。

我会说选定的货币等于美元。

现在，如果你还记得的话，这实际上是这个长键在这个元素中的值，我们希望自动化。

所以现在我们可以说选定的货币点点击。

这应该足以自动点击美元货币。

现在，你可能会想，除了没有使用货币参数之外，为什么在这里硬编码这个 USD。

所以这是一个很好的观点。

我现在就要改变它。

所以我要在这里添加一个格式化的字符串。

我会像这样提到货币的价值。

然后我现在要做的是再次运行 run.pi，拆分窗格并处理 run.py，我将传递货币等于 USD，如下所示。

然后这行代码会负责把这个表达式替换成 USD 字符串，这就足够了。

让我们来测试一下。

所以我要运行我们的程序。

好的，所以你可以看到货币已经变成了美元。

现在，我们还可以通过尝试点击一种完全不同的货币来再次测试这一点。

所以还是用 G BP 吧。

好吧，让我们试着这么做。

所以我们再来打开圆周率魔咒。

除了发送 USD，让我们发送 GB P 并再次运行我们的程序。

让我们看看会发生什么。

好吧，好吧。

所以，再一次，完美。

如你所知，我们已经确定了完美的关键值表达式，以确定兑换货币的元素，从这里开始，我们已经准备好进行下一步，我们的董事会应该这样做，以寻找最佳交易。

好了，现在我们已经完成了兑换货币的方法，那么让我们设计下一个方法。

如果您还记得的话，我们现在应该尝试标识一个元素，用于向搜索文本表单元素发送一些文本。

因此，如果我们再次运行我们的自动化，只是让浏览器在 booking.com 打开，并等待这个自动化完成，那么现在我们应该自动发送一些文本到这个区域。

所以我又要去视察了。

我将尽我所能找到最智能的表达式，将文本发送到这个表单字段。

现在，我在本教程的前面说过，如果我们的元素包含 id 属性，那么这实际上是元素可以用来基本标识每个唯一性的最强属性。

所以这就是为什么我要用值为 s 的 ID 来标识一个元素两次。

所以现在我可以用 Python 中的一个新方法来说，像这样选择要去的地方。

我基本上可以收到一个参数，它会告诉我要去哪里。

而现在我可以下去说 search field 等于让我把字体变大。

所以，如果你没有很好地理解这篇课文，请原谅。

所以我在这里说 self dot 通过 IE 找到元素。

我要用 s 找到这个，两次这样。

首先，我要做一件我们之前从未见过的事情，看起来像搜索域点清除。

所以 clear 代表清理现有文本。

因此，如果有一天，我们想搜索两次，那么我们可能会有一些剩菜。

这就是为什么在我们写一些新的文本之前，首先清理整个文本是一个好主意。

这就是我推出 clear 方法的原因。

然后我将使用搜索字段点发送下划线键。

我基本上要说的是，从这个参数到达的地方。

然后我要去跑间谍了。

我要说的是机器人选择要去的地方。

让我们把纽约作为第一个要去的地方。

现在让我们看看会发生什么。

因此，我将再次运行我们的自动化，并测试结果。

现在，顺便说一下，我们可以注释掉变化的货币代码，只是因为我们不想每次在我们的板中测试一个新的区域时都执行它。

所以我马上就要开始了。

好的，所以你可以看到，当我写了一些文字的时候，我们收到了一个下拉菜单。

这意味着我们现在需要去识别下拉的第一个结果。

我们需要自动点击它。

所以这正是我要做的。

现在，我将单击下拉菜单中的“inspect”。

再来一次。

您可以看到，这是我们应该自动点击的值。

所以这其实是一个带有 API 标签的属性。

现在，Li 实际上代表了一个列表 HTML 字段，如果我们想要显示一个元素列表，这个字段基本上是常用的。

这就是为什么我们看到这个标签上有李的名字。

现在，我们应该再次尝试找到我们将如何点击这些李。

所以这是这个元素，我相信是的。

如果我们把这个再放大一点，我们会有一个更清晰的外观。

现在你可以看到，在每个 Li 中，我们有一个属性，表示数据破折号 I 等于某个字符串。

现在我知道这很难理解。

但是如果你看看左下方，你可以看到，一旦我指向那个元素，那么我们下拉的第一个结果是以绿色背景显示的。

如果我将鼠标移至该元素，您会看到它现在指向下拉列表的第二个结果。

这意味着数据 I 值实际上是所有结果的索引，因为第一个结果的值是 0，第二个结果的值是 1，第三个结果的值也是 1，依此类推。

所以这就是为什么我们用数据破折号 I 等于零的表达式来称呼标识元素。

我将打开我们的饼图，并在“选择要去的地方”下显示类似“第一个结果等于通过 CSS 选择器自己点查找元素”的内容。

我们的表达式看起来又像是 l，II 和方括号，这将是数据破折号 I 等于零。

在我们完成这个之后，我们会像这样说第一个解析的点。

然后我会让一切保持原样，因为这些行将负责基本上点击第一个结果。

这正是我们想要做的。

因此，我将运行 run up UI，并再次测试结果。

我忘了取消对这一部分的注释，请原谅。

现在你可以看到，我们得到了一个完美的结果，我们自动点击了下拉列表的第一个结果，因此我们已经做到了，然后 booking.com 自动带我们到签入签出区。

这里是我们已经可以尝试自动选择入住日期和退房日期的确切位置。

所以这很好。

这意味着我们已经完成了一项出色的工作，确定了如何在特定元素上调用单击。

好了，这是我们离开上一课的阶段。

正如你所记得的，当我们选择了我们想去的地方，默认情况下，booking.com 会弹出入住或退房的日期，用户可以选择。

这意味着我们可以自动选择入住日期和退房日期。

我录制这段视频的时间是 2021 年 5 月。

因此，如果你自己看到了完全不同的结果，那么这可能意味着你在另一个日期看这个。

所以结果对你来说会有所不同。

但是我要写一个足够通用的方法来支持任何类型的日期。

所以让我们开始吧。

因此，我们需要以某种方式单击两个日期，因为第一个日期代表入住，第二个日期代表退房。

因此，我只需单击右键，并再次输入“inspect”。

然后我会去检查窗口。

让我们看看如何自动点击这些按钮。

所以你可以看到实际上是这个。

并且是这个 TD 元素的子元素。

现在 te D 代表表数据。

这可能意味着这个元素是一个更大的 HTML 标签的一部分，这个标签叫做 table，是为创建 HTML 表格而设计的。

这也是这个页面显示日历的方式。

你可以看到这里的表格，当我将鼠标悬停在上面时，你可以看到它完全以蓝色背景着色。

这意味着我们需要自动点击这个按钮。

我们实际上可以再次使用一个圆，通过选择一个数据日期等于某个日期的元素。

如你所见，在这种情况下，是 2021 05 16。

所以我要复制这个语句，我要回到 pi charm。

让我们试着自动化。

在 booking.pi 下面，也就是我们的 booking 类所在的地方，我要再输入一个方法，我们可以称之为 select，shake。

或者我们可以称之为选择日期，类似的东西。

然后，我们将收到两个参数，如中的入住日期和退房日期。

我们可以说，check in 元素等于 self dot find 元素，通过 CSS 选择器。

这将会有一个论点，下面的陈述。

因此，我将打开单引号，我将使用 TD，因为这是我们希望自动化的元素。

然后我们将打开和关闭方括号。

我们会粘贴声明来标识元素。

所以现在你可以看到这个日期被硬编码在这里。

我将使用格式化字符串，将硬编码的值替换为 check in date 的值，这是我们作为参数接收的值，然后完全可以说 check in element dot click，然后我们将对 check out date 做完全相同的事情，因为这是我们选择一个日期范围来决定假期日期的方式。

我现在要走了，我要说检查提升，元素，对不起。

它将再次等于 CSS 选择器的 self 点查找元素。

我将使用与 check in 相同的语句。

我要把入住日期换成退房日期。

所以在下面，我们可以再次使用 checkout 元素来决定入住和退房日期。

我们现在唯一要做的就是回到 run.pi，通过传入两个参数来执行这个方法。

因此，它将被购买，选择日期，我们将在入住日期等于让我们说 2021 年 05 日。

五月，然后是 16 月。

然后我们将对结帐日期做同样的事情。

例如，我们将在 2021 年 5 月 23 日通过。

好的，让我们继续测试我们的程序。

现在我们明白了，我们不必再真正测试找零货币了，因为这很有效。

所以我现在可以允许自己对此发表评论。

好的，让我们运行一下，看看会发生什么。

好的，这非常有效。

你可以看到我们有入住和退房日期。

现在，让我告诉你一些非常重要的事情。

实际上，假设您希望自动选择两个月或三个月后的日期。

因此，这是我不打算在本教程中展示的东西，但你有所有的工具，基本上可以自己实现这一点。

假设你想选择某个日期，从今天起四个月后。

因此，这意味着您必须自动点击这个下一步按钮三次。

然后，您将可以选择日期范围，即从今天起的四个月后，在我的示例中是 2021 年 9 月。

我只想说，我知道这个程序不支持按日期选择假期，比如从今天起五个月或六个月。

但是，同样，你有所有的工具，你可以尝试自动完成这个动作。

好的，接下来我要直接展示的是我们如何选择成年人来决定我们的假期。

为此，我们需要首先模拟点击这个区域。

然后，我们基本上是在寻找自动化它点击这个减号，或这个加号，基本上决定成人。

现在，我们将再次尝试编写一个方法，基本上接收一个成人计数的参数。

然后我们将试着模拟决定我们假期的成人。

现在，我不会为孩子或房间展示，因为这可能是我们需要重复的相同逻辑。

但是，你可以选择以任何你喜欢的方式来扩展你的机器人。

好的，现在，首先，让我们开始识别这里的整个区域。

所以检查，并再次加载。

好的，我们寻找基本上给这个选择按钮的整个区域着色的元素。

所以我认为这将是这个标签与 XP 的 ID，客人切换。

所以我知道这里的字体有点小。

但这基本上就是这里所说的。

它对我们说惠普客人切换。

所以我要复制这个值。

我要去我们的董事会。

我要继续写另一个方法，我们可以这样命名，像这样选择成体。

然后我们会收到 count 作为参数。

我们将会看到如何用这种方法来控制成年人的数量。

所以在下面，我要说选择元素，类似的东西。

我将使用 self dot find 元素 by ID，我将粘贴之前复制的值。

所以你可以看到它是 XP 双下划线 guests 双下划线切换，我将只是选择元素点点击如下。

现在让我传入一些默认值。

因此，当我们从 run dot p y 调用这个函数时，我们不会收到箭头，然后我会转到这里，我会说 Bob dot 选择成人，就像这样。

现在让我们看看如果运行我们的程序会发生什么。

所以到目前为止，我们应该只能看到弹出的这个页面。

我指的是这个区域，不是这一页，它看起来还可以。

看起来很有效。

因此，我们可以继续看看我们如何控制我们的假期成年人。

好了，现在我们必须控制如何选择成年人的数量。

现在，这可能是一个棘手的行动，因为让我们说，你想去与三个成年人，那么这意味着，在这种情况下，你只需要自动点击加号一次，因为默认值是 2。

但是如果有一天在 booking.com 默认值不再是两个成年人，比如说默认值会变成四个或五个，三个或任何其他数字。

所以我们实际上可以更聪明。

在我们的方法中，不是试图自动点击加号，而是依赖于我们将要传入的任何成人计数。

因此，我们可以首先尝试将成人数量减少到最小值。

然后我们可以更好地控制我们真正需要点击增加按钮的次数。

因此，首先，我们可以编写一些逻辑来减少成人的数量，直到值达到一个成人，因为这是我们可以拥有的最低成人值。

然后我们可以试着点击加号，这取决于传入的成人数量。

所以这是完成这类任务的更通用的方法。

实现这一点将会非常有趣。

所以我要去找我们的 PI 主席，你知道在这之前，我们需要了解如何点击测验按钮。

所以让我们做一下检查，看看我们如何识别减少的元素。

让我们扩展一下，看看这里发生了什么。

所以你可以看到，当我将鼠标悬停在这里时，这个减少的按钮会以绿色背景着色。

这是我们自动点击的按钮，您可以看到它有一个独特的区域标签值，值为成人数量减少。

我相信，我们会对越来越多的成年人说同样的话，体重区域标签是关键。

所以我觉得应该是这个。

如果我们打开这个元素，看到它的属性，我就移到这里。

好了，就是这样。

所以你可以看到它有增加成人数量的区域标签。

这是我们识别这些按钮的方法。

让我基本上复制语句，并尝试通过 CSS 选择器找到这个元素。

好的，在选择成年人的方法下，我们将使用像减少这样的东西。

通过 CSS 选择器，成人元素等于 self 点查找元素。

我们将传入 button，打开和关闭方括号，基本上粘贴我们之前复制的键值声明。

你可以看到，区域标签等于减少成人数量。

现在，我们需要以某种方式模拟点击该按钮，直到成人计数达到 1，因为正如我们所说，这将允许我们有更多的控制，基本上决定成人计数。

因此，我将使用 while true，然后在这个 wild 规则中，我们将编写一个 if 语句来查找成人计数的值。

一旦它的值达到 1，我们就会跳出 while 循环。

所以我要说的是。

我要去这里，基本上修复压痕。

然后，我将继续下去，我将说减少成人元素思想点击。

现在，如果我让代码保持原样，那么它总是会尝试单击折痕按钮，这显然不是我们想要的。

但是我们需要一些逻辑来识别这个值是否达到了 1。

如果是这样的话，我们真的想离开野外。

所以这就像是如果成年人的价值达到 1，那么我们应该跳出 while 循环。

让我们看看如何识别它。

因此，我将返回浏览器，搜索显示值的元素。

所以应该是这个，我的鼠标指向这里，放大一点，这样你可以看得更清楚。

你可以看到我指的正是这里。

让我们来检查一下，你可以看到它实际上依赖于这个 span 元素。

你可以看到它有一个文本。

这意味着什么，意味着我们可以试着找到这个元素，看看它的价值。

现在，如果我在这里加上加号，你可以看到它被更新了。

这意味着这正是我们需要的元素。

现在，我可以在这个 inspect 页面中看到，我们有更多的元素正在随着成人计数进行更新。

你可以在这里看到输入的顶部，让我放大。

所以你可以看到这个元素实际上也在不断更新。

我选择这个元素的原因是因为它有 ID。

如果我们记得我说过 id 是 HTML 元素用来标识其唯一性的最强属性。

所以，如果我点击 plus hearing，你会看到它被更新了。

所以我要用成人组的 id 来找这个柠檬。

我将回到 Python，看看我们能对这个元素做些什么。

所以我要走到这里说，成年人价值元素等于 self dot 按 ID 找元素，应该是群体成年人的价值。

好了，现在我们已经控制了显示成人数量值的元素，那么我们应该以某种方式接受成人的挑战。

这是我们没有学会如何做的事情，因为我们只学会了像点击或发送按键这样的动作。

但是我们不知道如何在 HTML 元素中接收某个键值。

因此，我们将使用我们在这里确定的成人价值元素。

然后基本上是通过启动一个叫做 get attribute 的方法。

get attribute 基本上是一个方法，它接收一个键名，然后尝试返回给你这个属性的值。

如果我们回到我们的浏览器，你可以看到我们需要使用这个名为 value 的键，因为这是显示成人数量的内容，对吗？所以我们需要这把钥匙。

所以我要去这里，回到一个饼图，基本上在这里传入值。

这个完整的声明应该给出成人的数量。

所以我把这个注释掉，因为代码开始变得更复杂了，所以我们可以记住每一行负责什么。

下面，我要输入一个条件，如果我们把整个语句赋值给一个独立的变量，效果会更好。

所以我可以说成年人的价值等于整个陈述。

让我在这里写一些分割线，因为我们想让代码更有条理。

好的，在下面，我可以这样说，如果成人的值等于 1，现在，我已经知道这个语句会返回一个错误，因为默认情况下，get 属性以字符串的形式返回值。

我们也不能写比较字符串和整数的 if 条件。

所以我们要把这些成人值转换成整数。

然后我们要检查它是否等于 1。

现在，一旦它等于 1，那么我们就可以打破 while true。

所以我们来看看这个逻辑是否行得通。

因此，我们应该通过执行 run.py 文件来测试它。

我们应该看到成人计数被设置为一个成人。

所以现在我要测试一下。

好吧，所以我们可以看到，它的工作完美，成人已被改为一个。

我们现在唯一要做的就是识别这个加号按钮，基本上就是说我们要离开 10 个成年人，然后我们要启动一个 for 循环，点击这个按钮 9 次。

因此，让我们回到 pi charm，现在实现它，以真正测试它是否正常工作，然后我们真的要假设我们有 10 个成年人在我们的假期。

所以当我们调用这个方法的时候，我会传入这个参数。

所以现在让我们回到我们的方法，最小化这个野规则，因为我们已经完成了它的工作。

我们可以说，增加按钮元素将再次等于 CSS 选择器的 self 点查找元素。

如果您还记得，这是一个按钮，其键值对“area”标记为“等于”,我将打开这些双引号，并说“随大写字母增加”。

我用大写字母 A 数成人，然后我要往下数。

我将启动一个 for 循环，应用范围构建函数，这样我们就可以真正控制这个 for 循环将要执行的次数。

所以我说 I 在范围内，我们用计数的范围，减 1，因为如果你记得的话，我说过我们应该减 1，以达到这里传入的精确计数。

所以我们要说增加按钮元素点点击。

仅此而已。

现在我不确定你是否知道。

但是基本上，如果你不打算引用这里用到的变量，那么按照惯例，你不需要传入一个变量名，比如 I 或者 a 之类的，你可以用下划线，保持原样。

这只是 Python 中的一个约定，表示我们不会使用变量值。

所以现在我们准备测试整个程序。

因此，我将启动我们的 run.pi 文件，我们显示 C，成人计数设置为 10。

如果我们运行我们的板，等一下，你可以看到，一开始它真的工作得很好，我们使用这种安全逻辑将成人数设置为 1，然后我们可以完全控制我们想要设置的成人数。

现在，这真的很通用，并且工作得很完美，因为即使我们要从我们的方法传入 count 等于 1，那么最终会发生什么，它会到这里，它会尝试应用范围为 0 的 for 循环，它永远不会运行，因为如果你有一个范围超过 0 的 for 循环，那么你基本上不会迭代任何东西。

所以成年人的数量保持不变。

这是完美的。

所以这个逻辑真的行得通。

我们基本上已经准备好了，单击搜索按钮来真正测试我们是否会收到任何结果。

所以这将非常容易，因为按照惯例，无论是什么网站，每个搜索按钮都有一个键值对，表示 type 等于在那个时间提交一些东西。

因此，我们将单击“Inspect ”,看看该网站是否也是如此。

如果我们展开它，到这里查找这个按钮，您可以看到它的类型等于 submit。

因此，我们可以自动尝试用 CSS 选择器和 HTML 类型的按钮来识别具有该键值对的元素。

因此，如果我们回到 Python，我们可以很容易地再创建一个方法，我们可以称之为点击搜索。

在这个方法中，我们基本上什么也收不到，因为没有我们想要传入的参数。

我们会说直接了当的通过 CSS 选择器找到元素。

我们应该找到一个带有这个键值对的按钮，然后把它们分配给一个变量，比如 search button。

后来，我们喜欢点击它。

好的，在这里，我将把这个板叫做点按搜索，看看是否一切正常。

现在，为了真正测试整个逻辑，让我取消对 change currency 的注释，并将其改为 USD，看看是否一切正常。

让我挑战一下这个程序，换一个日期。

所以我们可以说这里是 19，传入这里是 25。

并真正测试一切是否正常工作，即使我已经定制了一点点值。

所以如果我们运行我们的程序，基本上什么都不做，所以我不会去碰我的鼠标，看看是否一切正常。

好吧，所以货币日期，成人搜索，完美，只是完美。

一切都很好。

我们从这些 booking.com 网站上看到了一些关于不同酒店的结果。

这很令人兴奋，因为我们真的有了一些结果。

在接下来的几集里，我们将深入探讨更复杂的东西，因为我们只需要确定最佳交易，通过说最佳交易，我们需要以某种方式自动对结果应用过滤。

好的，这里您可以看到我们有一些关于我们真正可以预订的结果。

但是正如我们从这一页所理解的，我们真的有多种选择来过滤，以从根本上改善我们收到的结果。

所以为了应用一些过滤，我们需要写一些负责应用这些过滤的方法。

但是对于那些在预订类中的人来说，可能会导致我们在一个类中有太多方法的情况。

所以这就是为什么我们基本上会提出一个新的 Python 文件，它将包括一些关于过滤的方法，一旦我们的机器人到达结果页面，所以如果我们现在回到我们的 Python，那么我们实际上可以按照下面的方式设计我们的项目。

让我打开 booking.pi。

我们可以到这里，我们可以说，应用过滤。

这种过滤应该是过滤。

这一个将会实例化另一个类的实例，可以命名为类似于预订过滤之类的东西。

然后在这堂课中，我们基本上可以包括一些方法，这些方法将负责真正地前进，并且应用那些带有 scillonian 的过滤。

司机。

所以让我们开始着手这样的设计吧。

因此，我可以转到这里，我可以说，新文件，我可以将此预订命名为下划线过滤。

然后在里面，我可以写一个注释，这些页面的目的是什么。

因此，这将是这个文件将包括一个类与实例方法，将负责与我们的网站互动。

在我们得到一些结果后，进行过滤，这样我们就能真正理解这个页面是关于什么的。

在那之后，我们基本上可以往下走，我们可以说是班级预订过滤。

这个类不会继承任何东西。

所以我们可以直接进入构造函数。

实际上，构造函数需要接收一个参数。

这个参数实际上就是我们要在他的参数中传递的驱动程序，因为我们还需要这个类来使用 WebDriver。

所以如果我去 booking.pi，那么我们可以看到，通过写方法的过程，我们是如何在 self 对象上写的。

因此，我们需要以某种方式将 self 对象传递给这个预订过滤的实例化实例。

因此，这在未来看起来就像是“对手等于自己”。

因此，这就是为什么我们应该去我们的预订点过滤，并基本上收到这里的驱动程序作为一个参数。

所以在我们继续处理这个文件之前，让我快速地修改一下另一个文件中的箭头。

所以我会在这里忽略箭头。

我会去订票。

我会从这个文件开始。

我会说从预订，点预订过滤，进口看起来像过滤。

我会跳到这里，多一行。

我会从这里下去。

我会说，过滤，诸如此类。

我将基本上实例化预订过滤类。

我发现我也想念这里的茶。

很抱歉。

然后，我们基本上可以决定，在这个方法中，我们想要应用什么样的过滤。

所以这实际上是一个设计我们程序的好方法。

因为一旦我们的类中有太多的方法，那么从长远来看，我们可能很难维护我们的代码。

这就是为什么用下面的方式设计过滤是一个好主意。

好了，现在我们已经了解了如何构建预订过滤，接下来让我们看看我们可以通过结果过滤的一些好的候选者。

您可以看到，我们基本上可以对结果进行一些星级评定。

因此，这将是我们要在预订过滤文件中编写的第一个方法。

现在我们可以看到，这里有一整个框，它负责将所有这些复选框返回给我们。

因此，我想首先处理该元素，因为您可以看到在该页面中我们有更多的复选框。

我不想把这五颗星和那颗混淆，因为同样的复选框也出现在流行的过滤器中。

这就是为什么首先拿起我们的板子，确定负责显示整个区域的元素是一个更好的主意。

因此，我将尝试在这里单击“Inspect”。

我们要做两次。

您可以看到，我们有这个过滤器类别标题。

所以它的父元素可能就是负责显示所有复选框的元素。

如果我们将鼠标移到这里的父元素，那么您可以看到这就是框，因为它的类名中也有 filter box，并且它还有一个 ID，表示这个 coral 类上的 filter。

这是完美的，因为我们可以尝试使用我们的板来选择这个 ID 的元素。

然后，我们将做一些非常特殊的事情，负责显示这个 div 元素的所有子元素。

所以让我们继续努力吧。

所以我要把这个声明复制到这里。

我要回到我们的圆周率魅力。

您可以看到我在预订过滤文件中。

因此，首先，我们应该将 driver 分配给这个预订过滤类的 self 对象。

因此，它将是自我点驱动程序等于驱动程序。

如果你还记得的话，它总是从预订类本身接收原始驱动程序。

这就是为什么我在这里做这个小把戏。

我基本上可以在这里启动一个类似飞星评级的方法。

这将接收 self 作为参数。

现在我可以使用像 self dot driver 这样的东西，通过 ID 查找元素。

ID 应该是 filter 下划线类，因为这是想要过滤的元素的 ID，注意我们没有自动完成。

这很烦人，因为在非常大的库中，比如 selenium，我们可能总是喜欢让不同的方法自动完成，基本上使我们的生活更容易。

自动补全不起作用的原因是因为这个参数没有特定的类型。

现在 Python 里其实有个东西叫类型化。

所以我们可以真正决定参数类型来处理自动完成。

现在给你们看一个例子，类型是如何工作的，然后我会用一个更熟悉的，我们通常使用的变量类型来解释，叫做列表。

假设这个类实际上会收到一个，和我的列表一样的列表，我们总是在这里传递一个列表。

但如果我们到这里，说我的列表，那么我们将不会有自动完成的方法，如追加，删除，和与列表非常相关的东西。

再说一遍，这是因为这个参数不知道它在打字。

所以我们实际上可以通过输入导入列表。

我们可以到这里，我们可以说这是一个列表。

现在，如果我说，点，那么你可以看到，我有列表方法的自动完成。

同样的方法也适用于 selenium 的驱动实例，我们基本上可以导入一个库来决定这个驱动类型。

这将变得非常简单，就像从 Selenium . web driver . dot remote . dot web driver import web driver 那样。

让我去掉这些例子，因为我们真的不打算接受 list 作为参数。

这只是一个例子。

然后我会在这里说，调用 web 驱动程序。

一旦我们设置了这个驱动程序参数的类型，那么我们总是会有 self . dot 对手点，你可以看到我们有那些自动完成，因为现在 self . dot 驱动程序对象知道它的类型。

这就是为什么这非常有用。

现在我们可以把它赋给一个变量，这样我们就可以把它命名为类似星形过滤盒的东西。

然后我们可以利用这一点。

现在下一步应该是如何识别我们选择的某个元素的子元素。

这是我们可以通过使用 CSS 选择器来实现的。

所以让我告诉你这是怎么做到的。

所以星子元素，这是我要命名的变量。

现在我将使用 self 点驱动程序。

我将使用 find 元素而不是 not 元素。

所以我知道这是我们第一次使用一个以上的元素作为方法。

但实际上，在一个网站中还可以找到不止一个元素。

所以我要用 CSS 选择器查找元素。

实际上有一个惯例，找到一个给定元素的所有子元素，基本上就是在字符串中使用星号。

现在我想让你们看一看，想想这个说法有什么问题。

所以我们继续，说自己是竞争对手，我们推出。

最重要的是，这些发现 ICS 证书或方法的限制。

所以这将最终为我们提供整个网页的所有元素。

这是错误的，因为我们只需要 star filtering box 元素的元素，我指的是它的所有子元素。

因此，我们实际上可以做的是，我们可以删除这个自我点驱动程序，我们可以用星形过滤盒来代替它。

然后这条线将负责给我们所有属于那个星形过滤盒元素的元素。

所以现在，我们可以继续，使用类似 print when star 子元素这样的东西，来真正看到我们在这个变量中存储了一些元素。

我们可以去订票。

我们还可以在这里使用类似过滤点应用星级的东西。

如果你还记得的话，我们没有在我们的主文件 run.pi 中使用这个方法。

所以我要去这里，我将总是执行什么点应用过滤。

我们想离开这里，这个方法总是被执行。

然后我们将定制在 booking.py 文件中的 apply filtrations 方法中要执行的方法。

现在让我们执行整个项目。

所以我要运行这个派，看看会发生什么。

过一会儿，我还会在我们的控制台中向您展示结果，因为我们正在打印一些东西。

所以我们等着瞧吧。

好的，如果我们回到这里，你可以看到我们最终得到的结果。

现在，在这些元素中，我们寻找我们需要的五个复选框。

现在，如果我们回到 Chrome 浏览器，我实际上已经设置了我们需要的确切元素。

因此，我们可以看到，我在这里展开了这个过滤器类元素。

如果我们再往下看一点，如果我们转到像这样的区域，那么在这里，您可以看到它更侧重于复选框。

在那里面，我们有所有的八个标签。

这八个标签是我们应该点击的。

你可以看到这八个标签中的每一个都有更多的子类，我知道它有一个很长的结构。

你可以看到在最后，其中一个子元素的 innerHTML 是一个星号。

所以我们实际上可以做的是，我们可以尝试迭代这些元素，我们可以查找那些有一个，两个，三个，四个或五个子串的元素。

这是所有其他恒星的相同结构。

因此，如果我们展开两个星元素，我们可以看到它在 innerHTML 的末尾有两个星的值。

所以这些是我们点击的元素。

所以这就是我们能走到这里的原因。

我们基本上可以打开外观过滤。

我们可以通过遍历每一个元素来处理这些子元素。

所以我们可以在星子元素里说四个星元素。

我们可以使用类似于星号下划线元素得到下划线属性的东西。

我们应该接收真正负责显示内部文本的属性。

所以应该是那样的内部 HTML。

所以这是一个惯例，去寻找那些 HTML 标签里面的值。

例如，如果我们有一个看起来像这样的标签，我们有一些价值，如健身房，那么如果我们想获得健身房的价值，只有，然后你显示发射预留属性奖章。

这就是我们在这里使用这个表达式的原因。

我们想看看这个表达式是否等于一颗星，对，这就是我们要找的。

当然，我不会硬编码进去。

除此之外，我们还会收到类似于 Star value 的东西。

我们想把它变成一个格式化的字符串。

我们想像那样改变这个工具存储值。

如果这个表达式是真的，那么我们想做点什么。

在我进入 if 语句之前。

让我在这里快速地写。

首先，为了更加安全，我们想将整个表达式转换成一个字符串。

所以我就这么做，用 str 方法包装所有的表达式。

我还将推出一种方法，你们之前可能见过，叫做 strip。

现在，这个条带是一个负责清理所有空白的方法，因为当我们想要查看内部 HTML 文件的值时，可能会有一些空白。

这基本上是负责清理所有这些。

好，现在我可以进入我们的 if 条件，我基本上可以说，星元素，点点击。

我现在能这么做的原因，是因为我们要对元素进行迭代。

如果我们有一个吃 innerHTML 的元素实际上是星值星，那么我们可能要点击它。

所以让我们来测试一下。

所以我现在要运行我们的运行机器人。

但在我们这样做之前，我们应该去预订点 p y，因为这是我们使用申请星级的地方。

我们应该传入一些星值。

因此，让我们继续尝试点击五颗星。

所以我要在这里传递，让我们做这些关键字，这样我们才能真正理解这是关于什么的。

现在我们可以再次发射我们的机器人了。

所以让我们开始吧。

让我们看看会发生什么。

所以我们像往常一样搜索一些结果。

然后它应该继续尝试点击五颗星。

如果我们真的往下走，你可以看到它点击了这里。

所以这是完美的。

你可以看到这个也被激活了。

这很好，因为我们能够真正实现我们的目标。

好了，现在我们明白了这一点，那么在未来，我们还会在这个方法中增加一个。

因为有时搜索四星或以上，或三星或以上或类似的结果是现实的。

这就是为什么我们应该以某种方式接收参数，不仅仅是一个存储值，而是可能接收多个存储值。

我们可以做到这一点的方法是把存储值变成任意参数。

这是一种方法，我们可以把很多参数传递给一个参数，基本上就是在参数名前加一个星号。

如果你不知道这有什么用，我有一个视频，解释在参数旁边加一个星号和加两个星号的区别。

这在器官中很常见。

或者也许你以前见过双星号键 w 武器。

如果你不知道这些是什么，那么我有一个视频来解释建议视频中的区别。

所以一定要考虑看看那个。

好吧。

既然我已经把它改成了任意参数，那么让我把它改成存储值，因为它是这种变量更友好的名字。

我可以在存储值中使用类似于存储值的语句。

我可以把这个区域的全部代码，插入到一个新的 for 循环中。

所以大概是这样。

既然我们已经完成了，那么让我们通过传入多个样式值来测试一下。

我们要做的事情就像去 booking.py 一样简单。

除了传入一个值，让我们试着传入三个，四个，还有五个。

所以我们应该看到他们的星级是三星级以上的结果。

所以如果我们现在运行程序，等几秒钟，让我们看看会发生什么。

所以像往常一样，我们在搜索结果中看到有规律的行为。

好的，如果我们看一下这里，您会看到我们已经激活了这些星级评定。

如果我们真的看一下您的“filters”框，在那里，您还可以看到它已被成功激活。

因此，我们在 booking.com 网站的星级评定方面做得非常好。

我们可以从这里继续。

好的，所以你肯定能理解，在你进入结果页面之后，你可以应用的过滤是没有限制的。

因此，为了本教程的目的，我将再添加一个方法，我个人认为这非常有用。

我认为，如果我们可以选择让我们的主板点击从最低价格到最高价格的排序选项，那么它将非常非常有用。

因此，如果我们看一看结果页面，那么您实际上可以看到，在顶部我们有一些更多的过滤，或者基本上只是一些更多的实用程序，可以帮助我们定制我们的结果，无论您是否可以看到我们有先单击价格最低的选项。

所以我们想自动点击它。

我将单击“Inspect”。

您可以看到，这只是一个只有这个属性的按钮，我们必须找到它才能单击它。

那就是这个数据 ID 等于价格。

所以我们可以抓住这个键值属性，找到 CSS 选择器，然后点击它。

因此，我们可以回到我们的馅饼魅力，基本上是我们的预订过滤文件。

我们可以在这里再设计一个方法，我们可以先把这个卖出价格命名为 lowers。

这只是试图找到一个元素。

所以我们可以称它为元素。

这将等于自己的点驱动程序，通过 CSS 选择器点查找元素，这将是一个。

而这将正好接收李因为这是素管。

我们会打开我们的方括号。

我们会说数据 ID 实际上等于我复制了这个语句。

所以请原谅我。

我可以粘贴数据 ID 等于价格，确保在价格中使用双引号。

然后在下面，我可以说元素认为点击将是它。

如果你还记得，这只是我们写方法的那一页，但是我们实际上并没有在调用它们的地方调用它们，在应用过滤的 spoking . p . y 文件里面。

因此，在我们应用一些存储工具后，我们也可以出售我们的结果。

因此，我们可以说过滤，但首先销售价格最低，这不会接收任何参数。

所以我们不会传递任何参数。

现在让我们来测试一下这个程序。

让我测试一下我们的程序，等等，只用四到五颗星。

好的，如果我们运行这个，然后等一会儿，让我们看看会发生什么。

好的，所以你可以看到我们也激活了价格最低的第一个按钮，因为你真的可以看到我们现在在第一页有一些更便宜的结果。

如果我们看一下我们的过滤，您会看到我们有四颗星和五颗星。

因此，我认为这将是非常足够的过滤，你可以申请。

如果你想基本上看到有用的结果。

当然，你还可以应用更多的东西来收到更好的效果。

如你所见，这种技术非常类似于在 Selenium 库中用不同的方法寻找元素。

好了，这一集我们要做的第一件事是支持运行这个项目，不总是从 ID，因为在某些情况下，你只想执行机器人做它的动作，并收到一些结果。

对于这样的操作，您可能不总是想在特定的 IV 中打开它。

除此之外，有时从命令行执行机器人只是比去 pi charm 和基本上指向你的项目更舒服。

然后使用 shift fn 的快捷键来执行你的项目，有时候是唯一一个从终端执行 Python，然后引用文件，在我们的例子中是 run.pi。

我不想骗你，但是我们的项目目前不支持这种行为。

因为在 booking.py 文件中有这样一行代码，它将把我们的驱动程序路径的位置添加到 path 环境变量中。

现在从 Python 中执行这样一行代码就可以了，因为 Python 知道如何获取这一行代码并将其附加到 Python 进程中，然后真正地将这个位置添加到 path 系统变量中。

但是当涉及到我们想要从它们执行项目的其他进程时，例如，Windows 中的公共线路接口，那么我们将会遇到一些麻烦，因为我们需要在执行项目之前添加我们的 Selenium 驱动程序的位置。

因此，从终端层面处理这个问题将会很棘手。

实际上，我将向您证明，如果我们试图从终端运行 run.py 文件，我们的项目将无法成功执行。

如果你还记得，在这个目录中，我们有这个文件，我们希望执行它。

如果我说 Python，运行 dot p y，那么你可以看到它抱怨 chromedriver 可执行文件需要在 path 中。

所以我要解决这个问题。

因此，您将能够从您的终端执行这个项目。

不管你是在 Linux 环境下工作还是在 Windows 环境下工作。

好了，我们要解决这个问题的方法是使用 try 和 accept 块。

我们可以试着执行这些代码行。

如果我们会有一些错误，那么我们总是可以告诉我们的用户，用户需要从命令行执行一些行，将这个 C Selenium 对手文件夹添加到 path 系统变量。

所以让我们继续尝试设计它。

所以我要把所有的代码都放在这里，我要缩进所有的代码。

我将用 try 块来结束它。

现在，在这之后，我们可以到这里，我们可以说，接受任何异常。

我们可以在一个变量中抓取异常，比如 E。

作为一个初学者，我们可以说像打印，有一个问题或从命令行界面运行这个程序。

所以这只是在 except 块中处理事情的一个很好的开始，当然，将来还会有更多的添加。

我将返回我们的终端，运行相同的命令。

所以它将会是 python run.pi。

你可以看到，现在我们自动看到这一点，从命令行界面运行这个程序有一个问题，因为我们能够点击 except 块，因为我们确实有一些异常。

但在其他一些情况下，我们也可能会直接在我们的机器人中遇到一些问题。

现在，并不是世界上所有的例外都是关于 chrome 驱动程序如何不在路径内。

这就是为什么对于程序中将要发生的所有异常，输出这样的东西是非常危险的。

因此，这就是为什么我们需要验证我们真的击中这个消息说，chromedriver 可执行文件需要在路径中。

这就是为什么我们可以回到 Python。

我们可以验证消息确实是关于系统路径中为什么没有文件夹。

所以我们可以说如果 str E。

这是一种缓存异常消息的方式。

我们可以返回 terminal，检查这个特定异常的子字符串。

因此，如果我们要检查这个 in 路径是否是异常消息中的子串，那么它实际上意味着问题在于 chrome 驱动程序可执行文件需要如何被削弱。

所以我要回到圆周率魅力。

我要说的是，如果在异常消息中，这样的字符串有缺陷，那么我们就可以打印这条消息。

但是，如果我们有其他问题，比如说我们对 selenium 有问题，比如说我们有语法问题，那么我们想提出最初的问题。

这可以通过简单地说“其他”来实现。

基本上就是用这样的关键词或短语。

现在，当你像这样做的时候，一旦我们没有碰到那个特定的问题，我们就真的抛出了最初的异常。

所以这是处理异常的好方法。

所以现在我们可以验证这是可行的。

所以我们可以回到我们的终点站。

我们可以清理一下屏幕。

我们也可以说，python run.pi。

你可以看到我们又收到了这条信息。

这意味着我们的 if 条件非常有效。

现在说实话，我打算把这条信息改得更友好一些。

因此，用户可以理解需要执行什么命令来将 chrome 驱动程序的位置添加到 path 系统环境变量中。

所以我要拿一段我准备好的代码作为打印信息。

我要把同样的东西粘贴到这里。

显然，你可以在我们整个系列的第八集中从我的网站上找到这个。

所以你可以看到，这里我有一个很好的错误信息，说你正试图从命令行运行机器人。

而反斜杠 n 只是一个转义字符，用来跳转到下一行。

所以在下一行，我们说请添加 Selenium 驱动程序的路径，对于 Windows 使用这个命令。

我知道这看起来有点复杂。

但这实际上是一个内置的 Windows 命令，我们可以执行它来添加更多的位置到我们已经存在的 pad 系统中。

正如我在第一集中所说的，我们的 path 环境变量已经有了大约 50 个甚至 100 个位置值。

这就是为什么我们使用 set path 并添加原始路径。

此外，这就是为什么我们有分号，我们添加我们的路径，这将是 C Selenium drivers 或任何你设置 chromedriver 窗口的文件夹，如果你使用 Linux，那么你应该执行这一行，看起来非常相似。

只有 windows 包含 set 命令。

好了，现在我们可以去我们的终端了。

再次，运行这个命令，现在您可以看到我们有一个非常友好的消息。

因此，我现在唯一要做的就是抓取并粘贴它，然后真正定制我们应该拥有的路径。

此处补充。

因此，它将再次成为 Selenium 的竞争对手。

我不确定是否需要在末尾加一个反斜杠。

所以我两个都要试试。

我建议你两样都试试。

让我们尝试一下，然后运行 Python run.pi。

你可以看到我又一次收到了这条信息。

让我清理一下屏幕，运行同样的命令，并在末尾加上一个反斜杠。

再次执行 python run.pi。

现在你可以看到我们的机器人工作了。

您可以看到，一切都很正常，您将看到我们能够搜索结果，您可以看到我们能够过滤并应用排序。

所以这意味着它工作得很完美。

如果我们看一下我们的终端，您可以看到我们确实收到了一些警告，我们很快就会修复这些警告。

但是从大的方面来看，如果我们甚至从终端执行它，我们的板功能是完美的。

好了，现在你可能会注意到一些奇怪的关于他们退出的警告，用一些端口监听我们的本地主机，等等。

所以这实际上是我们以前没有看到的。

但实际上，当我们使用 chrome 这样的浏览器时，在我们的情况下，这是 Chrome 驱动程序，那么 Chrome 现在内置了一些开发工具。

这是一套直接内置在谷歌 Chrome 浏览器中的网络开发工具。

我认为，当它意识到我们执行一些自动化的 Chrome 浏览器来运行一些测试用例，或者基本上自动化网站时，它就已经执行了那个实用程序。

现在，在本教程中，我不打算过多地介绍他们的工具。

这就是为什么我们可以允许自己忽略这些错误。

为了忽略这一阶段的错误，我们需要返回到 booking.py 文件，并在 WebDriver 实例中添加一些额外的配置。

所以这就像回到 pi charm 一样简单，在这个文件中添加一些行。

如果你还记得，我们有一行写着 super，它真正负责实例化一个继承类的实例，以及我们正在编写的类。

这就是为什么我们需要定制这一行，因为我们需要传递一些额外的选项给我们继承的类。

所以这将是类似的事情。

所以我们要说选项等于网络驱动点铬选项。

你可以看到它只是一个内置的类，我实例化了它。

然后我可以说一些选项，加上实验选项。

我将在这里写一些字符串，负责忽略这类错误。

我不想撒谎，我搜索了很多关于这个开发工具。

为什么我们会看到这些警告？

所以我最后从堆栈溢出轮询中抓取了这段代码，我将在描述中添加它。

所以你可以更深入地了解那里正在进行的讨论。

好的，所以它将排除这样的开关，注意开关是大写的 s。

然后，我将在这里传入一个额外的值，它将在列表中与一个元素一起被接受，它将启用破折号日志记录，就像这样。

一旦我做到了这一点，然后我们需要抓住选项，这相当于一个 Chrome 选项的实例。

我们需要在初始化行中传递这个。

所以期权等于这样的期权。

完成此操作后，让我们测试一下是否还能看到这些日志。

所以我要打开我们的终端。

我要再说一遍，python run.pi。

我会让我们的机器人在后台运行。

让我们看看终端是怎么回事。

您可以看到，由于我们忽略了这些类型的日志，我们实际上什么也看不到。

你可以看到我们的机器人完成了它的工作。

这是完美的，因为我们可以在这个 Chrome 浏览器页面上看到结果。

这是我们可以忽略这类误差的一种方法。

我们可以从这里继续。

好了，既然我们已经搞清楚了这一点，那么在这个阶段我们还需要测试一件事情。

现在，我们想测试我们是否真的会看到最初的异常，即使我们遇到了一个与 chrome 驱动程序无关的异常。

所以这就是为什么让我们在项目中故意做错事。

所以我要去我们的圆周率魅力，我要说听到 a 等于 2 除以 0，就像这样。

甚至在开发板启动之前，我们就应该收到基本为零的除法误差。

所以这就是为什么我们现在应该回到我们的桌子上。

让我们清理屏幕，并尝试再次执行我们的机器人，看看结果。

好的，我们可以看到，我们现在看到了最初的异常，它告诉我们零除法误差，因为我们实际上是试图将一个数除以零。

所以我们会有一些箭头，你可以看到我们的奖励甚至没有开始执行代码行，因为我们有一些早期的异常。

所以这是完美的。

而这是对这个板子项目未来的一个很好的准备。

我们现在可以继续扩展我们的应用程序，甚至可以用一个终端来测试。

现在，我真的希望能够从终端执行这个项目的主要原因是，如果你还记得电路板的预览，那么我们喜欢以一种很好的方式来可视化交易的结果。

因此，用户可以真正深刻地看到最佳交易的结果。

我们可能想避免用圆周率符咒来做这件事。

我们可能想用终端形象化它。

这就是为什么我希望能够从任何终端执行该板，即使是 Windows 环境，甚至是 Linux 环境。

好了，让我们看看下一个我们应该识别的元素，以便开始向使用这个机器人的用户报告结果。

正如所料，我现在将从终端运行这个项目。

我将利用我们在印刷生产线上提出的建议。

因此，我们确实可以将 drivers 文件夹放在 patch 系统环境变量下。

所以我要执行这几行。

你可以注意到，我用原来的路径替换了这条路径。

所以我要运行它。

紧接着，我会像上一集一样说 Python run.pi。

现在，提醒一下，如果你们还记得，我在上一节课的最后故意展示了一些异常，我已经删除了，那是一个零除法误差。

所以确保你已经删除了这个。

然后我可以回到我们的浏览器。

你可以看到我们得到了预期的结果，过滤和排序都非常好。

好了，现在我们应该看看那个负责显示所有结果的大元素。

现在我要诚实地告诉你，我不会展示你是如何看到所有 170 个结果的。

但是为了本教程的目的，我们将只寻找第一页。

因此，这意味着我们应该确定一个有 25 个子元素的元素，负责显示所有那些显示交易价格、酒店名称和星级等内容的框。

好吧，那我们开始吧。

现在，我们的目标是首先找到负责显示所有 25 个框的父元素，每个框都负责显示酒店的名称和星级等内容。

首先，让我试着找到几乎覆盖整个盒子的元素。

所以我向上滚动到第一个结果。

让我们点击这里检查。

我会这样做两次。

请原谅。

如你所见，这是第一个盒子的标题。

如果我向上滚动一点，在这里，例如，我们只看到没有图像的部分，这也不是我们想要的，我们想要整个盒子。

如你所见，这个负责显示整个盒子。

如果我将这个元素最小化，你可以看到，如果我将鼠标移到第二个，你可以看到第二个框被蓝色背景覆盖。

这意味着这些 div 标签可能有数据分数，或者数据或尾 ID，负责显示每个框。

您还可以看到，所有这些元素的父元素都是一个 div 标记，其 ID 为 alternate list Enter。

现在，在我们开始用 Python 编写这个之前，让我向您展示一些您可以在网页的 JavaScript 端完成的技巧。

现在不要害怕 JavaScript，我知道这是一种编程语言，你很有可能没有练习过。

但是我将简短地介绍一下我在开发这个项目时是如何识别所有这 25 个盒子的。

让我们转到控制台，理事会实际上是一个您可以执行纯 JavaScript 代码的区域，它将负责识别我们寻找的每一个元素。

因此，如果我们去控制台和方式，忽略这里发生了什么。

让我放大一点。

所以你可以看到一切。

我首先要清理这里的一切。

所以很明显。

然后这是一种金属，我们应该执行。

就像这样，然后你就有了一个干净的控制台。

现在，为了获取负责显示该页面的所有元素，我们可以使用内置的文档语句。

这又是来自 JavaScript。

所以不要和 Python 混淆。

但我只想简单介绍一下我是如何确定我需要的元素的。

所以你可以执行一个非常类似于 selenium 的方法，现在它被称为通过 ID 获取元素。

现在注意 E，B 和 AI 都是大写的。

然后我会在这里说，或者失败列表下划线内部。

如果你记得，这是负责显示所有结果的 ID。

我要把这个表达式赋给一个变量，我们可以把它命名为旅馆列表，它等于这个表达式。

您可以看到，一旦我单击 Enter，就会返回负责显示所有这些框的元素。

现在，我将再次清空屏幕，使用酒店列表库。

我指的是变量。

然后在此之上，我将通过类名执行 get 元素。

所以 II，B，C，n 大写。

我将在这里找到对于每个盒子都是唯一的类名。

所以我实际上找到了这个 ASR 下划线属性，每个框中的行走字符串都是唯一的。

现在，你可以看到，即使在我执行这个之前，它也会负责任地返回给我 25 个元素。

这意味着什么呢？这意味着现在我们可以控制所有的 25 种元素。

所以如果我按 Enter 键，你会看到我们有一个 25 个元素的结果。

所以，这也是我们在 Selenium 端需要做的，我们应该首先找到具有替换列表 inner ID 的父元素。

最重要的是，我们应该继续执行，通过类名找到元素，我们应该传入这个值。

因此，让我们将我们在这里所做的事情转化为 Python。

我认为，我在 JavaScript 方面向您展示这一点的事实只是又一个对您有用的实用工具。

好的，我们在 booking.pi 文件中的 pi charm 里面。

我要在这里再输入一个方法，我们可以称之为报告结果。

然后在这个方法中，我们要说 self dot find 元素 by ID，它要接收分数上的酒店列表，输入。

然后在此之上，我们将通过类名执行点查找元素。

让我们实际上分裂线，这样我们可以有一个更干净的外观。

所以我要在这里做。

这个 by 类名将作为参数接收 ASR 下划线属性下划线块。

我需要把这个表达式赋值给一些变量。

所以我们可以把它命名为 artell 下划线框，这个和那个相等。

实际上，让我们先测试一下这是否可行。

所以我只说返回或其他箱子，然后去我们的 run.pi。

而我要说的是打印 bot dot 报告结果的长度。

因为如果你记得的话，这是返回一个列表。

我们只希望看到这个列表的长度。

当然，这会返回 25 美元。

如果是的话，这意味着我们准备好继续采取进一步的行动。

所以我要去我们的终端。

我将再次执行 Python run dot p y。

让我们等待结果。

好了，过滤已经被应用了。

现在，如果我去终端，在那里，你可以看到我们收到 25 回。

这意味着我们在接收所有负责显示交易数据的盒子方面做得很好。

好了，现在我们已经控制了每一个盒子，那么我们应该设法提取我们需要的特定数据。

显然我们想从细节名称开始。

因此，我们应该找到一种模式来获得所有 25 个交易的标题。

让我们试着找到这些。

因此，我将打开我们最新的浏览器，看看这里发生了什么。

让我们转到第一个框，尝试单击“Inspect ”,如果您还记得的话，这是在我们找到的元素下。

这意味着我们可以迭代 25 个盒子中的每一个。

我们可以尝试通过类名找到一个元素，这个类名等于 ASR 破折号 hotel，下划线下划线 name。

所以我要记住这一点，并开始着手做这件事。

现在，我想开始创建一个新文件，因为我们希望将报告放在一个分隔符中，Python 文件基本上可以更好地组织项目。

所以我要去订票目录。

我将创建一个文件，我们可以将它命名为预订下划线报告。

让我们先记录下这个文件是关于什么的。

所以这个文件将会放在 clewd 中，这些方法将会解析我们需要的来自每个小牛肉盒子的特定数据。

所以这个解释很有道理。

好吧。

所以在这里，我们将有一个类，它将负责一些方法，开始在一个漂亮的表格中显示我们需要的数据。

所以我要从班级预约报告说起。

这不会继承任何东西。

所以我们准备直接在构造函数中接收一些东西。

现在最有意义的可能是接收一个参数，即负责显示所有交易框的父元素。

所以我将接收一个类似于 boxes section 元素的参数。

然后我在这里说，self 点体素截面元素等于那个。

然后我们要实例化这个的一个实例，我们要传入一个药丸列表 ID 的元素，输入。

所以让我们继续努力。

我将转到这里，我将基本上转到顶部，我将使用从预订点预订报告、导入预订报告。

我将往下走，我将说报告等于预订报告，我将在酒店框中传递。

所以请原谅我先举例说明这个，这是错的。

所以我要解决这个问题。

我将移动它，实际上用 return 替换它，因为我们现在真的不想让它返回任何东西。

所以我要在这里实例化它。

然后我会像那样穿过酒店的包厢。

现在，我实际上想在预订报告端按类名执行这些 find 元素。

所以我将从这里开始剪切，只传入具有特定 ID 的元素。

现在让我把这条空行从这里移走。

我想就这样了。

所以后来，我们基本上可以从预订报告类中执行一些方法，比如我不知道，显示表，诸如此类的东西，我知道这种金属不存在，但我只是假设我们项目的未来。

所以让我删除它。

实际上，应该还有一个我们应该删除的区域。

这个应该是这个。

因此，让我们也从这里删除执行，并继续设计。

好了，现在我在 booking.py 文件中。

我会让这里的一切保持原样。

我会继续写工作报告。

好了，现在我们在这个 box section 元素中有了一个 HTML 元素，然后我们应该在它上面执行按类名查找元素。

所以我们会把这 25 个元素都拿回来。

因此，我将只输入一个金属，它将显示“拉动交易箱”,这将接收 self 作为参数。

我要说 self，不好意思，这应该是 self 点盒，section 元素，dot find 元素，通过类名，这将有参数作为 ASR 属性块。

再一次，这将拉动所有的 25 个元素。

我现在想做的是在我们的 init 方法中实例化另一个 list。

我要说的是，回到这里的所有表达式，我要说的是，在 init 方法中，self dot deal boxes 等于 pull self dot pull box，然后我们就可以控制这个名称下的所有元素，这更有意义。

我很抱歉，在找到元素之后，我错过了 s。

因此，很明显，它们应该是通过类名查找元素，因为我们希望提取所有与这个类名匹配的元素。

好吧。

既然我们已经完成了，那么你可能已经注意到我们没有任何关于通过类名查找元素的自动完成功能。

这是因为我们没有为 box section 元素输入类型。

我们已经从第七集开始熟悉这些了。

现在，这将是一个非常类似于我们之前在系列中看到的操作，它只是导入 web 元素类的类型，然后基本上使用这个特定的类型。

所以我在这里说，从 Selenium dot WebDriver dot remote，那个 web 元素，像那样导入 web 元素。

然后我要说的是，这些 boxes section 元素将会是类似 web 的元素。

然后我们将开始像预期的那样自动完成。

好了，现在我们已经完成了这项工作，接下来让我们开始从每个盒子中提取我们真正需要的数据。

作为一个很好的开端，我们想首先投票选出每个箱子的酒店名称。

如果你还记得的话，我说过我们有一个特定的消费标签，它有一个独特的类名，表示我们的酒店下划线名称。

所以我要找到所有有这个类名的元素。

所以这将回到 pi 的魅力，并说一些像他们的全名。

所以再一次，在这里接收 self 作为参数。

然后我将基本上迭代每个盒子。

因此，它将成为自助网点交易箱中的交易箱。

我会说“deal box dot find element by class name ”,我们将粘贴我们要查找的值或类，即 ASR 破折号或下划线，下划线名称。

然后我们想对这个元素做的基本上是提取它的内部 HTML，因为如果你已经注意到了，这个元素在它的内部 HTML 里面有 alltel 的名字，你真的可以从这里看到。

所以它就像对那个表达式说一样简单，就像那样。

首先让我把它分成多行。

然后我可以说在. get 属性之上。

我们希望收到该元素的内部 HTML。

如果你还记得，当我使用 get 属性 innerHTML 时，我也执行了一些 metal，它将负责删除所有的空格。

如果你记得的话，是像这样的点带。

就是这样，整个表达式应该真正显示酒店的名称。

首先让我把这个表达式赋给一个变量，比如酒店名称，或者交易名称并不重要。

然后我们基本上可以尝试使用这里，打印酒店名称，看看是否可行。

如果你还记得的话，拉标题在任何地方都不会被调用。

所以我要去上班了。

我将启动我们需要在此报告结果方法中报告结果的方法。

因此它将被报告点满标题。

现在让我们看看 run.py 文件中发生了什么。

如果您还记得，我们删除了报告结果部分。

因此，在这种情况下，它将是报告结果。

我会让这里的一切保持原样。

现在我们的病房应该负责显示所有酒店的名称。

因此，如果我们去我们的终端，再说一遍，Python run.pi，然后让我们看看结果。

正如所料，我们改变货币，我们添加纽约和一个成人，我们应用过滤。

我们看到了价格。

现在让我们看看终端里有什么。

你可以看到我们真的有所有酒店的名字，我们真的有我们需要的一切。

我们真的有 25 家酒店，让我们看看排序是否符合我们的惯例。

所以第一家酒店应该在纽约时代广场。

如果我们到这里，你可以看到它并不完全匹配。

我知道其中的原因，因为有时在收到这些结果后，您可能需要刷新。

我们可能不想太快地对每个标题进行轮询。

他们记得这是一种变通方法。

这是我在开发这个项目时应用的。

因此，在提取结果之前，我要做的是触发页面刷新。

因此，电路板将有一两秒钟的时间来正确获取数据。

所以我要去 Python。

我要在这里说，机器人点刷新。

这种变通方法应该可以解决问题。

所以我要在这里说，一个工作周围板我们的机器人适当地抓取数据。

现在，让我再一次尝试执行我们的板，看看它是否会像预期的那样工作。

现在，我认为它发生的原因，是因为我们试图提取数据。

这种控制并没有完成每一项工作。

因此，在我们真正尝试删除所有标题之前，刷新所有内容是有意义的。

所以我们就清理屏幕说 python run.pi 吧。

再等几秒钟。

好的，现在第一家酒店是上诉爱迪生时代广场。

如果我们去我们的终点站，你会看到第一家酒店是爱迪生时代广场酒店。

第二个应该是假日酒店。

第三个应该是保罗时代广场。

让我们来验证一下。

好的，我认为现在结果如预期的那样显示了，这一刷新确实给了我们的板一秒钟来繁殖，并按照我们想要的顺序获取数据。

现在我想在继续本教程之前做一些重要的事情。

这将改变入住日期和退房日期的数量。

这是因为距离我录制这个系列的最后一集已经过去了一两个星期。

所以我只想确保日期与今天的日期相符。

所以这就是为什么我要把日期提前一个月，只改变 05 之外的 206。

好了，现在我们准备继续定制我们需要的数据。

现在，我们说我们想在一个漂亮的表中定制数据，在那里我们将显示酒店的名称和价格，还存储酒店的分数，这意味着评级可能是一个很好的主意。

如果您还记得的话，我们最终在预订报告文件中进行了定制，这份调查的标题是中间的，这份调查实际上是检查每个交易框，并尝试提取一些对我们有用的属性。

因此，我们可以利用迭代每个交易框的优势。

我们实际上可以试着一路拉价格和分数。

这就是为什么我要把打印线从这里移走。

我将注释掉我在每个迭代步骤中所做的事情。

因此，我将在这里发表评论，在奥特尔的名字后面。

稍后，我还会将杆标题更改为更通用的功能，如拉交易框属性等。

现在，我要过去，开始拉低价格。

现在，为了节省时间，我将在这里展示如何找到每个交易箱上的价格。

以及我如何找到每个酒店的分数。

这就是为什么我要直截了当地说，酒店强调价格。

这相当于用下划线框点按类名查找元素。

这里的值将会是，让我们打开字符串。

然后我要说 V UI 破折号价格破折号显示，下划线值。

所以如果我有一个有这个值的类，那就意味着它会给出价格。

所以这就是为什么我可以允许自己这么做。

现在我将使用同样的方法获取 innerHTML 属性。

唯一的空白是，如果我们记得的话，我们在酒店名称中也是这样做的。

因此，我将复制并粘贴这一行和那一行，我的意思是这三行将负责拉动酒店价格。

然后，如果我们到下面，我们也说这里的酒店得分，这将是由交易框，dot get 属性，有一个很大的原因，为什么我用这里的 get 属性，而不是我 dot wait find 元素的东西。

这是因为这个元素已经有了一个看起来像 data dash score 的 HTML 属性。

这意味着，如果我们在这里只取这个属性的值，那么我们将得到作者的分数，10 分。

所以没有尾巴的分数可能是 8.5，9.1，9.5，等等。

既然我已经做了这些，那么我想再一次清理空白。

为了安全起见，我将只发布您的点带，就像我们之前发布价格和酒店名称一样。

好了，现在我们有了每个交易箱的名称、价格和分数，那么让我们先测试一下我们的问题。

现在，我要做一些你可能会觉得奇怪的事情。

但是我马上会解释为什么我要这么做。

为了验证这一点，我将在这里使用一个列表，我想把它命名为 collection。

这将等于一个空列表。

然后，随着我们不断迭代名称、价格和分数，我基本上需要将这些属性添加到这个集合中。

所以我们可以有一个有组织和结构化的数据。

我将在这里使用嵌套列表，集合就是列表。

这将包括多个列表。

每个列表都将包含这三个元素，其中一个是名称，另一个是价格。

第三个是得分。

所以我会在这里使用一些东西，比如 collection，dot append，然后我会添加到那个列表中。

然后我会说酒店名称，alltel 价格，另一个应该是酒店分数。

现在我已经做到了这一点，那么我真的想测试一下，如果我有所有的数据，我想拉从一开始。

所以我要用这里的返回集合。

我将返回到我们的 booking.py 文件。

我要寻找报告结果的方法。

我想这个应该在这里。

然后我将在这里启动我们刚刚完成设计的方法。

这将是拉交易箱的态度。

如果你还记得，我们用返回语句。

所以当我们直接执行这行代码时，我们什么也看不到。

因此，我们需要用内置打印语句来结束这一部分，以便我们能够看到数据。

好了，既然我们已经完成了，那么让我们打开终端测试结果。

所以我要把我们的终端带到这里。

我会说 Python 运行 dot p y，让我们看看是否一切都正常。

现在让我将网络浏览器移到屏幕上。

让我们看看会发生什么。

好吧，那么机器人正在运行。

现在，我们应该在终端的控制台中看到结果。

所以我要把它打开。

让我们缩小一点，以便了解这里发生了什么。

好的，你可以看到我们有一个奇怪的输出。

但是让我来分析一下这里发生了什么。

所以你可以看到第一个和最后一个字符实际上是方括号，因为这是我们现在拥有的数据集合。

你可以看到这包括了第一家，第二家，第三家等等。

现在，我不确定为什么我们会在这里看到一个空字符串。

这可能是因为这个韦伯斯特广场托尼，他们出租没有得分。

这就是为什么它是一个空列表。

你可以看到，随着我的继续，我们在一个更大的列表中有一个列表，每个列表代表一个关于酒店名称、酒店价格以及酒店呼叫的数据集合。

这是一个很好的开始，用我在本系列开始时提到的漂亮的表库来可视化我们的数据。

同样，这个库将帮助我们在一个分为列和行的漂亮表格中可视化数据。

现在，让我们看看我们需要做些什么，以便能够更好地可视化我们的数据。

好的，现在让我们来看看如何可视化我们的数据。

所以我要清理屏幕，我要安装一个叫做漂亮表的库。

所以这将是皮普安装漂亮的表。

现在，对于那些问我为什么不在这里使用可视化环境的人，因为我正在系统解释器上安装一个库，你可以继续这样做。

因为这将帮助你为这个特定的项目建立一个有组织的环境。

我只是不喜欢在几秒钟内经历一些事情，至少如果我的频道上没有完整的教程。

所以这就是为什么我要直接在系统解释器中安装这些包，并且我要在这个项目中依赖它。

但是如果你觉得使用虚拟环境很舒服，那么我真的很欢迎你这样做，因为这是在你的机器上组织你的项目的更好的方式。

好，现在我用这条线。

你可以看到我已经安装了这个，这意味着我们可以使用这个库。

所以现在我要回到我们的圆周率的魅力，看看我们如何称之为工作。

好了，现在我们已经收集了数据，接下来我们要在这里多写几行，基本上是在一个表格中显示这些数据。

所以我要向上滚动。

我将导入漂亮的表库。

但是我将只从这个库中导入一个类。

所以这将是从三维与表，进口免费 t 表如下。

然后我们需要实例化这个类。

所以它会在这里。

所以我会在这里说，类似这样的话。

所以我在这里用的表等于 50 个表，这一个要接受几个参数。

第一个非常重要，那就是字段名。

现在我说，在表中，我们将有列。

在我们的例子中，我们可能想在这里声明，三列。

第一个是名字，然后是价格，最后是分数。

所以我将直接传递一个列表，如下所示。

我将在这里使用 alltel name，然后使用 hotel price。

然后我会像这样使用酒店评分。

同样，这些将被用作列。

让我在这里用一个关键字参数，这样我们就能理解了。

好了，现在我通过了这个参数，那么我们需要继续在我们的表中创建一些行。

所以这将和使用添加行方法一样简单。

然后我们被允许传递一组数据。

猜猜我们要在我几分钟前创建的嵌套列表中传递什么。

这就是为什么在这里，我使用嵌套列表。

所以对我们来说，直接传入这个集合列表对象会更容易。

所以这将使我们的生活变得非常容易。

现在，我们在这个 booking.py 文件中唯一需要做的事情就是在表格中添加下划线。

然后我们基本上可以传递这个函数返回的任何东西。

因此，它将只是复制和粘贴在这里。

然后我会让它保持原样。

实际上我们需要打印表格本身。

所以原谅我之前删了打印行。

现在我们需要打印表格本身，以便真正看到包含列和行的真实表格。

好了，现在我们准备好了，现在让我们回到我们的终端，实际清理屏幕并运行我们的单词。

所以又要用 Python run.pi 了，看看会有什么结果吧。

所以我会把结果显示在这里。

几秒钟后，我们将在背景中看到我们期望看到的表格。

现在，你可以看到我们有一张精心组织的表格，它真正负责显示你从预订网站上读到的关于交易的所有信息。

你可以看到它非常非常有条理。

您可以看到，这是从低到高的排序，因为我们在整个系列中应用了这种过滤。

你可以看到，这样读数据更容易。

您也可以将这个漂亮的表格库用于不同的项目。

当我需要做一些任务时，我真的很喜欢这个库来可视化数据。

我想显示我收到的数据。

通常我使用这个库，因为它能更好地显示数据，而且看起来更舒服。

好了，现在我们已经完成了，那么每次控制我们想要如何执行我们的机器人会更好。

因此，我们可能希望看到未来不同地点的结果。

当然，我们也喜欢改变我们的入住日期和查看我们的日期，这取决于我们想要为某个地点做准备的确切时间。

这就是为什么在代码中维护这些信息可能不是一个好主意。

这就是为什么我们能做的就像我在这个系列最开始展示的那样，这个项目从一开始就是如何开发的，就是把那些硬编码的字符串变成服从输入。

然后我们将有能力向用户询问这些类型的信息。

所以我们可以在这里输入类似的东西，然后我们可以在这里问你想去哪里。

接下来将会发生的是，我在这里传入的字符串，作为输入，会自动传入这个 board 点选要去的地方方法。

因此，这将是有用的，因为现在我们将不必改变代码，每次我们想寻找一个不同的位置来准备我们的假期。

这就是为什么我要用这种方法来计算入住日期和退房日期以及成人人数。

我将让货币保持原样，因为以美元显示价格可能会更好，您可以将其兑换成您想要的任何货币。

但是让我们把它硬编码在这里，只改变那些。

好的，除了在入住日期进行硬编码之外，我还会问你类似这样的问题。

所以我要问，入住日期是哪天？现在我也将复制这个语句，并粘贴到这里。

然后我会问，什么时候退房？我还会问你一些类似的问题，有多少人这样，然后我们就可以开始了。

好，现在我允许自己再次运行，Python，运行 dot p y。

让我们看看会发生什么。

首先我们看到我们的程序，你可以看到，只有在我们选择了货币之后，什么也不会发生，因为我们的程序需要我们的输入。

所以现在它将一次回答每一步。

所以，这将是这样的事情，让我们说，我们现在想去洛杉矶。

所以我要把它放进去，你可以看到，现在它在问我，里面的支票是什么。

现在，如果我打开浏览器，我们可以看到它已经选择了洛杉矶。

这是完美的，这意味着它真的有效。

当我们提供入住和退房日期时，我们应该会看到完全相同的结果。

现在我们应该小心，因为我们想给出正确的格式。

所以这将是一年的破折号，之后就是需求日。

所以我要用这个。

然后我会说退房日期如下。

假设我们想去五天。

然后你会看到它问了多少人。

与此同时，我可以检查这是否可行。

你可以看到它填写了正确的信息。

现在我会提供四个人的例子。

你可以看到我们收到了一个错误。

我相信这是因为我们没有把成年人的数量转换成一个采访。

默认情况下。

所以这是我们犯的一个大错误。

让我们尽快解决这个问题。

所以让我们带上我们的节目，解释一下这里发生了什么。

因此，您可以看到，在选定的成人中，如果我们在这里使用 Ctrl V，您可以看到我们在这里操作一些动作，这些动作需要从这个计数到一次访谈。

你可以从这条线看到，我们用-1。

所以它抱怨字符串不能在这里使用减法。

这就是为什么我们应该继续，并自动将其转换为整数。

所以我将在这里使用一个 int 内置函数，允许我自己再执行一次这个程序。

所以让我们来清理屏幕。

同样，使用 Python 运行 dot p y。

让我们把它最小化，然后提供信息。

所以会是洛杉矶。

然后又是这个日期，然后是那个结账日期，然后我们可以说 for，你可以看到现在我们没有收到任何箭头。

所以我相信几秒钟后，我们会在一个漂亮的表格中看到结果。

你可以清楚地看到，这就是这里正在发生的事情。

实际上我们有一个 10 分的上诉。

洛杉矶告诉美国，这是关于这个大公园的好消息，所以你真的可以看到结果是完美的，一切都运行良好。

事实上，我们使用输入代码确实有助于我们执行这个程序。

每当我们想测试不同地点和不同日期的结果时。

所以我们可以选择下个月、接下来的三周甚至明天。

所以一旦我们运行程序，我们将有这个动态选项来提供信息，我们不需要每次都修改代码。

好的，所以我认为这将是关于设计这个硒项目。

当然，现在总有改进的空间，也可以在这里或那里增加一些功能。

但是我想我已经涵盖了我从一开始就想完成的所有事情。

事实上，我们在控制台上以一种很好的方式显示结果，这取决于我们想去的地方、入住和退房日期以及有多少人提供的信息，所以如果你喜欢这个系列，请务必点击“喜欢”按钮并发表评论。

所以我们真的可以在 YouTube 上把这个视频传播给更多的人。

我会在我未来的视频中看到你。

所以，再次点击大拇指按钮，订阅我的频道，再见。

