# 我如何通过取消服务器将 AWS 账单削减了 90%

> 原文：<https://www.freecodecamp.org/news/how-i-cut-my-aws-bill-by-90-35c937596f0c/>

作者:艾夫纳·索雷克

# 我如何通过取消服务器将 AWS 账单削减了 90%

![1*xJn9adGp0wgU4INAtwFxMA](img/bc1fee943aaf48e56f958f1d3be81979.png)

简而言之，我能够移动我的副业——一个快车。JS 应用—从 AWS 弹性豆茎到 Lambda+APIG。我用了不到一天的时间，就将成本降低了约 90%。

这对于任何非关键任务的应用程序(或环境)都是有益的，并且我相信它可能会改变次要项目和小项目的游戏规则。

首先，为了完全公开，所讨论的应用程序是一个**辅助项目**，不受任何服务级别协议或性能要求的约束。这是一个名为 [libhive](https://www.libhive.com) 的网站。libhive 扫描 [npm](https://www.npmjs.com/) 注册表中的代码，并找到使用其他包的包的例子。它内置于节点中。有 ExpressJS 的 JS，有 DynamoDB 做后盾。

libhive 每天有 50-150 次访问。几个月前，在我决定不再继续这个项目后，我仍然想让它继续下去——但是要把维护成本降到最低。该站点运行在运行两个微实例的 Elastic Beanstalk 上，这两个微实例是 24/7 冗余的。

我能够非常快速地过渡到 AWS Lambda 和 API Gateway。这主要是由于 aws 实验室的 aws-serverless-express 几乎毫不费力地将 ExpressJS 应用程序与 lambda 相匹配。无可否认，我确实有一些使用 Lambda 和 APIG 的经验，但是安装并没有花很长时间，而且几乎不需要任何代码更改。我花了不到一整天的时间。

上图显示了三个月的 AWS 成本(以美元计)——四月份仍然是 100%弹性的 Beanstalk，我在五月份和六月份进行了更改，全部没有服务器。四月份的成本主要是弹性计算——具体来说，两个 t2.micro 实例的成本为 18 美元，一个“经典”负载平衡器的成本为 20 美元——所有这些都是全天候运行的。这些成本完全降低了(仍然为一些电子预算服务卷支付一点费用)。在 6 月份，我收到了 631，187 个对 APIG 的请求，总计 2.21 美元，还有相同数量的对 Lambda 的请求，总计 386，731 GB 秒，完全属于 Lambda 免费层，因此没有产生任何成本。

#### 几乎不费吹灰之力就降低了成本——好得难以置信？

当然了。转移到 Lambda 也是有代价的——服务速度较慢，而且“冷启动”时有发生。这也是由于我的 Lambda 架构——我在一个 Lambda 函数中运行一个小模块，它从 Dynamo 获取数据并呈现 HTML 视图。这使得迁移变得非常容易，但远非理想的无服务器设置。

### 这对你意味着什么？

如果你正在为你工作(或经营)的企业考虑这一点，我会**而不是**建议将任何生产应用程序迁移到 Lambda，尤其是像这样的。然而——如果您在 Elastic Beanstalk 或 EC2 上运行多个开发/测试环境，您可能能够显著降低这些**非生产**环境的成本，并且在更大的团队/公司中——您可能有很多这样的环境，这些成本可能会增加。

#### 小家伙的好消息

如果你像我一样——一个有副业的开发者——这些降低的成本会带来巨大的不同。以十分之一的成本建立并运行不止一个静态网站的能力，可以成为真正的游戏规则改变者。软件产品的准入门槛越来越低，我相信这对每个人来说都是好消息。

*有类似的故事吗？一个问题？您希望我写一篇关于迁移过程细节的更技术性的文章吗？请在下面的评论中告诉我。感谢阅读。*