# 如何从头到尾构建一个全栈应用

> 原文：<https://www.freecodecamp.org/news/how-to-build-a-full-stack-application-from-start-to-finish/>

软件架构是一个庞大的话题。也就是说，我想我可以给你一个简单的方法，你可以用它来处理一个全栈应用的架构。

特别是，我想谈谈你应该考虑和构建一个典型的 web 应用程序的*顺序*。

我的建议是**对于每个特性**，你应该:

1.  设计前端
2.  构建前端
3.  构建持久层(后端数据库和数据模型)
4.  构建 API(后端应用程序)

*最好的方法是正面- >、背面- >的中间方法。*

## 为什么从前端开始？

假设你正与一个优秀的产品团队合作(或者你可能是一个团队，所以你*是*产品团队)，最重要的事情是最终用户体验。因此，从前端开始是最有意义的。

只有通过设计和构建前端，您才能了解对应用程序的后端有什么样的需求。

前端代码的用户就是客户。后端代码的使用者是前端代码。

## 如果没有后端可以连接，如何构建前端呢？

这就是从前端开始的好处。首先模拟填充在用户界面中的所有数据。例如，不要像这样编写代码:

```
const resp = await fetch(userUrl)
const user = await resp.json()
```

你可以简单地写下:

```
const user = {
    id: 1,
    username: "bobbyjoe",
    email: "bobbyjoe@example.com",
    profilePictureUrl: "https://fakewebsite.com/fakeimageurl.jpeg"
}
```

然后，您将像平常一样编写所有剩余的前端代码。当你完成时，你将确切地知道*你将需要你的后端存储和服务什么样的数据。*

当您开始构建后端时，您可以将这些模拟 JSON 对象换成`fetch`请求。

## 创建数据模型和数据库模式

好了，你已经为你的新特性构建了前端，并且你已经模拟了所有你决定需要存储在后端的数据。现在是时候决定如何在数据库中对数据建模了。

我喜欢从前端直接到数据库。这是因为你在数据库中存储数据的方式比你从你的 API 提供数据的方式更重要——至少如果你的 API 的消费者是你自己的团队(或者你自己)。

![well](img/cdf4f515461d2020dbd51417b72a8779.png)

Obi Wan writing APIs for himself

[改变数据库模式是*难*。在后端加上一个`/v2`端点要比重写持久层容易得多。](https://wagslane.dev/posts/keep-your-data-raw-at-rest/)

因此，考虑如何存储数据，并优先考虑这种设计，通常会减少以后的麻烦。

通常，一旦构建了前端，就拥有了设计可靠的数据库模式所需的所有信息。

例如，也许你知道你需要:

*   存储用户，每个用户有一个电子邮件和个人资料图片
*   允许用户加入、创建和离开组织

记住这一点，并假设您正在使用 Postgres 这样的关系型 SQL 数据库，您可能会这样开始:

*   带有`id`、`created_at`、`email`和`profile_picture_url`字段的`users`表
*   带有`id`、`created_at`和`name`字段的`organizations`表
*   带有`id`、`user_id`、`organization_id`和`role`字段的`users_organizations`表

用户放在`users`表中，组织放在`organizations`表中，而`users_organizations`表是一个连接表，用来记录哪些用户是哪些组织的一部分以及他们的角色是什么。例如，他们可能是一只`admin`或一只`member`。

如果你不熟悉所有这些 SQL 术语，你可以在 [Boot.dev](https://boot.dev/) 上查看我的[学习 SQL 课程](https://boot.dev/learn/learn-sql)。

## 最后，构建后端应用程序

既然您已经知道了前端需要哪些数据，以及如何在数据库中最好地对其建模，那么您最后的任务就是用一个后端 API 将它们粘合在一起。

从最简单的 API 开始。

不要一开始就构建复杂的连接功能。如果不需要，就不要构建疯狂的分页或过滤功能。您可以随时在以后添加新的端点和参数，以满足出现的性能需求。我是[为简单而优化第一](https://wagslane.dev/posts/optimize-for-simplicit-first/)的忠实粉丝。

无论如何，这并不是说你不需要比几个 CRUD 端点更复杂的东西——你可能需要。如果你这样做了，至少你面前有所有的信息，以便作出明智的决定。

不要构建超过前端要求的内容，尽量使用您在数据库中创建的简单数据模型。

考虑到所有这些，你会在一些事情上反复思考。如果您错过了前端的某个特性，需要返回并添加它，也不要感到难过。或者，你可能忽略了如果你以某种方式在数据库中存储数据，应用程序中的某个视图的加载速度会有多慢。这可能是一个反复的过程，也应该如此。

## 最后一点:不要做瀑布

我想再次强调这样一个事实，你应该在每个特性的基础上做这件事。我并不主张您预先计划整个应用程序。您应该仍然在实践迭代产品开发。

祝你好运，如果你在学习后端开发方面需要帮助，请随时查看我在 [Boot.dev](https://boot.dev/) 上构建了什么！