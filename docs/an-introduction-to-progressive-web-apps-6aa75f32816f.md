# 渐进式网络应用简介

> 原文：<https://www.freecodecamp.org/news/an-introduction-to-progressive-web-apps-6aa75f32816f/>

> 对学习 JavaScript 感兴趣？在 jshandbook.com 获得我的电子书

渐进式网络应用(PWA)是使用网络技术的移动应用开发的最新趋势。在撰写本文时(2018 年初)，它们仅适用于 Android 设备**。**

> pwa 即将登陆 iOS 11.3 和 macOS 10.13.4。

Safari 和 Mobile Safari 的技术基础 WebKit 最近(2017 年 8 月)宣布，他们已经开始致力于将服务人员引入浏览器。这意味着很快它们也将登陆 iOS 设备。因此，如果苹果决定鼓励这种方法，渐进式网络应用程序的概念很可能适用于 iPhones 和 iPads。

这不是一项突破性的新技术，而是一个新术语，它定义了一系列旨在为基于网络的应用程序创造更好体验的技术。

### 什么是渐进式网络应用程序

渐进式 Web 应用程序是一种可以**根据设备支持的内容**提供附加功能的应用程序，提供离线功能、推送通知、近乎原生的应用程序外观和速度，以及资源的本地缓存。

这项技术最初是由谷歌在 2015 年推出的，事实证明它给开发者和用户都带来了很多好处。

开发者可以使用 web 栈构建几乎一流的应用程序。这总是比构建原生应用程序容易得多，也便宜得多，尤其是考虑到构建和维护跨平台应用程序的影响时。

开发者可以从**减少安装摩擦**中受益，当商店中有一个应用程序实际上不能为 99.99%的应用程序带来任何可发现性时，谷歌搜索可以提供相同的好处，如果不是更多的话。

渐进式 Web 应用程序是一个使用某些技术开发的网站，这些技术使移动体验比普通的移动优化网站更令人愉快。这几乎就像在一个本地应用上工作，因为它提供了以下功能:

*   离线支持
*   加载速度快
*   很安全
*   能够发出推送通知
*   拥有身临其境的全屏用户体验，无需 URL 栏

移动平台(撰写本文时是 Android，但技术上并不局限于此)为渐进式网络应用提供了越来越多的支持。当用户访问这样的网站时，他们甚至要求用户将应用程序添加到主屏幕上。

但是首先，对名字做一点澄清。*渐进式 web 应用*可能是一个**混淆术语**，一个好的定义是:利用现代浏览器功能(如 web workers 和 web 应用清单)让他们的移动设备将应用“升级”为一流公民应用的 Web 应用。

### 渐进式网络应用替代方案

在构建移动体验方面，PWA 与其他选择相比处于什么位置？

让我们关注一下每种方法的优缺点，看看 pwa 在哪些方面比较合适。

#### 原生移动应用

原生移动应用是构建移动应用最明显的方式。目标 iOS 上的 C 或 Swift，Android 上的 Java /Kotlin，Windows Phone 上的 C#。

每个平台都有自己的 UI 和 UX 约定，本地小部件提供用户期望的体验。它们可以通过平台应用商店进行部署和分发。

原生应用的主要难点在于，跨平台开发需要学习、掌握和跟上许多不同的方法和最佳实践。举例来说，如果你有一个小团队，或者你是一个在 3 个平台上开发应用程序的独立开发者，你需要花很多时间学习技术和环境。你还将花费大量时间管理不同的库和使用不同的工作流程(例如，iCloud 只在 iOS 设备上运行——没有 Android 版本)。

#### 混合应用

混合应用程序使用 Web 技术构建，但是部署到应用程序商店。中间是一个框架或某种方式来打包应用程序，因此可以将其发送到传统的应用程序商店进行审查。

一些最常见的平台是 Phonegap 和 Ionic Framework，以及许多其他平台，通常你在页面上看到的是一个 WebView，它本质上加载了一个本地网站。

> 我最初将 Xamarin 包括在列表中，但是 [Carlos Eduardo Pérez](https://medium.com/@OldManCharles97?source=responses---------0----------------) 正确地指出 Xamaring 会生成本机代码。

混合应用的关键是**一次编写，随处运行**的概念。不同的平台代码是在构建时生成的，你正在使用 JavaScript、HTML 和 CSS 构建应用程序，这很神奇。设备功能(麦克风、摄像头、网络、GPS……)通过 JavaScript APIs 公开。

构建混合应用的不好的一面是，除非你做得很好，否则你可能会满足于提供一个共同点。这实际上创建了一个在所有平台上都不是最佳的应用程序，因为该应用程序忽略了特定于平台的人机交互准则。

此外，复杂视图的性能可能会受到影响。

#### 使用 React Native 构建的应用

React Native 通过 JavaScript API 公开了移动设备的本地控件，但您实际上是在创建一个本地应用程序，而不是在 WebView 中嵌入一个网站。

为了将这种方法与混合应用区分开来，他们的座右铭是**一次学习，随处书写。**这意味着这种方法在不同平台上是相同的，但是你要创建完全独立的应用程序，以便在每个平台上提供出色的体验。

性能与原生应用不相上下，因为您构建的本质上是通过应用商店分发的原生应用。

### 渐进式 Web 应用程序功能

在上一节中，你看到了渐进式网络应用的主要竞争对手。那么，与它们相比，PWAs 的地位如何，它们的主要特点是什么？

记住——目前，渐进式网络应用只适用于 Android 设备。

#### 特征

渐进式 Web 应用有一点与上述方法完全不同:**它们没有部署到应用商店。**

这是一个关键优势。如果你有影响力和运气被推荐，应用程序商店是有益的，这可以让你的应用程序像病毒一样传播。但是，除非你是前 0.001%的人，否则你不会从你在 App Store 的小小位置中获得太多好处。

使用搜索引擎可以**发现渐进式网络应用，当用户访问你的具有 PWAs 功能的网站时，**浏览器结合设备询问用户是否要将应用安装到主屏幕**。这是巨大的，因为常规的搜索引擎优化可以应用到你的 PWA 中，从而大大减少对付费获取的依赖。**

不在 App Store 意味着**你不需要苹果或谷歌的许可**就能进入用户的口袋。你可以在需要的时候发布更新，而不必经过标准的批准过程，这是 iOS 应用程序的典型流程。

pwa 基本上是 HTML5 应用程序/类固醇响应网站，最近引入了一些关键技术，使一些关键功能成为可能。如果你还记得，最初的 iPhone 没有开发原生应用的选项。开发者被告知要开发可以安装到主屏幕上的 HTML5 移动应用，但当时的技术还没有为此做好准备。

渐进式网络应用程序**离线运行**。

使用**服务人员**可以让应用程序始终拥有新鲜的内容，可以在后台下载，并为**推送通知、**提供支持，从而提供更多的再次参与机会。

此外，可共享性为想要共享您的应用程序的用户带来了更好的体验，因为他们只需要一个 URL。

### 利益

那么用户和开发者为什么要关心渐进式 Web 应用呢？

1.  PWA 比较轻。原生应用可能重达 200MB 或更多，而 PWA 可能在 KBs 的范围内。
2.  没有本地平台代码
3.  购买成本更低(说服用户安装应用程序比访问网站获得首次体验要困难得多)
4.  构建和发布更新所需的工作量大大减少
5.  他们比普通的应用商店应用更支持深层链接

### 核心概念

*   **响应式**:UI 适应设备屏幕大小
*   类似应用的感觉:感觉不像一个网站，更像一个应用(尽可能)
*   **离线支持**:它将使用设备存储提供离线体验
*   **可安装**:设备浏览器提示用户安装你的应用
*   **重新参与**:推送通知帮助用户重新发现已安装的应用
*   **可发现的**:搜索引擎和 SEO 优化可以提供比应用商店更多的用户
*   **新鲜**:一旦上线，应用程序就会更新自身和内容
*   **安全**:采用 HTTPS
*   **渐进式**:它可以在任何设备上工作，甚至是旧设备，即使它的功能更少(例如，只是作为一个网站，不可安装)
*   可链接的:使用 URL 很容易指向它

### 服务人员

渐进式 Web 应用程序定义的一部分是它必须离线工作。

因为允许 web 应用离线工作的是服务人员，这意味着**服务人员是渐进式 Web 应用**的强制部分。

警告:服务人员目前仅受 Chrome(桌面和 Android)、Firefox 和 Opera 支持。有关支架的更新数据，请参见[http://caniuse.com/#feat=serviceworkers](http://caniuse.com/#feat=serviceworkers)。

提示:不要混淆服务人员和网络人员。它们是完全不同的东西。

服务工作者是一个 JavaScript 文件，充当 web 应用程序和网络之间的中间人。因此，它可以提供缓存服务，加速应用程序渲染，并改善用户体验。

出于安全原因，只有 HTTPS 网站可以使用服务人员，这也是为什么渐进式网络应用程序必须通过 HTTPS 提供服务的部分原因。

用户第一次访问应用程序时，设备上没有服务人员。在第一次访问时，安装服务工作者，然后在随后访问站点的单独页面时，将调用该服务工作者。

> **查看[服务人员完整指南](https://flaviocopes.com/service-workers/)**

### 应用程序清单

应用程序清单是一个 JSON 文件，可用于提供渐进式 Web 应用程序的设备信息。

您可以在网站每个页面的每个标题的**中添加一个指向清单的链接:**

```
<link rel="manifest" href="/manifest.webmanifest">
```

该文件将告诉设备如何设置:

*   应用程序的名称和简称
*   各种尺寸的图标位置
*   相对于域的起始 URL
*   默认方向
*   闪屏

#### 例子

```
{   "name": "The Weather App",   "short_name": "Weather",   "description": "Progressive Web App Example",   "icons": [{    "src": "images/icons/icon-128x128.png",    "sizes": "128x128",    "type": "image/png"   }, {     "src": "images/icons/icon-144x144.png",    "sizes": "144x144",     "type": "image/png"   }, {     "src": "images/icons/icon-152x152.png",    "sizes": "152x152",     "type": "image/png"   }, {     "src": "images/icons/icon-192x192.png",    "sizes": "192x192",     "type": "image/png"   }, {     "src": "images/icons/icon-256x256.png",     "sizes": "256x256",     "type": "image/png"   }],   "start_url": "/index.html?utm_source=app_manifest",   "orientation": "portrait",   "display": "standalone",   "background_color": "#3E4EB8",  "theme_color": "#2F3BA2" }
```

应用清单是 W3C 的工作草案，可在 https://www.w3.org/TR/appmanifest/[获得](https://www.w3.org/TR/appmanifest/)

### 应用程序外壳

App Shell 不是一项技术，而是一个设计概念。它的目的是首先加载和呈现 web 应用程序容器，然后是实际内容，给用户一个类似应用程序的良好印象。

举个例子，苹果的人机界面指南建议使用类似用户界面的闪屏。这提供了一个心理暗示，被发现可以降低应用程序需要很长时间加载的感觉。

#### 贮藏

应用程序外壳与内容分开缓存，这样从缓存中检索外壳构建块只需很少的时间。

> 对学习 JavaScript 感兴趣？在 jshandbook.com 获得我的电子书