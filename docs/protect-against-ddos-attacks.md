# 如何防范 DDoS 攻击

> 原文：<https://www.freecodecamp.org/news/protect-against-ddos-attacks/>

分布式拒绝服务(DDoS)攻击旨在使一个组织或服务离线，并且源自多个*分布式*主机。

防御 DDoS 攻击的难点在于主机是分布式的——如果是一台主机或一个小组，您可以很容易地用防火墙规则阻止流量。

有许多不同类型的 DDoS 攻击，但我们可以将它们大致分为三类——容量攻击、协议攻击和应用程序攻击。让我们详细看看每一个。

## 什么是体积 DDoS 攻击？

体积 DDoS 攻击旨在填满受害者的带宽(如 UDP 反射攻击)。

UDP 反射攻击发送将目标 IP 地址冒充为源的数据包。然后，对欺骗数据包的响应将被发送到目标，而不是攻击者。

通过中间服务器而不是直接攻击目标的优点是，响应数据包通常比发送的数据包大得多。例如，对 DNS 查询的响应可能比原始的[请求](https://docs.aws.amazon.com/whitepapers/latest/aws-best-practices-ddos-resiliency/aws-best-practices-ddos-resiliency.pdf)大 28 到 54 倍。

这样，攻击者可以发送许多更小的数据包，而响应数据包将耗尽目标的资源。

## 什么是协议 DDoS 攻击？

协议 DDoS 攻击在协议如何操作中找到弱点(例如 SYN flood)。SYN flood 利用了三次握手的工作方式。

当攻击者向机器发送大量 SYN 数据包时，服务器会为此请求分配资源，并发回一个 SYN ACK 数据包——假设这是连接请求的开始。

正常情况下，另一台服务器会以 ACK 响应，开始连接。在受到攻击的情况下，攻击者继续发送 SYN 请求，而不完成连接，直到服务器资源不足，无法接受任何额外的流量。

## 什么是应用 DDoS 攻击？

应用程序 DDoS 攻击针对应用程序工作方式中的弱点(例如 Slowloris 攻击)。

Slowloris 攻击非常类似于 SYN flood，但目标是 web 服务器。当攻击者发送 HTTP 请求而不完成它们，继续(缓慢地)发送额外的报头以保持连接打开时，就会发生这种情况。

由于连接从未完成，它们会耗尽服务器的所有可用资源，因此它无法处理合法的连接。

## 其他类型的 DDoS 攻击

或者，DDoS 攻击可以根据它们影响的 OSI 模型层进行分组。这些攻击通常分为基础设施攻击(如 UDP 反射和 SYN 泛洪)或应用程序攻击(如 HTTP 泛洪和缓存破坏)。

当攻击者向服务器或应用程序发送看似合法的“大量”HTTP 请求，耗尽其资源时，就会发生 HTTP 洪水。

缓存总线攻击是 HTTP 泛洪的一个子集，旨在通过改变查询字符串来避免 CDN 缓存，因此 CDN 必须为每个请求联系源服务器，从而使其过载。

## DDoS 攻击的缓解措施

防范 DDoS 攻击最重要的部分是准备工作本身。DDoS 攻击开始后就很难对付了。

### 扩大带宽

应对容量攻击的一种方法是相应地增加带宽。不幸的是，这可能非常困难，具体取决于攻击的规模，以及攻击者相应扩大攻击规模的能力。

除非被攻击的组织是服务提供商或非常大的组织，否则这不太可能是现实的。

### 外包响应

较小的组织可以将他们的响应外包给其他专业公司或他们的 ISP(或两者都有)。

这些类型的关系需要在攻击发生之前就存在，这样当攻击发生时，缓解就像联系 ISP 或服务提供商以激活保护(或让保护持续开启)一样简单。

通常，DoS 保护提供商会将流量转移到他们的环境中(如果流量尚未通过他们的环境)。这可以通过 DNS，通过更新 A 记录以指向 DDoS 提供商分配的 IP(尽管您需要一个低 TTL 以使其快速生效)，或者通过 BGP，通过通告一个比当前通告的路由更具体的路由。

### 制定特定于 DDoS 的事件响应计划

即使组织已经外包了 DDoS 保护，拥有特定于 DDoS 的事件响应计划也是关键。

一旦各利益相关方完成并同意，至少每年审核一次(最好通过桌面练习)以确保每个人都理解他们在计划中的角色，这一点很重要。

特定于 DDoS 的响应计划应包括以下内容:

#### 会前活动:

*   **电路图:**创建尽可能精确的电路图，包括电信联系。

    还创建一个你自己的网络和任何适当联系人的地图(包括那些有能力和权力进行本地更改的人，以及那些可以联系电信公司进行任何更新的人)。
*   **上报:**确定何时(以及如何)让您的 ISP 或 DDoS 缓解组织参与进来(提供最新的联系人和合同副本)。
*   **沟通:**列出应通知的人员和时间(安全团队的联系信息、适当的网络团队联系人等)。

    这应该分为两组——技术响应人员(能够/愿意实施技术变更来应对攻击)和其他所有人(通信、法律等)。第二组应该包括可能需要参与的任何人，但是他们应该与进行更改的技术人员单独通话，以便尽可能高效地做出响应。

    理想情况下，这应该被打印和分发，这样即使系统不可用，人们也可以访问。

    确保您的沟通团队有一个计划，在发生影响面向客户的资产的事件时，如何沟通以及沟通什么。
*   **审查:**应定期审查这些文件和联系人列表(至少每季度一次)。

#### 活动期间:

*   **将事件归类为 DDoS 攻击:**需要确认这是一次 DDoS 攻击，而不仅仅是短时间的高流量爆发或者网络中有人犯了错误。理想情况下，这还包括确定正在发生的攻击类型和数量。
*   **上报:**通知事故指挥官，让他们开始通知必要的人员。
*   **采取初步措施:**如果可能的话，[天坑](https://www.wired.com/story/what-is-sinkholing/)堵车。如果流量高于链接的带宽，联系你的运营商(他们很可能会在他们那端吸收流量)。同时，如果您有 DDoS 缓解服务，也要联系他们。
*   **沟通:**为技术人员和非技术人员建立联系，让他们了解事件的最新情况。

    如果公共服务长时间中断，这一点尤为重要，因为你的沟通团队需要及时更新，以便与股东/媒体/客户沟通。

#### 事后:

*   **恢复正常:**您何时会取消任何缓解措施？谁将签署？
*   **攻击来源:**你能收集到什么关于攻击的信息来解释它和它背后的攻击者？这是有针对性的攻击吗？
*   **经验教训:**它们是什么？如何使用它们来改进事件响应计划？

### 构建弹性架构

构建具有弹性的系统需要全面的业务连续性计划，DDoS 是该计划的一个组成部分。

设计 DDoS 和设计业务连续性时，基本上适用于数据中心和网络的原则是相同的。您希望避免任何单点故障或瓶颈，并拥有地理上多样化的网络和多样化的提供商。

内容分发网络(cdn)是改善 DDoS 响应的一种方式，因为它们提供了地理上分散的代理服务器网络，可以显著提高弹性。

云架构提供了对旧模式的重大改进。它允许任何规模的组织创建完全冗余的系统，只需点击一个按钮，这些系统就可以启动和关闭。它还以非常低的成本提供了地理上多样化的基础设施，并提供了一种根据需要增加和减少负载容量的廉价而简单的方法。

专门针对云的架构可以让组织利用这些新模型，并显著提高您的 DDoS 响应能力。

### 升级您的硬件

一些 DDoS 攻击类型非常古老，可以通过较新的硬件来缓解。例如，您可以使用适当的网络防火墙和负载平衡器来防御许多协议攻击(如 SYN floods)和应用程序攻击(如 Slowloris)。

这些防火墙通常可以监控这类攻击的迹象，并在攻击达到不可持续的程度时关闭连接。安装正确的硬件可以减轻攻击可能造成的损害。

### 其他资源:

*   [DDoS 快速指南美国证书](https://us-cert.cisa.gov/sites/default/files/publications/DDoS%20Quick%20Guide.pdf)
*   [AWS DDoS 弹性最佳实践](https://docs.aws.amazon.com/whitepapers/latest/aws-best-practices-ddos-resiliency/aws-best-practices-ddos-resiliency.pdf)
*   [NCC 网络事件响应 DDoS](https://www.gov.scot/binaries/content/documents/govscot/publications/advice-and-guidance/2019/10/cyber-resilience-incident-management/documents/cyber-incident-response-denial-of-service-playbook/cyber-incident-response-denial-of-service-playbook/govscot%3Adocument/Cyber%2BCapability%2BToolkit%2B-%2BCyber%2BIncident%2BResponse%2B-%2BDenial%2Bof%2BService%2BPlaybook%2Bv2.3.pdf)
*   [Imperva DDoS 响应行动手册](https://www.cbronline.com/wp-content/uploads/dlm_uploads/2018/04/Playbook-DDoS-Response-Playbook-new-V2.pdf)