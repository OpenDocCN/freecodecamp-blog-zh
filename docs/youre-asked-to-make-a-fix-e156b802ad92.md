# 所以一个产品经理让你去修复一个 bug…

> 原文：<https://www.freecodecamp.org/news/youre-asked-to-make-a-fix-e156b802ad92/>

作者:阿努普·考库尔

# 所以一个产品经理让你去修复一个 bug…

![a118aQN9TgFRQBU661DG3nMayh5OGIWr7FPn](img/c38d8ce32ec78ddb164ea9a5a261c5d7.png)

你以前来过这里。

你的代码很优雅。

你的抽象程度恰到好处。

你的模块是模块化的。

您的系统通过周到的接口与外部世界打交道，不直接依赖外部系统。

你的测试是绿色的。您的代码覆盖率报告需要整整一分钟来加载。97%它说…

生活是美好的。

然后就发生了。

一位产品经理跑进来告诉你，你上周发布的更新中有一个 bug。每当用户向他们的购物车中添加商品时，应该显示购物车中商品数量的计数器需要几秒钟的时间来更新。以前是即时更新的。

项目经理告诉你用户的抱怨如潮水般涌来。他问你:你能看看吗？

你当然可以看看。毕竟，这是你造的。很可能是别人的错。但你会解决的。你就是这样一个正直的员工。

您从最新版本的提交中提取 Git 散列，并深入到变更日志中。在上一个版本中，您已经将 HTTP 请求库升级到了最新版本。这件事悬而未决了很久。你可以记得发生这种事的确切时间。那是美好的一天。

您切换到该提交，然后模拟更新购物车的请求。好消息是你的关注点如此清晰。只需轻击一个构建标志，您就可以轻松地测试临时服务器和生产服务器。

你已经找到了罪魁祸首。你更新的 HTTP 库好像有回归。对于某些类型的请求，解析传入的 JSON 有效负载需要的时间有点长。一旦请求负载被解析，您的应用程序只能更新购物车计数器 UI。基础设施还没有建立来处理最终的一致性，添加它本身将是一个完整的项目。不能只在本地更新计数器，以后再同步。

你知道这是别人的错。这就是生活。

你告诉首相发生了什么。他拍拍你的背。他知道他可以依靠你。你知道如何修理它吗？

很明显。

你已经考虑过你的选择了。

您不能回滚更改。大量新代码和错误修复都依赖于新的 lib 版本。如果你只是恢复一切，你也会失去所有这些。

简单地派生库并维护自己的副本似乎也不明智。最初的项目维护者有一个巨大的测试基础设施，将测试你的修复数以千计的设备。您有 3 台设备，其中 2 台的操作系统版本已经过时。最好也能得到他们的反馈。毕竟这是他们的图书馆，他们会对图书馆的内部有你所没有的洞察力。

所以你要:

*   叉 lib
*   实施修复
*   向原始回购发送拉请求
*   在你和维护者之间有一点反复
*   最终让他们相信你的想法是最好的解决方案
*   合并上游
*   等待库的补丁发布
*   更新代码中的库
*   推出新版本

很简单。

“太好了，”总理说。“你认为需要多长时间？”

你知道答案。人们说工程师无法估计。您不是那些工程师中一员。

“两个星期，”你说，眼睛都不眨一下。"这取决于 PR 多快被接受以及维护者发布新版本."

首相的脸上失去了血色。“2 周？两周？!"他一直重复这句话，好像要改变什么似的。但是你要保持冷静。众所周知，经前综合症会失控。没什么好担心的。

“我们的用户正在减少！他们什么也不买，因为他们看不到他们的购物车在更新！我们是电子商务公司！这是不能接受的！”

你看着他经历悲伤的五个阶段。你随时都在等待被接受。并没有。他似乎陷入了讨价还价的模式。

“你有没有办法更快地修好它？暂时的吗？加油！这很重要！”

“很好，”你说，一屁股坐到转椅上。“让我看看。”

你会迁就他一下。也许他会放过你。你知道，你还有别的事要做。

你回到源头。你在你的元素里。你的手指导航 IDE 快捷键就像波塞冬本人骑在海浪上。

啊哈！你已经找到了。有一种没有记录的方法可以挂钩到 JSON 解析代码，并用您自己的实现替换它！

但是等等。这看起来很丑。它是非公开的 API。像这样曝光可能是个错误。你不想依赖这个。如果他们在下一个版本中删除了它怎么办？你得从头再做一遍。谁想这么做？尽管这比维护你自己的未测试的 lib 分支要快。但还是很丑。

号码

你不会让错误的商业决策毁掉你的纯洁之殿。你是所有神圣事物对抗无知大众的守护者。这就是他们给你高薪的原因。拒绝是你的责任。

你冲进首相的小屋。“答案是否定的。没有干净的方法可以做到这一点，我也不相信丑陋的黑客。对不起。”

他的反应和预期的一样。

“你告诉我有一种方法可以做到这一点，但你不会这样做，因为它不是*干净*？我们的用户对我们大喊大叫，威胁要换成我们的竞争对手，而你却不去解决它，因为它不是*干净的*？!"

你失去了它。

这家伙懂什么工程？你用一点一点的东西建造了一个幻想的世界。高度可扩展的系统，可以抵御来自前苏联集团可能扔给你的所有黑帽子的 DDoS 攻击。你是艺术家，硅是你的画布。你已经阅读*干净代码*很多次了，以至于你对它的了解超过了你对自己的 GitHub 密码的了解。

“是的！”你大喊。“我不会用这些废话玷污我们的代码库！我花了几个月来建造这个东西！每一行代码都是我血汗的结晶！任何事情发生的唯一原因不是因为你——而是因为你！是像我这样的人让这个软件继续运行，也是像我这样的人在你和你的“商业特色”消失很久以后还得收拾这个烂摊子！”

你冲出去。你需要喝一杯。像这样的家伙是我们行业的祸根。他们认为，他们出色的 MBA 学位让他们对构建优秀软件有了一些了解，而美国开发人员在某种程度上忽略了这一点。去他们的。

你昂首阔步走向自助餐厅。每天都有美食供应的餐厅。还有咖啡。无限量，美味，滋养灵魂的咖啡。这是你应得的，因为你是一名知识工作者。

你拿起一杯咖啡，找个地方坐下。

这时你注意到了他。

你们公司最资深的工程师。

这家伙是一个彻头彻尾的，铁杆的，我可以在厕所休息的时候写一个编译器的工程师。在黑客出现之前，他就是一个黑客。你想成为这个人。他有点像甘道夫。同时被所有人尊敬和畏惧。但是他很善良，总是帮助孩子们。他很想听听你是如何让这个首相代替他的。毕竟，他是你的人。

所以你坐在他旁边。他喝着咖啡，阅读一些关于 Haskell 中抽象数据类型的内容。

没错。找个合适的人谈谈。

你告诉他你的伟大故事。他耐心地听。他在几个地方点头并提问。他的肢体语言很放松。他以前来过这里。你可以从他的眼睛里看出来。

你终于完成了。

太累人了。

你的肩膀感觉更轻了。

他看起来陷入沉思，像是在小心地选择用词。

你等着大笑吧。他会大叫“那是我的孩子！”然后你们再一起喝杯咖啡。他会用一个类似的故事来取悦你，这个故事是他当年在一个无知的首相面前讲述的。

你一直梦想着这一天。在战斗中取得胜利后，你会像男人一样敲打咖啡杯。至少，他们在电影里是这么做的。当然，然后一般是麦酒，不是咖啡。

不过，重要的是情绪。

你等着…

再等一会儿…

他直视你的眼睛。它们穿透你的灵魂。这些年来与机器的争论让他的目光变得更加锐利。但他拥有迷人的力量。你不能转移视线。

他只说了一件事。

“我们的工作不是喝咖啡和写代码。我们的工作是制作可以工作的软件。”

然后他走开了。

你休息一分钟。你的胃里有一种感觉。空虚、令人厌恶的感觉。你开始意识到这种感觉。你感到羞耻。

你让你最欠的人失望了。你的顾客。

所以你回到你的办公桌前。你破解了黑客，然后推出了一个新版本。

你向首相道歉。事情有点失控了。他说没关系。结局好就一切都好。

您还派生 lib，实现正确的修复，并发出一个上游 PR。当 lib 的新版本带来合适的解决方案时，[你总是可以重构](https://medium.com/@anupcowkur/leave-it-a-little-better-than-you-found-it-isnt-good-enough-652d4be673cb#.taxjttayy)。

*如果您喜欢，请点击？下面。我注意到了每一个人，我感谢他们中的每一个人。*

如果你想了解更多关于编程的想法，请关注我，这样当我写新帖时你会得到通知。