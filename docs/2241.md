# 如何优化您的 AWS 云架构成本

> 原文：<https://www.freecodecamp.org/news/cost-optimization-in-aws/>

在本文中，我将强调优化 AWS 云架构成本的意义。然后我将分享你如何在 AWS 架构良好的框架中做到这一点。

## 维护 IT 架构的问题

IT 基础设施的传统维护不是很高效？我真的不知道该用什么词来描述这个问题，主要是因为我永远不会理解处理内部数据中心的痛苦。

但是它涉及到提供基础设施、安装操作系统和应用程序、在电缆网中配置网络、持续监控性能等等。

想象一下保持这些数据中心运行所需的工作——采购、运营、构建特殊设施以保持服务器运行、灾难恢复等等。扩展这种传统基础架构可能需要几周甚至几个月的时间。

这种情况也会影响应用程序的开发。旧的应用程序通常是作为整体构建的，总体故障风险很高。你做什么生意来着？

## 云计算如何提供帮助

像 AWS 这样的云提供商的出现彻底改变了这个等式。想象一下，不用自己做以上所有的事情。取而代之的是，一个专家团队会以一定的成本为你做这件事。

云计算就是这样做的。它还引入了构建应用程序的新方法。使用云功能开发的应用程序称为云原生应用程序。

正如我前面提到的，所有这些都是有代价的。但是，如果您将这些成本与传统基础架构的处理方式进行比较，它仍然更便宜。

然而，这还不是全部——如果你明智地管理你的云服务，它甚至会更便宜。成本优化是 AWS 良好架构框架的支柱之一。这描述了优化成本的方法，不仅仅是通过构建云原生应用，还包括其他组织方面。

云资源可扩展、易于管理、先进、可靠、安全、经济高效且高度可用。您不需要从一开始就调配和购买高性能虚拟机来管理早期的一些流量激增。这将是一个典型的举升和移位场景。

## 计算您的云成本

如果您是云新手，或者正计划将现有工作负载迁移到 AWS，AWS 提供了一个很好的服务来计算总拥有成本(TCO)。它将本地部署与您必须在云中支付的成本进行了比较。

TCO 计算器考虑存储成本、网络成本、服务器成本和运营成本等方面。它还为您提供了提升和移位安排的估计。

通过在云架构中实施低于成本的优化支柱，可以进一步降低 TCO 计算器提供的估计值，例如:

1.  适型化
2.  弹性增加
3.  选择正确的定价模式
4.  满足需求
5.  测量和监控

## 成本优化清单

### 适型化

了解应用程序及其功能的容量需求非常重要。猜测容量通常会导致不匹配—我们最终会调配更少的资源，这可能会导致我们失去客户，或者我们最终会调配更多的资源，而我们最终会支付超出我们需求的费用。

一般来说，你应该从小规模开始，并监控你的使用一段时间，以建立一个趋势。根据这一趋势，您可以横向扩展并购买保留的实例或容量，这有助于节省高达 75%的计算成本。

### 弹性增加

为了自动适应偶尔的流量激增，实施弹性云架构非常重要。这允许自动扩展组根据您的需求进行扩展和缩小。这是您将容量与需求相匹配的地方。

当然，如果不监控您当前的使用情况，这是不可能的。监控有助于您了解一段时间内的计算需求，并允许您定义阈值。您可以使用以这种方式生成的事件来采取缩放操作。

### 选择正确的定价模式

AWS 提供的每项服务都有一个定价模型。就计算和存储而言，AWS 提供了各种类型的定价模型，本质上定义了托管服务的条款。

在 EC2 实例的情况下，定价模型定义了不同级别的可用性和访问。例如，可以随时创建和销毁按需实例。另一方面，保留实例是固定的长期实例，可以降低开支。

还有其他定价模型，如现场实例、专用实例、专用主机等等。

### 满足需求

AWS Auto Scaling 可用于匹配需求，以便您在不活跃时支付较少费用，仅在需求激增时支付费用。在此期间，您还可以使用保留的实例，通过长期投入来进一步降低成本。这是成本优化的一个例子。

向云迁移还要求组织进行文化变革，尤其是在涉及成本优化时。团队应该了解云是如何工作的，以及在各种场景中应该使用哪些托管资源。

您可以组建一个云卓越中心(CCoE ),跨垂直行业开展工作，以监控和建议实施以下成本优化原则的更好方法。

1.  定义和实施标记
2.  有效的账户结构
3.  设计和使用指标
4.  设计基于成本的架构

## 标签的重要性

为了处理成本和回答与支出相关的问题，您应该执行标记作为最佳实践。资源标记使我们能够更好地了解和更精细地控制我们的云支出。

在创建云资源时，应为每个组织定义并强制执行标准标记格式。该格式可以在组织级别定义诸如项目、项目组合单元、团队等方面。

更深入地说，还可以定义基于项目的约定来表示各种云资源支持的服务。然而，要注意你选择的标签数量——不应该定义太多或太少的标签。一般来说，标签可以分为两组:

1.  ****技术—****代表自动化、安全等技术细节。
2.  ****战略—****代表组织细节，如成本中心、访问控制、治理等等。

## 如何跟踪您的云计算成本

有很多方法可以记录你在云计算上的花费。现在来看看主要的。

### ghost explorer

AWS 提供了一些非常有用的服务，如 ****Cost Explorer**** ，让您深入了解一段时间内的云支出。它提供了一个漂亮的可视界面来显示每月或每天的花费。它还为您提供了一个默认的仪表板，显示每项服务每月产生的成本。

AWS 成本资源管理器帮助您生成和导出高级成本报告以及详细和特定的报告。您可以根据自己的兴趣和关注点构建报告和仪表板。

成本浏览器帮助您设置预算，这有助于监控您的成本。预算是控制成本的好方法。使用预算，您可以在 AWS 中定义支出基线，并设置阈值违反通知。

例如，如果成本超过基准预算的 80%以上，您可以选择接收通知，这将有助于您采取措施。

Cost Explorer 还为您提供合理的规模调整建议，帮助您确定在实例类型、定价模式等方面，您可能会在哪些地方提供超出所需基础架构的资源。

### 快速瞄准

如果你需要更详细的报告工具，AWS 提供了其 ****QuickSight**** 服务。这是一个成本报告的商业分析解决方案。它速度快，高度可扩展，并包含 ML 功能。

您可以更好地探索、分析和协作成本支出主题。然而，这不是像 Cost Explorer 一样的免费服务，它是按会话付费的。

### AWS 值得信赖的顾问

****AWS 可信顾问**** 是一个服务，它体现了 AWS 的一个虚拟服务，为您提供关于框架的建议。它根据 AWS 最佳实践执行一系列检查，并在需要采取任何行动时以下面的格式突出显示这些检查。

1.  未检测到问题–意味着实施符合要求的标准。
2.  建议调查-针对警告。
3.  建议采取的行动——针对任何完全不合适的方面。

AWS Trusted Advisor 会持续监控您已使用的调配资源数量，并生成建议。在成本优化的情况下，它会突出显示是否有任何资源未得到充分利用、实例是否空闲、保留的实例是否将过期等等。

### AWS 云锋

在采取行动之前，您不必总是等待 AWS Trusted Advisor 给出优化建议。 ****AWS CloudFront**** 是一项提供资源指标的服务，我们可以使用这些指标来监控自己的性能并确定未充分利用的资源。

AWS CloudWatch 是收集指标最简单的方法，因为它直接与几个 AWS 服务集成。通过获得运营可见性和洞察力，您可以采取改进措施并优化成本。

### EC2 实例租用

AWS 提供了各种选项来在其基础架构上调配虚拟机。根据您的服务的关键程度，创建这些选项来满足您的需求。

在任何给定的实现中，并不是所有的服务都需要专用的高性能节点。类似地，并不是所有东西都可以在低计算和较少可用节点上工作。

这为我们探索和定义最适合业务和最具成本效益的计算基础架构提供了机会。让我们看看 AWS 提供的一些计算类型(EC2)。

1.  ****保留实例—****长期承诺，低成本。
2.  ****点实例—****成本非常低，使用备用 EC2 容量，在容量不可用时释放，适用于容错应用。
3.  ****按需实例—****无承诺，常规费用。
4.  ****专用实例—****从非共享资源中创建的实例。
5.  ****专用主机—****专用实例，可访问端口等硬件选项。
6.  ****预留容量—****预留容量可以在一个实例族内购买和使用。实例可以根据规范化因子调整大小。灵活地帮助降低成本。

根据您的要求，您可以从上面选择适当的选项来托管您的工作负载。例如，当您确定某个节点将长期存在时，您可以利用保留实例而不是按需实例，并节省高达 75%的成本。

为短暂和非关键的负载提供按需实例是没有意义的。在这种情况下，可以使用 Spot 实例来帮助降低高达 90%的成本。

### 调整 AWS 存储的规模

AWS 提供各种类型的存储，您可以根据您希望数据存储的冷热程度来使用合适的存储。AWS 提供的各种类型的存储包括对象、数据块、文件、混合、边缘和备份。

让我们看一个对象存储的例子。以下是 AWS S3 公司提供的存储课程。您选择哪种对象存储类别将取决于数据的访问频率和您需要的保留期。

1.  ****标准存储—****标准存储，常规费用，即时存取。
2.  ****标准非频繁访问—****降低可用性，降低成本。
3.  ****一个区域不频繁访问—****减少冗余，降低成本。
4.  ****智能分层—****对于未知的访问模式，数据根据文件使用频率移入和移出各种类别。
5.  ****冰川—****长期储存，价格便宜，几分钟或几小时即可取回。
6.  ****冰川深层存档—****更长期的存储，更便宜，数小时检索。

生命周期策略可用于将旧数据转移到更便宜的长期存储中。

每种类型的存储都有不同的杠杆，您可以适当设置这些杠杆来优化 AWS 上的存储成本。我建议在配置您的存储功能时使用 AWS ****数据生命周期管理器**** 。

## 最后一点

您可以对 AWS 中的资源应用许多成本优化，但是如何应用这些优化取决于您的业务优先级。

主要是你需要决定你的重点是成本还是上市时间。成本优化的主要基础是:

1.  ****基于时间——****随时间优化。
2.  ****基于需求——****基于需求/流量进行优化。
3.  ****基于缓冲区—****基于辅助工作负载进行优化。

架构良好的框架的成本优化支柱表明，在 AWS 上设计、开发和部署应用程序时，保持成本优化是一个良好的实践。

您应该持续监控您的成本，以便从您的云投资中获得最大收益。

在这篇文章中，我们讨论了与 AWS 架构良好的框架相关的云成本优化的各个方面。如果你一直坚持到现在，为你干杯！

嘿，如果你喜欢这个内容，请考虑订阅、关注和分享这篇博文！ [Let'sDoTech](https://letsdotech.dev) ， [Instagram](https://www.instagram.com/letsdotech/) ， [Twitter](https://twitter.com/letsdotech_dev) ， [LinkedIn](https://www.linkedin.com/company/letsdotech) 。