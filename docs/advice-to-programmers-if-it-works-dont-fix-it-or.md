# 如果代码有效，不要修复它...或者也许会？什么时候重构代码，什么时候不去管它。

> 原文：<https://www.freecodecamp.org/news/advice-to-programmers-if-it-works-dont-fix-it-or/>

想象你工作的软件。它是在你加入团队之前由程序员编写的，软件工作正常。有一些错误需要修复，但它做了它应该做的事情。没别的了。这是其他人从代码之外看到的——解决客户问题并按预期工作的软件。

但是代码呢？程序员呢？他们对自己的软件有什么看法？

作为开发这个软件的程序员之一，你会从代码内部看到完全不同的东西。

首先，你认为代码库很大。您肯定知道，这个软件可以用更少的代码编写，同时仍然提供相同的功能。代码库对你来说似乎很复杂。您知道代码本来可以用更好、更简单、结构更好的方式编写。

添加新功能或实现新东西是困难和痛苦的，因为你必须考虑到相互关联的其他部分。这些模块不是松散耦合的，因此进行更改会花费太多时间。而调试呢？发现并修复错误也需要太多的时间。

除了糟糕的设计和丑陋的代码，软件运行正常，客户也很高兴。现在你正处在十字路口。对你来说有两种可能的方法:一种方法告诉你，你应该遵循古老的工程格言，“如果它有效，就不要修复它。”另一个告诉你，你应该做一些重构，使你的工作更容易，同时在你的代码基础上工作，这样你就有更多的可读和可理解的代码。

你喜欢哪种方式？你会遵循古老的工程学格言“如果有用，就不要修理它吗？”

## 两种不同的程序员心态

这个问题的答案可能很简单。但是在解释适当的答案之前，我想向您介绍两种不同的程序员思维模式，当涉及到修复坏代码时，它们可以正常工作。

第一种心态相信古老的工程学格言:“**如果有效，就不要修复它。**“对他们来说，他们的代码风格无关紧要。他们是结果驱动的程序员。它可能是复杂的、结构糟糕的代码，与重要的编程原则完全相反，但他们不关心代码写得有多好。他们只关心它能做什么。

所以对这些程序员来说，修改糟糕的代码是浪费时间。它只是工作。他们为什么要碰它？！此外，在修复坏代码的同时，引入新的错误的风险也很大。那么他们会怎么做呢？他们不会碰代码，继续遵循古老的工程格言。

另一方面，其他将代码视为艺术品的程序员会对这种情况感到不舒服。他们在阅读写得很差的代码时会感到厌恶。他们会试图修复项目中的每一段代码，因为他们非常关心代码风格，他们项目中的每一段代码都应该被视为艺术。

他们对自己的代码风格过于执着。即使其他程序员编写了结构良好的代码，他们也会尝试修改代码，使其适合自己的风格。所以基本上他们不会遵循“如果有用，就不要修理”的老话。他们会按照自己的心态去搞定一切。最后对他们来说，行不行都无所谓。

## 最适合你的解决方案是什么？

找到你正在积极工作的代码部分，并修改这些部分，使它们更容易理解和阅读。如果其他部件按预期工作且无故障，请不要触摸它们。

为什么这个核心如此重要？软件的核心部分是你最常使用的部分。你会更经常地阅读这些部分，并且会比其他部分更经常地修改它们。如果需要添加额外功能或实现新功能，它们将直接连接到核心。

大部分的 bug 都会从这个核心引入，也就是说你会花大部分的时间去调试这些部分。记住 [80/20 法则(帕累托法则)](https://en.wikipedia.org/wiki/Pareto_principle)，**“20%的代码有 80%的错误。找到他们，修理他们！”**

其他部分呢？

这些部分是你很少用到的。它们没有虫子。它们可能是几个月或几年前写的，并且它们像预期的那样工作。它们可能写得很难看，尽管它们本可以用更简单、更易读、更易理解的方式来写。这并不意味着你也必须修复它们。天知道你什么时候不得不再次阅读或修改它们。所以这些部分可以保持原样。别管他们了。不需要修理它们。你可以把时间花在更重要的事情上。

## 为什么即使核心部件按预期工作，修复它们也如此重要？

如果你想服务你的客户很多年，你应该有一个可维护的产品。一个可维护的产品意味着做出改变不是一场斗争。调试和修复错误不应该花太多时间，添加新功能也应该很容易。所以结果是，你的程序员高兴，你的客户也高兴。

正如马丁·福勒在他的《T2 重构》一书中所说:

> “当你想到程序员时，我们大多数人都会认为他们把大部分时间花在编写代码上。其实这是相当小的一部分。程序员把大部分时间花在阅读代码和调试代码上。每个程序员都可以讲述一个花了一整天(或更长时间)才找到的 bug 的故事。修复漏洞通常很快，但找到它却是一场噩梦。”

你的代码写得越好，就越容易理解。你的代码越容易理解，你的工作就越容易。

这就是为什么在软件的核心部分不遵循古老的工程格言(如果有效，不要修复它)是你可以做出的一个重要决定的原因。