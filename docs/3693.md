# 如何在 JavaScript 应用程序中使用匿名函数作为私有命名空间

> 原文：<https://www.freecodecamp.org/news/how-to-use-anonymous-functions-for-private-namespacing-in-your-javascript-apps/>

让我们看看在构建 JavaScript 应用程序时什么是名称空间，以及在构建应用程序时使用私有名称空间的一些好处。

****请注意，本文引用的是匿名自执行函数。如果你不知道这是什么，请阅读这篇由 Noah Stokes 撰写的优秀文章:[自执行匿名函数或如何编写干净的 Javascript](http://esbueno.noahstokes.com/post/77292606977/self-executing-anonymous-functions-or-how-to-write) 。本文将详细介绍匿名自执行函数。****

## **什么是名称空间？**

简单地说，名称空间只是一段拥有自己空间的代码。当您第一次开始编写 JS 应用程序时，您通常只需键入代码并运行它。这将所有代码放入所谓的 ****全局名称空间**** ，其中包含您正在工作的窗口的所有代码。

但是，如果您将所有代码保存在 ****全局名称空间**** 中，您可能会遇到冲突、命名约定等问题。尤其是在大型 JS 应用/游戏中。

让我们看一个例子，说明只使用 ****全局名称空间**** 来开发游戏是一个坏主意。

那么，假设我们有一个游戏，它一直在追踪玩家的点数:

```
var points = 0;
```

很多游戏追踪积分来增加游戏的竞争优势。只需在脚本中输入这一行，我们就创建了一个名为 *points* 的变量，它可以跟踪用户获得的点数。

这很好，但是假设我们有一个更高级的用户在玩这个游戏。这个用户知道如何查看网页的源代码，因此这个人瞥了一眼 JS 游戏背后的源代码，并意识到 *points* 变量就在 ****全局名称空间**** 中。一个邪恶的假笑降临在他们的脸上，因为他们考虑他们可以达到的点！他们决定，他们不想等着痛打一些坏人，或粉碎一些蘑菇，或你有什么，机架了一堆点。他们现在就要他们的分数！嗯，*万亿分*听起来怎么样？！因此，他们在他们最喜欢的浏览器上加载控制台，并简单地在控制台中键入:

```
points = 34750925489459203859095480917458059034;
```

一旦用户点击 enter 键，游戏中的*点数*变量就会更新。现在，用户在游戏中有了一个真正巨大的，可能不切实际的分数，他可以向他的朋友吹嘘，没有人可能击败他的可怕的分数。

那么，我们如何防止这种情况发生呢？这就是 ****私有名称空间**** 发挥作用的地方。

## **私有名称空间**

****私有命名空间**** 允许开发者把自己的代码分成段(或者 ****命名空间**** )。这些部分彼此独立操作，但仍然可以从 ****全局名称空间**** 中读取和写入。

为了从现实生活场景中把它分解成更简单的术语，让我们假设你在一栋办公楼里工作。你有自己的办公室，你看别人也有自己的办公室。每个办公室都是锁着的，只有拥有这间办公室的人才有这间办公室的钥匙。让我们也假设你有某种新的超级锁，使你的办公室不被大楼里的任何其他人进入。让我们把办公楼本身看作是 ****全局命名空间**** ，把每个办公室看作是 ****私有命名空间**** 。你无权进入任何人的办公室，他们也无权进入你的办公室。但是，你们每个人都可以进入办公大楼的其他地方，无论是喝咖啡、吃零食等等。你们每个人都可以从 ****全局命名空间**** 中抓取东西(或者在那里创建/修改东西)，但是不能从对方的办公室中创建/修改/抓取任何东西；只能从自己的 ****私有命名空间**** /office 中创建/修改/抓取。

## **实现私有命名空间**

那么，我们如何在 JavaScript 中实现这个 ****私有命名空间**** ？使用匿名自执行函数！如果你没有读过诺亚·斯托克斯的文章，[自执行匿名函数或者如何编写干净的 Javascript](http://esbueno.noahstokes.com/post/77292606977/self-executing-anonymous-functions-or-how-to-write) ，请现在读一读。本文将详细介绍匿名自执行函数。

让我们来看看使用前面的那个*点*变量，但是让我们把它分离成一个 ****私有名称空间**** :

```
//The most common way you'll see an anonymous self-executing function
(function () {
    var points = 0;
})();

//This is just one of many more alternative ways to use an anonymous self-executing function
/*
!function () {
    var points = 0;
}();
*/
```

现在，当用户到达该页面时，他们将无法在浏览器中打开控制台并随意更改 points 变量的值！厉害！

## **名称空间和文档交互**

上面的代码只是一个使用匿名自执行函数的例子，它赋予代码自己的 ****私有名称空间**** 。请记住，名称空间只影响 JS 代码(变量/数组/对象等)。)，而不是与文档本身相关的代码。

名称空间中的任何代码仍然可以访问 HTML 文档和 CSS，就像您通常在 ****全局名称空间**** 中一样。看看接下来的两个代码示例。它们都执行相同的功能，没有一个比另一个更有益或更有效。

```
<script type="text/javascript">
    (function () {
        document.querySelector('body').style.background = 'blue';
    })();
</script>
```

与以下内容相同:

```
<script type="text/javascript">
    document.querySelector('body').style.background = 'blue';
</script>
```

请记住，这只是在 JavaScript 应用程序中使用名称空间的一种方式。让你的代码最适合当前的情况。