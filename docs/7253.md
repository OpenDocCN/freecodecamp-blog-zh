# Swift 中的 currying 函数介绍

> 原文：<https://www.freecodecamp.org/news/an-introduction-to-swifts-curried-function-e4b55d10a506/>

当你听到单词“**咖喱**”时，你脑海中首先想到的可能是印度美食的一大部分。印度人用一种非常复杂的香料组合来准备这道菜。他们把所有的配料一个接一个地放进去，做出一道很棒的咖喱菜。

所以主要的诀窍就是把所有的食材一个一个的放进去。同样，在编程中， **currying** 是将一个接受多个参数的函数转换为一次接受一个参数，然后返回一个函数的技术。

但是在任何编程语言中，我们都可以很容易地声明一个一次接受多个参数的函数，大多数程序员都已经习惯了。那么为什么要使用 currying 呢？

除了让您的食物与众不同之外，它还用于允许在特定数据集上链接操作。因此，您可以用一些简单的命令来完成相同的任务，而不是用一些嵌套循环来编写复杂的算法。

它利用了代码的可重用性，你要写的代码越少，错误就越少！你可以用 currying / un-currying 来陈述在构造逻辑中规则的消除和引入。这为它存在的原因提供了一个更优雅的动机。

程序员可以选择用两种等价的方式来声明每个函数。在 currying 中，一个函数只接受一个参数并返回一个函数。然后返回的函数接受一个参数并返回最终结果。

所以在每个程序员的心里，可能都会有一个疑问:为什么我们会走更复杂的方向，就是先写一个返回函数的函数，然后再调用第二个函数？

让我们首先来看看更流行的函数定义方式:

```
func multiply1(_ x: Int, _ y: Int) -> Int {
  return x*y
}
```

上面的函数接受两个参数并返回它们的乘法结果。

现在我们可以用不同的方式定义同一个函数:

```
func multiply2(_ x: Int) -> (Int) -> Int {
  return { $0 * x }
}
```

这两个函数的区别在于它们的调用方式:

```
multiply1(3, 4) //returns 12
```

```
multiply2(3)(4) //returns 12
```

在第一个函数中，我们同时传递两个参数。在第二个函数中，我们传递第一个参数(它本身返回一个函数)，然后传递第二个参数。

实际上，这两个函数在这里做同样的事情。这两个例子展示了我们如何将一个一次接受多个参数的函数转换成一系列一次接受一个参数的函数。这就是**巴结**的过程。所以 ***multiply2*** 功能就是 ***multiply1*** 的翻版。

我们可以将第二个函数表示为如下函数链:

```
//Benefit: 1
```

```
multiply2(3)(multiply2(4)(multiply2(5)(6))) //returns 360
```

```
//Benefit: 2
```

```
let multiplier = multiply2(2)
```

```
let integerList = 1...100
```

```
let x = integerList.map(multiplier) //returns [2, 4, 6, 8, 10, 12 ...]
```

这是 curried 函数的一些好处。你总是可以通过一些简单的步骤将操作串联起来。太棒了，对吧？

让我们看另一个例子:

现在让我们为周日创建一条**晨跑**，并在其中添加 100 步。

所以这里我们基本上是在实例本身上调用***【addSteps()***实例方法。

但是我们也可以像这样用咖喱做同样的事情:

这和我们上面做的是一样的。首先，我们将 ***addSteps*** 和 ***minusSteps*** 方法赋给两个不同的变量。在这个阶段，我们没有调用任何函数。我们刚刚引用了函数，就像函数指针一样。在下一步中，我们实际上正在调用存储在 ***stepIncreaser*** 和***step decreaser***中的函数。

现在，***step accelerator***接受一个参数，即 **MorningWalk** 实例，并返回一个函数，其类型为 ***(Int) - >*** ()。所以返回的函数接受一个 Int 类型的参数，不返回任何内容。这里，返回的函数 a ***和 addStep*** s()函数具有相同类型的方法签名。同样的概念也适用于 t***he step decerea***ser。

所以，最后，我们可以说 Swift 中的一个实例方法也是一个类型方法。它将该类的一个实例作为参数并返回一个函数，然后该函数将接受其他参数并返回/更新最终结果。

我们也可以这样调用上面的方法:

#### 结论

在本文中，我们有一个带有多个参数的函数。我们把它转换成一个函数，每次只接受一个参数，然后产生另一个函数，直到没有参数了。这给了我们最终的结果。所以我们可以说，函数只不过是普通的值，可以由其他函数产生和返回。

现在，您可以在日常编程任务中尝试一些新的有趣的东西了！