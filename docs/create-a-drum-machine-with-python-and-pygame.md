# 用 Python 和 Pygame 创建一个鼓机

> 原文：<https://www.freecodecamp.org/news/create-a-drum-machine-with-python-and-pygame/>

鼓机是一个有趣的项目，可以用来练习 Python 技能。

我们刚刚在 freeCodeCamp.org YouTube 频道上发布了一个完整的课程，将教你如何使用 Python 和 Pygame 创建一个鼓机项目。

皮特·勒马斯特开设了这门课程。Pete 在他自己的频道上创建了一堆教程，现在已经与 freeCodeCamp 频道分享了这个课程。

首先，视频展示了这个项目，然后它进入了一个详细的教程，显示如何添加一堆功能逐行。

本课程面向初学者和有经验的开发人员。它涵盖了 Python 和面向对象的编程概念，包括嵌套 for 循环、函数、使用音频文件生成声音以及保存/读取数据。

本课程包括以下几个部分:

*   项目展示
*   设置应用程序
*   画板
*   打开和关闭音符
*   添加移动节拍跟踪器
*   添加声音并让它们播放！
*   添加播放/暂停功能
*   调整总节拍和速度
*   打开或关闭仪器
*   史诗断水内容
*   绘制保存和加载按钮
*   添加清除/复位板功能
*   绘制保存和加载菜单
*   保存节拍信息
*   载入保存的节拍
*   清理和最终故障排除

观看 freeCodeCamp.org YouTube 频道的全部课程(3 小时观看)。

[https://www.youtube.com/embed/F3J3PZj0zi0?feature=oembed](https://www.youtube.com/embed/F3J3PZj0zi0?feature=oembed)

## 副本

(自动生成)

您将了解如何使用 Python 和 Pygame 从头开始创建这个很酷的 beat maker 应用程序。

对于初学者和有经验的开发人员来说，这都是一个伟大的项目。

皮特·勒马斯特首先创建了这个课程，皮特将展示这个项目。

然后他会教你如何一行一行地编写项目代码，检查描述中你需要的资产的链接，以及最终的代码。

祝这个项目好运。

欢迎对您在本教程中学到的任何东西发表评论。

好的，我非常兴奋能向你们展示这个项目展示。

这是我做过的最酷的项目之一。

我认为你也可以很享受建造类似的东西。

因此，这个应用程序的主要功能包括能够快速创建和编辑全新的节拍，以及修改循环播放速度和该模式中节拍总数的能力。

底部的按钮让您能够快速暂停或继续播放节拍，或者当您准备好重新开始时清除整个板。您可以关闭乐器的整个通道，以便您可以编辑节拍的某些部分，同时保持整个播放。

然后，当你得到你真正喜欢的东西时，保存菜单让你以你选择的名字保存它，你可以在以后加载它，并重新访问你最喜欢的创作。这个工具让你创造一些真正独特的声音，我希望你喜欢这个项目。

因此，跟随教程，获取代码，如果你想从下面的描述链接。

留下评论，让我知道你想在这种项目中看到什么额外的功能。

或者你将来想在这个频道上看到什么。

如果你喜欢这个视频，一定要在视频上留下一个赞，并订阅更多精彩内容的频道。

现在让我们进入教程。

好吧，非常兴奋能给你们带来这个教程。

但这是一个漫长的过程。

所以让我们开始吧。

我会边做边解释我们在做什么。

所以第一步是导入 Pygame。

如果你熟悉 pip 模块，那么你可以使用 PIP 并做 PIP 安装 PI 游戏。

或者，如果你有一个 IDE，一个很好的 IDE，比如我使用的 pi charm，那么你通常可以像这样做一个 import 语句。

只要它能识别你的模块名，它就会帮你导入。

然后我会说，因为这是一个严重的音乐主题的应用程序，进口混音器的权利。

所以 Pygame dot mixer 是一种 pi 游戏相关的音效和音乐处理工具。

所以我们要从一开始就这么做。

然后我们要做 pygame.in 来初始化它，这需要字体和使用很多内置的功能。

好的，这就是我们要开始的方式。

接下来，让我们设置我们的屏幕。

因为这个节拍制作软件，如果你仔细想想，它有点像你想要和你的实际屏幕一样的尺寸，宽于高，因为我们预计节拍会在屏幕上延伸。

所以我用 1400 乘 800。

我有点喜欢这样，但是如果你想的话，你可以在风格上做些改变。

我刚刚定义了一些 RGB 颜色，因为我知道我做的每一个应用程序，我会使用黑色，白色和一些灰色，可能有 50 种。

所以我就是喜欢黑色，白色，灰色。

然后，当我在这个项目中添加其他颜色时，我肯定会在这个项目中使用红色或者金色。

我在这里把它们加起来。

但是我们现在不需要这个。

所以我们继续吧。

接下来，我们将专注于快速创建屏幕。

所以是 Pygame 点显示，点设置模式，设置模式。

然后在方括号中加上逗号的高度。

我们走吧。

你可以在这里直接输入这些数字，你不必把它们放在变量里。

这是更好的练习。

而且如果以后想改的话，追查起来稍微容易一点。

从技术上来说，这是我喜欢做的另一件事，它被认为是一个可选的步骤。

但是我总是喜欢设置标题。

我称之为“节拍制造者”。

如果你愿意，你可以叫它别的名字。

然后我要在这里设置一个字体，我称之为 label font，因为它会大一点。

但是我总是在开始的时候创建一个文本，因为一旦你在游戏中需要文本，你真的会想要初始化它。

否则，您只能稍后再回来执行这一步。

所以我在几乎每个项目中都这么说，但是如果你不想去得到一个 ttf 文件，几乎每个人的计算机和 pi 游戏的安装都会附带这个，你可以在这里看到免费的无粗体 TTF。

这就像一个内置的。

所以你可以用那个，如果你只是想跟着感觉走，而且你不太在乎风格，我去网上抓了一个免费的，就叫 Roboto bold dot TTF。

你可以在这里看到我的文件结构。

所以，如果你想为你的项目获取一种字体，并使它成为你自己的，只需把文件放在那里，然后像这样调用它。

好吧。

这里你唯一需要给出的是字体大小。

所以我们给它 32。

那就是，我们也要做 FPS。

这是我们的帧速率，我们将设置一个计时器，它将控制我们游戏的速度，这对于一个基于音乐的应用程序来说非常重要。

所以我们会做 timer = pi 游戏 dot time dot clock，有些人会叫这个 clock，有些人会叫它 time，有些人会直接在游戏循环中做这个。

我不喜欢那样做。

但是要确保你有这方面的东西。

让我们继续创建我们所谓的主游戏循环。

所以我们就在这下面。

显然，在我们的变量库和主游戏循环之间会有很多东西。

但是为了让它开始，我们要做这个。

所以我们将这个变量 run 设置为 true。

然后我们要建立一个 while 循环，这就是 wall run。

跑步时你要做的第一件事就是以你的帧速率计时。

这意味着只要 run 为真，我们就要每秒执行这段代码 60 次。

所以这就是 FPS 的目的。

因为我们的许多功能每秒钟都将进入下一个节拍，你知道，每半秒钟，无论什么。

这个定时器点滴答对这个应用程序来说超级重要。

所以帧率，你要保持在 60。

如果没有，如果你出于某种原因使用不同的帧速率，请确保当我们稍后到达数学部分时，我们计算在数学中你使用你的帧速率每分钟多少次，好的，那么我们将进行屏幕点填充。

我们要把背景涂成黑色，我觉得这看起来很不错。

让我们继续设置我一直称之为事件处理的东西，但它基本上只是获取所有实际发生在您的计算机上的事件。

这是 PI 博弈中的事件。

这里的这个小应用程序，我们放入的每个代码，我们放入 for 循环的所有代码，将会检查键盘上的所有按键，鼠标的移动，计算机可以处理的任何其他事件，都将会放入 PI Game dot event dot get 中的 event。

你要设置的第一个是，如果事件点类型等于，游戏点退出，就像这样。

如果是这样的话，我们就希望 run 等于 false。

这就是我们现在要做的。

但我们肯定会在以后加入很多功能。

好的，除此之外，我们想做 Pygame 点显示显示点翻转。

这就把所有的东西都扔到了屏幕上。

然后我们要做的最后一件事就是像这样放弃。

所以在任何其他代码之外，它可能会到达那个点。

好吧，重新格式化。

现在我们应该得到我们项目的外壳，它马上就关闭了，因为我说了 robot bold，而文件是 Roboto bold。

所以你走吧。

好了，我们开始了，我们有了轮廓。

我觉得那看起来很可爱。

但是我们继续吧。

现在让我们开始在黑板上画图。

所以在这个项目中，我们会很早就听到声音。

我会回顾一下它们是如何使用的。

因为显然声音超级重要。

但首先，我要设置一个函数，我称之为 draw grid，它会把所有静态的东西画到屏幕上。

所以我要在我的屏幕下方做点填充，我把它叫做绘制网格。

然后我们会在中间出现，就像我说的，变量库和主游戏循环。

我将定义这个可变绘制网格，我们将开始一起构建它。

不好意思。

好的，让我们从画格子开始，想象一下我们在这个游戏中的空间。

所以我会调用左边的菜单，左边的框。

如果你曾经见过像这种应用程序那样的节拍布局。

这是你拥有乐器的地方，有时你可以打开或关闭音轨，或者调节特定乐器的音量。

所以我们将创建一个左菜单，我称之为左框，我们将它放在屏幕上，我们将它设置为灰色。

这就是为什么我一开始称之为颜色。

然后我们从左上角开始。

所以在拐角处，它会有 200 宽。

我们会让它达到屏幕的最大高度。

这是四个参数，你给矩形，x 和 y 坐标在盒子的左上角，然后是宽度，然后是高度。

之后，这些都是可选的。

这就足够了，让我看看我是否运行它，我们得到这个左边的盒子，看起来很好。

但是现在如果我们增加一个参数，我们会说我们想要的边的宽度，这将使它成为一个中空的物体。

所以它的宽度是 5。

我认为这是一个更好的左菜单。

个人喜好，如果你愿意，你可以把它留得很厚。

但是，我们还要添加一个底部菜单，我称之为底部框，我们要去 pi Game dot draw dot rec，这是我们要放置玩家控件的地方，比如开始和停止游戏循环。

所以就像 play pause，我猜我说游戏，你理解它是一个 app。

但是我们会像暂停播放一样，然后像保存和加载一样。

因此，保存您的 B 或载入先前保存的节拍，或调整速度，或在您的应用程序中总共有多少节拍的选项，会将它们放在这个底部的框中。

所以我们把这个屏幕叫做灰色。

然后对于这个矩形，我们把它放在底部。

实际上，让我们把它定在 200 英尺高。

所以身高减去 200。

这将是开始的位置。

然后，我们将使它与屏幕的全宽和 200 高。

让我们也用五个来做这个洞。

如果我这样做，你会看到，现在我们会有这种奇怪的矩形，也许你喜欢这个样子，也许你不喜欢，我会拿起我左边的盒子，我决定我也要把它停在 200 高。

所以现在我们不会在底部有交叉重叠。

我觉得那看起来很不错。

所以我们会继续前进。

接下来我想做的是开始创造节拍。

所以我们要把它做成可以调节的，这里有多少个盒子。

但是，首先，我们将对它进行设置，这样我们就可以在屏幕上看到一些内容。

所以我要说的是，我要在这里创建一个小的空变量，我称之为盒子，就像这样。

我要创建一个小小的颜色库。

所以颜色等于灰色，白色，灰色。

有些东西，我们暂时不会接触。

所以如果你不想一行一行地跟着读，我想你现在可以跳过它。

但是我们会回来的。

抱歉，灰色，白色，灰色。

所以我们要做这些。

但是现在我们想做的是考虑一套架子鼓，前三种最重要的乐器是踩镲、小军鼓和鼓。

所以我要开始做的是为他们创造空间。

所以我要做的第一件事就是把它叫做 hi hat。

txt。

现在我们称之为标签字体。

它是标签字体点字体，或者不好意思，标签字体点渲染，我们已经把它定义为一个字体，然后你给它文本，对于 hi hat，我们只说 hi hat，这应该有意义。

第二个就像布尔型的反别名。

以我的经验来看总是这样，我其实也不知道。

我不知道哪种情况下不会这样。

然后当我们有能力打开或关闭一个频道时。

所以，你设置了一个节拍，你想禁用高帽，我们将使这成为一个变量。

所以我们会回到这个话题。

但现在，我只想把它弄成白色，以免早期的步骤过于复杂。

我们要把它画在屏幕上。

所以屏幕 dotablit。

你给它你想要的文本。

所以我们希望在屏幕上绘制高帽文本。

这需要一个 X 和 Y 坐标。

我要把它向下移动一点，从顶角向右移动一点，尽管这是我们的第一个。

这就是我们要看到文字的全部内容。

所以我觉得这看起来很不错。

现在让我们继续，让我们基本上拿着这个东西，C Ctrl V，让我们做圈套和踢腿。

所以，嗨有 txt。

我们将做响弦特克斯，接下来，响弦和响弦文字。

然后我们要做的是将它向下移动 100，所以我相信我们将游戏设置为 800 高，底部菜单是 200 高，我们将在这里放置总共 6 个乐器。

所以我们要做一个踩镲，小军鼓，鼓，敲钹，然后我们要做一个地板时间，我们要做一个拍手。

这是六种最基本的节拍。

如果你愿意，你可以拿起你自己的共鸣板。

我们稍后会再讨论这个问题。

想发出什么声音就发出什么声音，你想制造多少种乐器都可以。

不过，我会给你一些如何设置的建议。

所以那将是圈套和嗨帽。

让我们继续做接下来的两个，我们称之为 kick，因为这是一个 kick 鼓，但如果你愿意，你可以叫它 bass。

管它呢，我们会在课文上说低音鼓，这可能是人们更熟悉的。

我们会说踢文本。

好吧。

让我们做后踢，让我们做撞击钹，撞击，撞击文本。

我们将它们每一个向下移动 100。

所以 200 300。

我们还会有两个孩子。

所以我们有低音鼓和碰撞。

然后我们会想要鼓掌。

还有地板汤姆。

所以鼓掌吧。

还有地板汤姆。

好吧。

所以我们要去 334 3530。

现在，让我们画这个看看。

好吧，看起来不错。

我认为有意义的是在它们之间加一条线来描绘它们。

那么我们为什么不把它们也画出来，在这篇文章之后，我们就画出范围内的 I。

我想我们需要六个，因为有六种乐器。

对于区间六的 I 来说。

我们将做这个 Pygame dot draw dot line 屏幕将使它变成灰色。

所以它和边缘融为一体。

我们从零开始。

对于高度，我们希望它是 I 乘以 100。

所以我乘以 100。

但是因为我们不希望第一个在最上面，因为盒子已经从最上面开始了，对于 for 循环，它将从 0 开始，然后到 5，这就是 for 循环和 Python 的工作方式。

对于数字 6 来说，它们不是边包含的，所以它是 012345。

但是我们希望这些线被画成 100 200 300 400 500。

而且我估计我们技术上不需要 600，但是应该不会有什么影响。

所以从起点开始，我做 0，我乘以 100 加上 100，我想会好一点。

或者你可以在范围内增加一个，我想这没关系。

好的，然后结束位置，我们要它走。

我想想，到 200。

对，这就是我们做菜单的宽度。

然后我们想要同样的 y 坐标，所以这是一条垂直线。

让我们复制它。

把它放在这里。

所有权利

因为菜单的边是五条，所以让我们把这两行也变成五行。

让我们看看这是否能给我们所有乐器之间的联系。

我做了一件蠢事，我不知道为什么我在这里有这个方括号，如果你在画线，你不需要方括号。

所以行参数是屏幕颜色的开始位置，作为一个 X 和 Y 坐标元组，位置作为一个坐标元组。

然后是线条粗细。

让我们看看 5 是不是有点太厚了。

没关系，让我们看看它看起来是否更好，因为这不是我们菜单的外部边缘，可能会更好看。

是的，我想要三个以上。

你可以做任何你想做的事情，如果你想变得更厚，那就变得更厚。

但现在对我来说这很好。

现在，我认为我们想要做的是，我们想要开始考虑这个游戏将如何工作，这个应用程序将如何根据节拍工作。

所以我们会有一个变量，在开始的节拍中设置。

我们就让它等于八。

这是我们可以做的非常简单的基本设置。

但我们需要在这个应用程序中使用 beats，来检查我们需要为每个乐器绘制多少个框。

为此我们在音域中为 I 做，然后节拍。

让我们创建一个变量，我称之为工具。

我们将在整个过程中多次使用它，只是为了检查有多少行。

所以我想如果你愿意，你可以把这个变量叫做行。

我会说是乐器，因为这里有六种不同的声音。

我还将不再使用范围 6，而是使用范围内的 I 仪器。

但我这样做的原因是因为我们正在为离子范围的跳动创建一个网格。

然后对于射程内的 J。

这是仪器。

这是另一种方式，如果你有兴趣创建这个游戏，那么我会说游戏可能贯穿始终，因为这个模块被称为 PI 游戏，我做了很多游戏。

但是，如果你想添加更多的乐器，我们现在创建它，你真正要做的是调整每个乐器的厚度。

因此，你可以让它成为我们拥有的 600 个垂直空间的函数，你可以给我 50 个而不是 100 个，然后有 12 个仪器完全由你决定。

但是我们在这里创建了嵌套的 for 循环。

所以对于铁音域拍，然后对于 J 音域乐器，我们要做的是，我们会说，我们要画这个矩形等于圆周率游戏点画点矩形。

我们会把它放在屏幕上。

现在，我也要把它们变成灰色。

我们要做，让我看看，我们要做它们的厚度。

我在努力思考，我不想拼错，我们希望它们的厚度是我们希望起始位置是 AI。

这将是我们的 b，这将是 x，起始位置将是 Ai 倍，然后我们将需要总宽度，我们可以为节拍，这是屏幕的宽度减去 200。

所以我们有这个屏幕的宽度，减去 200，像这样把它放在括号里，然后我们要用一个叫做地板划分的东西。

我们将根据节拍进行自由体操。

所以这个楼层划分只是确定它是一个整数，因为对于 x&y 像素位置，我猜它不完全是像素位置，但它必须是一个整数。

比方说，现在这个数是 1200 除以 8，因为我们有多少拍。

这将从 1200 除以 8 开始，也就是 150。

但如果出于某种原因，它不像是不均匀的除法，这将确保它保持一个整数。

好吧。

然后我们想先把它向右移动一点。

和往常一样，我说过，对于 for 循环，这是从零开始的，但我们不想让它从零开始，所以我们要加上第一个 200。

然后我猜它是一个 5 厚的矩形，所以我们要把第一个 205 加上去。

而这只是我们的 x 起始位置。

所以这个矩形需要一些数学知识，所以请耐心等待。

对于 whi 的起始位置来说，它稍微容易一些，因为我们没有顶级菜单，所以它将是 j 乘以 100。

在这里，它实际上是好的，从零开始，我们只做+5，因为我们要给它一个宽度为 5 的边界，不好意思。

所以实际上，我们不需要在顶部有边框，它可以正对着顶部，这个也可以，正对着菜单。

所以我们只做正 200，然后 j 乘以 100。

然后对于实际的矩形，我们会说，对不起，对于实际的宽度，我们希望它是负 200。

这一点非常重要，因为我们的应用程序的一大功能是可以在前端进行调整。

所以，再一次，用宽度减去 200 地板除以节拍，这将总是给你最大可能的宽度，但仍然使每个盒子均匀。

然后对于身高。

因为我们有六个仪器，我们可以这样做。

我们可以做高度除以仪器除以仪器，但这并不是高度除以我的仪器，因为我们有一个 200 宽 200 高，底部菜单，所以它将是高度减去 200 除以仪器。

你真的应该把这也变成地板区。

但是因为这是 800，我们知道 800 减去 200 等于 600。

我们有六个乐器，这实际上和在这里放一个 100 是一样的。

所以如果你想把高度设为 100。

去做吧。

如果你明白发生了什么，你想做这个数学，因为你想再次可伸缩，那么尽一切办法去做。

好吧，让我们看看我们要做什么。

因为这个格式看起来不太对。

我想我只需要关闭括号。

我要把这里缩小一点，因为这条线是连续的。

让我把它复制到新的一行。

我们走吧。

让我们把它做成宽度为 5 的圆角矩形。

那些看起来很好的声明成立了。

让我们看看为什么这里会出现错误。

我可能只是在格式上做了些傻事。

哦，我的右括号太多了。

好吧，我没疯。

抱歉，进行了一点故障排除。

只是有时候你在那里放了太多的括号。

让我们快速检查一下这些矩形，因为我们在做一些高等数学。

但是一旦设置正确，它将立即扩展到整个应用程序。

所以我们从节拍开始。

所以如果有八拍，就从 200 拍开始。

然后它会计算屏幕上有多少空间。

它会自动更新，尽可能多地占用空间。

然后它会根据乐器的数量做同样的事情，我们会把它做成圆角矩形，这就是第二个五的用途。

我们要把它做成五层厚，这样它应该是中空的矩形。

现在，让我们看看，因为我们应该有八个节拍，手指交叉，这并不坏，我们现在每个乐器有八个节拍，它们充满了整个屏幕。

这里看起来很不错。

所以你可以看到我们得到了这个充实的雏形，我认为看起来很不错。

所以让我们看看，我们会回来，我们稍后会改进这种风格，我认为重要的是我们开始看看如何获得这种功能，因为这将是非常令人满意的，如果我们能尽早开始实施这一点。

所以我想我们要做的是，因为你会记得在开始的时候，我为盒子创建了这个空列表。

当我们遍历并创建所有这些矩形时，我们要做的是向这个我称为框的列表添加一些信息，因为我们需要从函数中获取这些信息，这样我们就可以检查这些东西是否被点击了。

所以我们要做的是，每次我们调用 draw grid 时，我们要清空这里的 box 变量，我们要把它清空。

然后我们要在屏幕上画出所有这些矩形。

然后我们会返回这个列表中的一些信息。

所以我希望它是，你可以把它想象成一个元组。

其中在元组内部，两个参数之一是另一个元组。

如果这样想对你来说太混乱了，我们返回一些东西，我们返回每个节拍的矩形，但是我们也返回它的 X 和 Y 坐标。

所以我们返回的是 b，也就是眼睛，然后我们也返回它所在的行，也就是 JE，然后我们实际上返回的是整个矩形。

我们这样做的原因是因为我们要用它来进行碰撞检测，看看它是否被点击了。

然后我们下一步要做的就是返回我们刚刚讨论过的 box 变量。

所以我们什么时候叫画格子。

让我把它重新格式化，这样它就像有多少个空格。

所以当我们在这里调用 draw grid 时，我们需要从它那里取回盒子。

所以让我们回到我们的游戏循环。

我们得到盒子的地方就在这里。

好吧。

我们需要做的是使用框列表来检查并查看我们是否单击了任何框。

这还不算太糟，我们只需要添加一些新的碰撞检测。

所以我们要做的是，如果事件点类型等于 pi，博弈点退出，我们就会得到这个结果。

如果事件点类型等于，我们就这么做，然后这一个将是 pi 游戏点鼠标按钮按下，这就是如果你点击按钮按下，还没有释放它，所以在 Pygame 中有鼠标按钮按下和鼠标按钮按下。

这就是我们将要开始的。

我们将创建一个循环来遍历整个列表。

所以我们说 I 在范围内，然后是盒子的长度。

我们之所以把它做成盒子的长度是因为这个列表，这也意味着实际上在一开始，这是很重要的事情，任何时候你创建一个变量。

即使它是从函数中得到的，如果你要在主循环中使用它，你需要在某个地方初始化它，否则它会说它在存在之前就被引用了。

所以对于音域中的 I，然后是方框的长度，原因是每次我们更新总节拍，总节拍，无论是从 8 到 12，到 16 到 20，等等，列表都会变得明显更长或更短。

因此，这必须是可扩展的，以检查整个事情。

对于 I，在框的长度范围内，如果是框，这里我们必须非常小心，处理每一项的方式。

这意味着我们要遍历我们定义的盒子列表，我们在 I 处检查每个盒子，这将调用整个元组，矩形，坐标，然后我们检查 0。

这就是我们存储在那里的矩形。

那就是。

我们这样做的原因是因为现在我们可以使用内置于 collide rect 函数中的 PI 游戏，这是一个非常有用的内置工具，它可以检查 X 和 Y 坐标，在本例中是鼠标。

它正在检查是否与矩形相撞。

所以在这种情况下，如果 collide rect 与事件点 pause，那么事件点 pause 就是鼠标按钮按下时鼠标所在的位置。

当我们点击的时候，我们的鼠标所在的位置，如果它与它碰撞，这里已经检查我们是否点击了我们刚刚定义的任何矩形，所以我们正在创建一个非常强大的函数。

我们会说 coords 等于 I 处的方框，然后是 1。

我这样做的原因是因为这比用方框，1，0，然后方框 1，1 这样引用 x&y 坐标要简单一点，这只是给我一个临时变量，叫做 coords，我们将在下面用它来跟踪某个东西是否被主动点击了。

好的，让我们继续做我们要做的。

这是我们需要创建一个新列表的地方。

因为我们要在坐标上点击。

我想，实际上，我们必须小心，我们先放 I，然后放 J，J 是它所在的行。

所以实际上，我们想要坐标 1，和弦 0。

我想我漏了一个盒子。

我们走吧。

好的，我们要把它设置成它的反义词。

所以让我们继续创建点击列表。

我之所以说 list，是因为它会记录，哪些变量，哪些位被选择了，或者没有被选择。

所以在最开始，我要创建这个列表。

我们要用这样的方式来做，我们定义了基本上是一个完整的负面清单。

所以我选择负一表示它当前不活动，一表示它当前活动。

我认为那是做这件事最简单的方法。

我想你马上就会明白为什么了。

我们这么做吧，假设点击了。

这是我们列出的哪些节拍被选中，哪些没有。

我们说点击下划线是因为当你在这里做的时候，你并不真的需要像 AI 这样的变量来引用。

所以我们只做音域节拍中的下划线。

这将首先创建一个这样大小的列表，对于下划线和音域节拍也是如此，然后对于音域乐器中的下划线也是如此。

好的，游戏一开始就会创建一个列表，因为节拍最初是八个，乐器是六个，所以在一个列表中会有八个负一，然后会有六行八个负一的列表。

所以它创建了一个非常有用的数组，本质上是一个列表的列表，最初都是负的。

我这样做的原因是，当你点击一个方框时，我们可以把它设置为等于负一，所以我们把它乘以负一。

所以如果是 1，它会变成负 1，但如果是负 1，它会变成 1。

我们这样做的原因是我们可以用这个列表来画出所有的活动屏幕所有的活动矩形。

所以如果他们是一，这意味着他们被选中了，会有绿色。

这是一种非常通用的设置方式。

但这意味着我们必须将点击的列表传递到我们的绘制网格中。

所以我们只要来到这里，画一个网格，然后传入点击列表，就可以了。

这又不是什么不方便的事。

我们要做的是，我们会上来，我们会说，现在记住，我说过我们要检查这些矩形中的每一个，我们会根据它们是否活动来调整颜色。

所以我要在这里多加几个颜色。

我要说绿色等于 R，G，B，z。

只是所有的绿色 0255 零。

实际上，现在会播放它，因为我们只是要让它处于活动状态，然后我们会让它绘制绿色。

好吧。

我们需要确保我们收到的是被点击的参数。

有时在你的函数内部，使用不同的变量名并不是一个坏主意，比如我知道我用了盒子，但是因为我们每次都重置它，这并不是一个问题。

但是我们没有覆盖 draw 函数中的 clicked，我们只是在使用它。

所以我们在这里要做的是，我们下来说，嘟，嘟，嘟，盒子等于颜色。

好吧，让我们在范围内做这个，节拍。

然后对于 J 和 range 仪器，我们在这里添加一些东西，就是说，如果点击了，这将再次是，J，然后是 I，因为第一项将是它所在的行，然后 AI 将是它所在的列。

我们会说，如果它等于负一，那么我们现在用的颜色就是灰色，因为它是不活跃的。

但是我们要说的是 else，你可以说是 l f。

你可以检查点击量是否等于负一。

但是我们会说其他颜色会等于绿色。

好吧。

现在我实际上要保留这个，因为这个矩形本质上是矩形的轮廓。

没有理由去破坏它。

除了我想在这里放一些更有风格的东西。

所以我们不需要第二个。

好吧，让我们做一个彩色的，我们实际上引用的矩形，所以我们把它留在这里。

但是接下来我们要做的是，在屏幕上，用我们的颜色说好的，然后我们希望这个是纯色的。

如果你希望它是一个圆角矩形，我认为会很好看，但是你希望它是实心的，那么就把这个参数设为 0，这样它就实心了。

好吧。

现在让我们看看我们还能做什么。

既然我们在这里，我想也许我会喜欢像金子一样做的想法，只是为了提升我们的风格一点点。

既然我们在这里，我们刚刚制作了一个绿色，我也将制作一个金色，我将这个 RGB 提前到 12 175 55 到 12 175 55。

如果你想用一种颜色，只需谷歌 RGB 值，然后你的颜色名称，你就可以在互联网上选择一切。

找到 RGB 并不难。

好的，现在让我们继续移动我们刚刚制作的这个矩形，这是一个特定的颜色，让我们将这个移动到这个外部矩形的参数内。

这是我们移动它们的地方，我们把这个向下移动五步，再移动五步，然后我们把它变成这个宽度，我想是负 10。

所以我们基本上是把它放在我们之前做的框架里面。

我们也把这个高度减 10，因为我们把它放在一个 10 乘 10 的框架里。

好吧，我们把这个留下，就这个吧，也许是黑色的。

让我们把这个金框放在里面。

所以我做了三层效果。

这纯粹是为了时尚。

所以很抱歉，如果你不喜欢这个弯路，但我认为它真的增加了项目的外观。

我们要做的是做一个金色的，正式的 5 乘 5，然后我们在里面放一根黑色的金属丝。

所以让我们在做得太多而忽略了项目之前，先把它加载上来。

但是你看到的是这些都没有被点击过。

因此，我目前拥有的是一个五边的金色边框，每个边框周围只有两层厚度的黑色边框，但它给了它一种非常酷的深度。

我想。

现在让我们试着点击一下。

好吧，我们有一个错误。

对象必须是被破坏的样式事件。

我完全同意。

让我们看看我们在这里做什么。

所以我们传入矩形 Pygame dot draw dot rect，对，应该是对的。

然后我们返回盒子做四个盒子点附加。

看起来不错。

哦，愚蠢的错误，因为我在这个位置使用了 collide rect，但它需要是 collide point，因为我们要检查的是方框处的矩形是否为零，它是否与我们的鼠标单击相冲突，这只是一个点，所以它需要是 collide point，而不是 collide rekt。

让我们加载它，并尝试现在点击一些。

好了，我们开始吧。

我们有绿色的帽子，很可爱。

我可以选择多个。

现在我可以把它关掉了吗？是的，我可以。

让我们看看我是否能从所有的地方选择它们。

是啊，所以这是完美的。

这就是我们想要的功能。

现在你可能意识到了，我们还没有任何动作来真正弹奏音符。

如果我们已经选择了它们，我保证我们已经接近真正拥有声音了，这才是真正有趣的部分。

但是我们需要做的是，我们需要做一些数学计算，来计算每一拍应该有多长。

所以我要做的就是到这里来，创建一个变量。

我称之为节拍长度。

什么将等于，这是我在开始提到的，如果你使用不同的帧速率，那么这需要调整更多一点。

因此，我们还没有创建一个名为 BPM 的变量，但这将是这个游戏的另一部分。

所以我们会说每分钟心跳数，最初是 240 次，也就是每秒 4 次，非常快。

但这就是我们一开始要用的。

这意味着我们的游戏看到的每个单独节拍的长度将是 3600 除以 BPM，如果你必须这样想，你可以认为它是每秒帧数乘以 60，因为每分钟有 60 秒，对吗？如果你使用 60 的帧速率，那就是 60 乘以 60，也就是 3600。

然后我们做地板除法，以确保我们得到我们想要的每分钟多少拍的整数。

这是每分钟点击的次数，本质上是每分钟循环的次数，while 循环在运行。

所以每一次心跳都是这个数字除以每分钟应该的心跳次数。

所以我们要做的就是说，如果玩的话，我们就这么做。

所以我们要创建一个变量。

现在，我们会一直玩下去。

一开始，我们将 playing 设置为 true，但后来当我们设置暂停功能时，最好有一个变量来控制我们是否正在播放。

我们说，如果演奏，那么我们要做的是创建一个新变量，如果是活跃长度，那么我们当前所处的节拍已经活跃了多长时间。

所以当游戏开始的时候，我们会把它初始化为 0。

当我们开始弹奏时，有效长度等于零，如果在弹奏时弹奏，如果有效长度小于节拍长度，那么我们只需在有效长度上加 1。

因此，我们有这个可变的活动长度，在这里我们跟踪我们当前的节拍。

每当我们不在节拍长度时，我们就加 1。

但接下来我们要说的是别的。

这意味着节拍已经达到了它应该达到的长度。

为了简单的计算，如果我们说我们想要每分钟 60 拍，每秒一次，我们应该移动到下一拍。

所以我们说 else，这将使有效长度等于零。

现在我们需要检查我们是否处于一个周期的尽头，我们需要归零或者我们是否可以继续前进。

我们要做的是创建另一个变量，我们称之为主动节拍。

我们会说，如果主动节拍小于总节拍减 1，这意味着我们还没有结束，那么我们会给主动节拍加 1。

它给我的是活跃的节拍，而不是活跃的长度。

它给了我一个红色的下划线，因为我们也没有初始化它。

所以一开始，我们称之为主动第一拍。

你真的不想从零开始，因为即使在代码编程中，你几乎总是从零开始，对于一个节拍来说，在任何一点都为零都没有意义，你总是在节拍 12341234 上。

好的，那么活跃的节拍，我们加一个。

然后我们将使用这个变量，它只是一个开关变量。

我们把它设为真。

我们马上就要用它来弹奏那个节拍上的音符。

所以别的，那我们就随便加，然后，哎呦。

Else 意为 else 反对这个 if 语句，如果 active b 小于或等于 beats 减一。

所以我们会说 else，因为理论上，如果节拍是 24 拍，或者 30 拍中的 26 拍，但你决定减少总节拍数，那么只说 else 是行不通的。如果主动节拍等于节拍，我们想说 else 涵盖任何场景，这意味着我们没有到达循环的终点。

所以这意味着我们走得太远了。

将活动拍回设置为零，但拍变仍将等于真。

好的，那么，让我们继续，我想这就是我们要做的，让它动起来。

让我们继续，同样的节拍，在开始的时候，变化等于真实。

因为从技术上来说，一旦应用程序加载完毕，你就会想要打开它。

现在我们必须对这个活跃的节拍变量做些什么，我们想在屏幕上画点东西来显示我们的节拍。

好的，我们现在要做的就是说，我们要传递我们所在的节拍。

所以我们已经在使用。

让我们看看，是的，我们已经在使用来自外界的点击变量。

所以我们只需要点击一下。

我们也会画出活跃的节拍。

好的，我想用一种新的颜色，让它看起来更突出。

我将创建一种充满活力的，不完全是霓虹蓝，我就叫它蓝色，因为它将是我的应用程序中唯一的东西，我将使蓝色。

但是为了得到我正在做的这个颜色，它很像蓝绿色或浅绿色，它将会有很多 G 和 b。

所以它，它就像一种霓虹蓝，但我还是叫它蓝色吧。

不管怎样，我们进入了绘制网格函数。

在我们正在画的所有东西下面，让我们画一个新东西，我称之为活动的，这并不重要，只是为了让我知道我在画什么，因为到这个应用程序结束时，会有很多代码。

这是我的，我要把它放在屏幕上，我们要把它变成蓝色。

然后我们需要开始考虑这个矩形。

所以它基本上是一个移动的矩形，向你显示你的节拍。

为了做到这一点，我们将使用我们传递的节拍变量，然后用 floor 除以 200 减去 200。

不好意思，这一点你应该已经很熟悉了。

除以节拍。

所以我们在讨论从哪里开始拍变量 12345678。

所以你考虑一下，当它是 1 的时候，我们想从 200 开始。

所以它会是这个的一倍。

然后再加 200。

所以我们需要移动到+200。

这意味着，实际上，这可能是 200。

我的储物件看得太远了。

等我们装好了就知道了。

因为它可能被设计成从零开始。

我想知道那是否是做这件事的更好的方法。

我现在不担心。

这是我们以后可以调整的。

好吧。

然后让我们看看“为什么”的起始位置，让我们从屏幕的最顶部开始，然后一直到仪器的底部。

那么我们为什么想要变好呢，这个很简单。

只是负 200，然后地板除以节拍。

这就是说我们希望这个矩形正好是一拍宽。

然后我们会把它做得和乐器一样高乘以 100。

所以有 600 Hi，基本上，它只是一个矩形，将围绕整个活跃的节拍。

这就是矩形需要的四个参数，除了我把括号放错了地方。

我们走吧。

然后让我们做这个，我们当然不希望它是一个实心的矩形。

让我们把它做成一个圆角矩形，边长为 5，圆角半径为 3。

让我们看看是否有节拍在屏幕上移动。

所以我真的觉得这很贴心。

它是从正确的地方开始的，它会走到终点，然后马上回到起点。

目前，它没有对不同的声音做任何事情，但这是下一步。

所以让我们继续，最后你们一直在等待的东西。

最后，我们来实现一些声音。

好吧。

为此，我准备了一个名为“声音”的文件夹。

我这里有六个 wav 文件。

我还有一个文件夹，里面有更多的 wav 文件，我稍后会谈到。

我只是想展示如何在套件之间切换。

但我们现在会找到那条路的。

要做我正在做的事情，你需要得到六个声音的 wav 文件。

我使用免费的在线下载，我会留下一个链接，希望能在这里的视频中反映出来。

如果没有，我会确保在下面的评论里有这个网站的链接。

希望我在这个视频的介绍中也谈到了。

那里有很多免费的声音工具包，所以你可以下载一个适合你的，只是为了能够跟着这个走，或者老实说，你可以用你的嘴发出声音并记录下来，但你会想使用 wav 文件 mp3 这些有一些问题，以我的经验来看，它们不太好用，好吧，所以只要确保你有这个声音文件夹和拍手，崩溃，高帽， 一只脚，一个圈套和一只鼓，如果你想直接跟着走，我会让这个小区域充满声音。

好吧。

现在，我们从踩镲开始。

我们将它设置为 mixer。

所以请记住，我们在开始时调用 Pygame 点混合器，我们导入了它。

现在，我们将使用它，为此，我们设置了这个混音点声音。

然后我们要做的就是给它它所在的文件。

听起来像反斜杠。

我就叫它嗨帽子点 wav。

好，就像这样，我们要复制那个。

我们要在这里做六个。

所以我们会说嗨帽子，然后圈套，圈套。

然后我们叫它 kick，然后我们叫它 crash，in 然后 clap。

然后是汤姆。

好吧。

然后在声音，位置，我们会做响弦，踢腿，确保你的名字与实际文件完全匹配，就像这里说的。

我总是建议，如果他们不下载一些非常符合逻辑的东西，考虑把他们重新命名为一些更简单，更符合逻辑的东西。

好的，但是就像这样，如果你有一个 TTY，或者一个看起来像转义符的特殊字符，比如反斜杠，N 不管什么原因，一定要用这个双反斜杠，因为这基本上是你需要做的，让反斜杠在你的字符串中被解释为文字。

你不必太担心那件事。

但是如果你有什么奇怪的地方，它会认为这是一个转义字符，只要做两个反斜杠就行了。

这对你应该有用。

好，现在我们要回到我们画网格的地方。

我们将会放入一些东西，这些东西将会使用那些被改变了的功能。

所以每次节拍改变时，我们都想弹奏音符。

所以你做了铁君临，我只是想确保我把它放在一个好地方。

铁音域乐器的屏幕，在这里画一条线，盒子，画网格。

好吧。

所以我们想说的是如果节拍改变了。

然后，如果节拍改变了，我们称这个函数为演奏音符。

这将播放我们刚刚根据节拍变化创造的声音。

然后马上，我们要将 beat changed 设置为 false。

这就是为什么，即使这段代码是外部代码，while 循环每秒钟运行 60 次，每次节拍改变时，这个循环只运行一次。

这就是我们如何控制声音播放的总次数。

原来如此。

现在让我们到上面画格子。

让我们定义播放音符函数，因为声音就在这里。

所以我们说定义游戏笔记。

这个很简单。

只是对于范围内的 I，然后是我们点击列表的长度。

如果在 I 点点击，然后是活动节拍，所以我们要检查的就是，如果在 I 点点击，会检查每一行。

所以我们点按的列表中的每个乐器都处于活跃的节拍。

如果它被选为 1，那么我们只需要检查 I 等于什么，然后在此基础上播放不同的声音。

所以如果等于零，我们想要我们创造的声音。

不要像那样玩。

这就是你要做的全部事情。

然后我们做 Ctrl C Ctrl V。

虽然这个有点单调，但我觉得还不错。

可能除了把这些声音放在一个列表里。

然后引用列表中特定的类似项目索引。

可能没有更快的方法了。

除了检查一下，确保你的东西有正确的顺序。

碰撞然后鼓掌。

然后是汤姆。

实际上，我不确定我们是怎么画出来的，是不是嗨，小军鼓踢，啪啦啪啦，然后是汤姆，我想好的，是的，如果我等于 5，我们就做汤姆圆点游戏。

这就是我们刚刚设置的超级快速、超级简单的东西，你只需要做这些就可以让声音播放出来。

好吧。

让我们继续，把这个加载进去，看看我们是否能得到一些声音。

我要试试这顶高帽。

好吧。

我真的希望我把声音留在了电脑上。

所以希望你能听到他的声音。

如果你一直在听，希望你现在已经明白了，让我们开始吧。

好吧。

好吧，也许只是我。

但我认为我们已经在这里这个事实已经很酷了。

你可以打开东西，也可以关闭东西。

一旦你到了这一步，试着弹奏不同的声音。

好吧，这太让人上瘾了，我可以永远呆在那里。

一旦你达到这一点，这是一个很好的时间来检查你输入的声音是否是你希望得到的声音，因为你可以改变这些声音。

但这是你第一次知道你是否拥有能让你快乐前进的声音。

好的，我想在搅拌机上做一件事。

这是因为你的调音台的默认设置，当你从 Pygame 加载它时，它总共有八个可以播放的频道。

所以从技术上来说，总共有八种声音可以持续。

但是有些 wav 文件，比如碰撞钹，实际上需要几个循环才能完成。

所以理论上，你可能会遇到这个问题，当你没有声音的时候，它必须选择让你播放什么声音，因为它默认只有八个声音。

解决这个问题的方法非常简单。

你只是做 pi 游戏点混合器点设置，num 通道。

然后我认为一般的经验法则是，如果你给每个乐器三个声道，这里应该没有问题，不管你开始演奏的速度有多快。

除非你达到了每分钟 600 次，否则你可能需要加强锻炼。

但是八个是默认的原因是因为一般来说，如果你有一个视频游戏，你同时有八个以上的声音效果，这只是混乱。

但就像音板一样，只要你挑选的声音听起来没问题，有更多的通道是没问题的，所以你可以做乐器乘以 4，如果你真的想要乐器乘以 3，过去对我来说很好。

所以我们要这么做。

好吧。

所以这很酷。

我认为我们正处于关键时刻，我们想开始增加一些播放器的功能。

所以，让我们暂停一下，因为这应该很简单。

然后我们开始做，你可以增加更多的节拍，你可以增加每分钟更多的节拍，或者减少每分钟的节拍。

然后我们将添加能够打开或关闭特定频道的功能。

然后，我们将开始考虑保存和加载文件的能力，这是一个我们需要做的很多事情。

所以让我们继续努力。

如果你喜欢这个视频，我想你已经做到这一步了。

我只想说，请在视频上留下一个喜欢，订阅频道，这对我来说意义重大，我希望你喜欢这些内容，我一直在努力推出这样的高质量内容。

这种支持意义重大。

如果你对你所看到的有任何问题，或者想在未来看到一些具体的东西，请一定留下评论让我知道。

事不宜迟，我们继续前进吧。

好的，让我们做一个暂停播放按钮。

我们就在下面画图。

我们将在这里添加一个矩形。

我认为这比画在…上容易，比画在格子里容易。

但如果你不同意我的观点，没关系。

想画哪儿就画哪儿。

所以我会说较低的菜单按钮。

现在我要在代码中为此创建一小段。

我就叫这个按钮，暂停播放按钮。

我会说 Pygame dot draw dot rect。

我会把它放在屏幕上，我会把它变成灰色。

因为它是在黑色背景上。

所以灰色会很好看。

我会把它从左边移开 50。

然后我要把它从底部抬高 150。

所以它仍然在菜单上。

他们会把它做成 200 宽 100 高。

这应该是一个很好的按钮外观的对象。

我们会把它变结实的。

我会把它做成圆角矩形，这对于按钮来说是正常的。

我会是的，让我们写一些文字让大家知道。

所以我说播放文本，我们将它设置为标签字体点渲染。

让我们给它的文本播放斜线暂停，让我们使它成为现实。

让我们把文字变成白色，然后放到屏幕上。

所以屏幕点 blit，播放文本，然后让我们把它放在按钮里面一点。

所以 70 然后身高减 130。

所以它应该非常接近按钮中间的正中央。

现在让我们检查一下我们是否在玩。

所以如果我们在玩，那么我们会在这里玩文本。

让我们做一个新的字体，我称它为中等字体，因为它不会很小。

但是我们将回到第一次定义字体的地方。

让我们创建一个新的字体，中等字体，它将是相同的。

它会变小，因为我有这个按钮，上面写着播放和暂停。

我想在它下面说，不管我们是暂停还是在玩。

所以不想小，想超级易读，但不应该是按钮的特色。

所以我就 24 小时吧。

我们会看到它的样子。

或许我们以后可以玩玩。

好吧，但是是的，所以我们会说，好吧，播放文本等于中等字体点渲染。

然后它会说，如果我们玩，玩真的。

我们会让这个我仍然在字符串里面，反别名为真。

让我们得到一个新的灰色阴影。

在我们的颜色库中。

一般来说，越接近黑色，你的灰色就越暗。

所以我们有这种普通的灰色，我会说是深灰色，它将只是 50 5050。

所以黑色是 000。

那种光，我们有的正常灰色是 128 128 128。

因此，你的灰色上的数字越低，越接近黑色，数字越高，越亮，对你来说只是一个整洁的灰色小花絮。

好的，我们会说如果我们是主动的，播放文本等于播放，我们会说它等于，所以我们不需要如果播放这个只是别的。

否则，就等于已经暂停了。

让我们看看，让我们把它放在屏幕上。

让我们把它放在下面。

因此，我们将这个屏幕上 blit Ctrl，c。

就在那里，让我们把它的高度减去 1，3，让我们在屏幕上降低 30 个像素。

所以身高减去 100。

现在它离屏幕底部有 100 个像素。

它会显示播放或暂停。

但是现在，我们实际上并不处理它是否被点击过。

所以让我们在鼠标按钮点击代码中找出我们想要做的，让我们为点击增加第二个部分。

所以总的来说，如果你想某件事只发生一次，那么通常是一个更好的主意。

因为如果你按住按钮，那么技术上来说可以多次。

你不会真的想搞砸的。

因此，我们将前往如果事件点类型等于 pi 游戏点鼠标按钮。

如果播放暂停点，我不会弄错碰撞点。

我们走吧。

碰撞点与事件点暂停，并播放。

我们需要 and 的原因是因为如果它在播放，那么我们需要 playing 设置为 false。

实际上，更好的方法可能不是在这里玩，而是在这里玩等于假。

然后我们会说如果我不玩。

你不想在这里做 else 的原因是，如果它正在播放，你会通过，然后它会不播放，然后我们说 else，然后它会看到它不播放，并立即设置为播放。

所以如果你这样做，你需要做一个 L . F。

L F 玩等于真。

这应该可以了。

所以我们已经有了活跃的长度，就像我们玩的时候 checker stops。

让我们看看暂停键是否有效。

哦天啊。

播放暂停。

我不认为我更新了文本。

好的，等一下，随机播放中等字体的文字。

就在这里。

这是播放文本，而不仅仅是播放文本。

我们走吧。

好吧，看起来不错。

我们在下面玩。

我暂停它，你可以看到我们的蓝色矩形停止，然后它继续前进。

我觉得这很好。

好的，让我们看看我是否暂停它并设置一个节拍。

我只是在做一种普通的摇滚音乐，以撞击声结束。

假设，让我们添加一些地板时间，因为这些很酷。

好吧，亲爱的。

那真是太棒了。

我认为这是一个很好的开始，我想也许我们下一步应该做的是增加更多的节拍，更多的节拍和 bpm。

这可能会有点复杂，但请耐心听我说，因为我认为我们已经为这个项目创建了一个非常有用的主干，实际上一切都将变得非常好，我们只需要实现它。

我们必须小心获取所有的细节。

好吧，那我们接下来继续。

我认为让我们加入 BPM 的东西。

所以我们有较低的菜单按钮，我们在这。

我们仍然在这一部分，当然，较低的菜单按钮。

我们将在这里做 BPM 的东西。

我发现把这些评论分开一点会有帮助。

所以我们要做的第一件事是我们要做一个 BPM 矩形。

我们会把它放在屏幕上，希望在屏幕上，我们会把它变成灰色。

我们将使用差不多同样大小的矩形。

因此，对于这一个，我们将它设为 300，以使它与上一个相距 50 个像素，但它仍然是高度减去 150，我们仍然将它设为 200 宽，我们仍然将它设为 100 高。

我们仍然会让它变得坚实。

不，你知道吗，因为这个不是按钮。

让我们把这个做成空心的。

这个只是显示每分钟多少拍，然后每分钟拍数，加减按钮会在它的右边。

所以让我们把这个做成空心的。

然后添加一些我们称之为 BPM 文本的文本。

这就是现在的标签字体。

现在我们最好不要做标签字体，因为它实际上是大量的文本。

中等字体点渲染，然后我们要拼出每分钟的节拍，好了。

好了，让我们把它放在屏幕上，寸真白，然后把它放在屏幕上网点 blit。

这将是 BPM 文本。

然后对于位置，我们不想移动太多，因为每分钟的节拍有点长。

所以我们会开 308，这样就能进一点点。

但我们还是会做高度减 130，就像那样。

然后我们要做的是，我们将做第二个文本，实际上是要显示 BPM 文本，这将是标签字体，因为它可能很大，这将显示每分钟的实际节拍。

所以不仅仅是文本告诉你它是什么。

所以这将是标签字体点渲染。

如果你愿意，你可以把它变成一个格式化的字符串。

如果出于某种原因，你想添加任何东西，而不是每分钟心跳数变量。

我会那样做，只是为了证明这是可行的。

所以理论上，你可以说 BPM，冒号，然后 BPM，如果你想的话，但我会把它放在每分钟节拍文本的下面。

又一次，真的，我们会把它变成白色的。

让我们把它放在屏幕上，我们把它放在下面。

那么什么最有意义呢，大概是 373 70。

然后我会说高度减去 100。

可能是我们放最后第二行文字的地方。

让我们看看它是如何工作的。

我们来看看这个。

每分钟 240 次，我有点惊讶，因为我以为我在尝试一个矩形。

BPM RX 绿灰 300 哦，我做了身高减 1500。

我们想要身高减去 150。

是的，看起来好多了。

好的，这很酷，但是我们还不能假设它，我只是认为我们目前所做的很酷。

很抱歉，如果我喜欢的话，这是我做过的最有趣的项目。

好吧，每分钟心跳数到 40。

但是我们还可以这样做，所以我们可以这样做，让我们继续添加两个矩形。

这似乎不是最简单的方法。

但实际上我认为这是一个非常合理的方法，因为一般来说，你不是一次一个地调整每分钟的节拍。

如果你想的话，尽一切办法把它们变成正的和负的，我会把它们变成正的和负的五个，因为大多数时候你会看到每分钟的速度节拍以 10 或偶尔 5 的增量调整。

看到一首每分钟 137 拍的歌真的很奇怪。

有 120 到 40 就正常多了。

所以我会在正负 5 秒内完成，但你不必这样。

害怕地开着摩托车走在街上。

好的，BPM 添加 rec，所以这将是他们让你做的矩形加上 5，我们会说 Pygame dot draw dot rect，我们会放在屏幕上，我们会让它变成灰色。

这一次，让我们再往右一点。

所以我们做最后一个矩形从 300 开始。

在 500，这个会给它一个 10 的填充。

然后我们把它放在负 150 的高度。

所以这个矩形顶部的高度，我们把它定为 148 ^ 48，大约 5050，这两个矩形几乎填满了整个高度。

但也不尽然，我只是觉得周围有些填充物会让一切看起来更好一点。

然后我们会说 BPM，sub rect。

这个按钮可以让我们从你的每分钟心跳数中减去 5，它会做 Pygame 点矩形，放在屏幕上，变成灰色。

现在这个，仍然是 510，我们希望它有相同的高度，或者我们希望它有相同的展示，但是我们只做高度减去 100。

现在，由于它们是 4848，我们有了一点填充，这将是很好的，当我们加载它时，你会看到。

我真的想强调风格的东西，你可以做任何你想做的事情。

所以，如果你不喜欢我的样子，或者你认为它会看起来更好，在某些其他方面，调整它改变多大的字体，改变你的字体，改变你的颜色，做你想做的任何事情，我只是想给你的功能。

好的，接下来我们要做的是创建一些广告文本。

这很好，因为我们可以在每分钟节拍按钮上使用它。

我想从理论上来说，我们会想给节拍加上-1。

txt。

所以忘了我要说的吧。

好吧，添加文本是中等字体，点渲染，因为这些是较小的按钮，所以我们不能让它们变得巨大。

我们将为添加文本做五个加号，真的和白色的。

然后子文本子文本很好。

就是这个东西，中等字体点渲染。

然后在字符串变量中减去 5，true 和 white。

然后让我们做屏幕点 blit 添加一个文本，让我们把它放在里面一点。

所以 520，因为按钮从 510 开始，然后高度，减 140。

所以往下一点。

所以我们在顶部和左侧给它一个 10 分的括号，我们会看到它看起来怎么样。

对于 sub 文本，它会做同样的事情。

所以 520 然后身高减 9090。

我们走吧。

好吧，我们还没有任何功能。

所以如果你现在点击它，什么都不会发生，但是让我们看看它看起来好不好。

没错。

好的，接下来我们要做的是，当您单击该按钮时，它实际上会将您的 BPM 调整正负 5。

这并不难做到。

所以我们将进入鼠标按钮的代码，在这里我们检查播放暂停按钮是否，哇，我很难出来。

如果播放暂停按钮被按下，如果添加 BPM，添加矩形点碰撞点，碰撞点，事件点暂停。

如果是这样的话，我们只需要 BPM+等于 5，然后我们会做一个 L，如果 BPM 的下一个点碰撞点，事件点暂停，就是 Pm-等于 5。

实际上，我们可以通过将这些都设为 LFS 来稍微优化我们的代码，因为理论上，我们知道这些按钮不在同一个位置。

所以我们可以节省一点时间，如果你已经在这个循环中点击了这个按钮，就不用费心去检查你是否点击了其他的按钮，因为你不会两个都做。

这非常简单。

这应该是我们要做的一切。

所以让我们去看看。

让我们看看。

我去放点声音进来。

一起吃午饭，看看我们能不能快点是的，这让我很焦虑。

好吧，但希望你能跟上，那真的很酷。

那应该非常令人鼓舞。

是你让这一切发生的。

你是编程大王。

干得好，继续努力。

也许我只是在说我自己，但我想你也很享受。

好了，接下来我们要做的是添加节拍，这将会有点棘手，因为我们必须更新我们的点击和总网格。

因此，如果我们改变歌曲中的节拍数，我们有几个列表需要更新，但我们可以从刚才制作的 BPM 开始。

所以我们会说 beats 的东西。

所以，你知道，是的，我们必须在后端做更多的编程，但至少要画出矩形，这一点也不会太差。

所以我们有 beats rekt beats txt beats。

txt，比 txt 还要因为它确实是，它是一秒。

这是 BPM 的第二个版本，你应该能够控制，我们希望他们能够增加和减少。

因此，我们会说添加文本到子文本添加文本到子文本，我们将一次做一个节拍。

因为从技术上讲，你可以有任何拍号，你可以有任何拍号，如果你真的想的话，你可以一共拍九拍。

所以我们说循环节拍。

这一次，我想我们目前的极限是 560。

对吗？那么，从 600 英镑开始最有意义吗？大概吧。

所以我们做 600。

然后其他的，我觉得都可以，这个就 608 670。

然后这个现在应该大概是 810 810 828 20。

我们还没有为操作代码添加任何东西。

所以当我们点击这些按钮时，什么也没有发生。

但是看起来不错。

让我们把文本移到右边。

因为这不是很长，所以循环中的节拍可以像 618。

这可能是六个广告，我觉得会很好看。

是的，看起来好多了。

好了，继续。

当我们点击这些按钮时，我们需要的实际功能稍微复杂一些。

那么我们来看看，当我们与点发生碰撞时，我们需要做些什么。

好的，我们将这些归结为 BPM，加上 rect，减去。

我们需要做一个低频拍加上矩形碰撞点和低频拍。

最初，我们可以用相同的代码，因为我们要用已经存在的 beats 变量，我们要加一减一。

但是这还不够。

因为我们必须，我们必须在网格中添加一个完整的行，一个完整的空行。

如果是，请确保我这样说，在我们的网格中写一个完整的空行。

如果我们增加一个 B，如果我们减去一个 B，我们需要删除网格中的最后一行，所以我们需要做的是，在粘土的长度范围内，我们需要删除一个重量，这是+1。

所以我要偷这个。

我们走吧。

这意味着我们只需按下负一拍。

我们需要做的是，我们需要说，在范围长度内，我点击了，所以这是通过我们点击列表的每一行。

我们将单击 I dot pop，这是用于移除的 python 列表函数。

我们要去掉-1，这意味着末尾的最后一个字符，所以你可以这样处理，这是列表中的索引。

如果你做了否定的回答，它会从列表的末尾开始倒数。

所以 pop 减 1，这将遍历并删除点击列表中的最后一项。

然后对于 beats，我们做了基本相同的事情，实际上，我已经在正确的轨道上了。

除了不是 pop 减一，实际上有点意思，它是 append，它还是减一，因为减一意味着没有被选中。

这就是现在的一切，所以我认为这将会让我们祈祷。

我们点击加号一，现在屏幕上有九个，这多酷啊，每次我们添加一个，整个屏幕都会更新，所以现在我们可以继续做 12 拍了，我要暂停一下，当我设置它时，低音响弦低音响弦，低音响弦碰撞。

是的，我的意思是，如果你想的话，你可以一直玩下去，你可以在这里把它变成 48。

你会注意到填充 48 拍有点乏味，但我们以一种非常聪明的方式设置它，所以这完全可以根据你想要在你的循环中多少拍来调整。

所以我指的是出色的工作人员。

我们只是在这里闲逛。

让我们添加更多的功能。

因为这进行得非常好，所以让我们添加关闭频道的功能，以便您可以编辑它而不影响您的实时循环，并像这样打开和关闭它。

为此，我们将创建一些乐器矩形。

所以本质上，他们只是让我们在节拍之下。

我们会说，仪器架。

我这样做是为了让我们可以点击这些频道。

我们会说，仪器，架，等于，然后是一个空列表。

对于 i in 系列仪器，如果你复制这段代码，稍后你想添加更多通道，我会尽可能自动扩展。

所以我们让这个小 rect 等于 pi Game dot rect dot rect。

你会注意到我现在做的是定义一个矩形，但我没有在屏幕上画它，因为我们不需要它。

对于这个，有点不同，我们只是定义了一个矩形。

所以这个需要元组，而不是四个特征的列表。

它需要一个 x&y 的起始位置，所以 x&y 的起始位置总是 0，然后 I 乘以 100。

当我们遍历列表时，它每次向下移动 100，但是它一直停留在左边。

所有这些的宽度都是 200。

他们都是 100 嗨。

然后我们要做仪器架，点追加。

那个矩形，好的，所以我们正在做的是我们要通过的每个循环，我们为那些按钮创建这个矩形列表。

但是我们这样做是为了让我们可以在鼠标点击时进行碰撞检测。

我们可以检查是否任何仪器矩形被点击超级容易。

为了做到这一点，我们说 L 到 L f，我们说 I 在范围内，仪器矩形的长度。

这将检查我们定义的每个仪器矩形。

我们要说的是，如果，对，如果仪器鼠，对不起，我试着给我的变量名，长的描述性的名字，所以当你们跟着学的时候，一切都很清楚了。

但是这些可能比你想要在一个最佳项目中使用的要长。

但是我们要检查是否每个矩形都被点击了，我们会说如果工具 Rex 点与事件碰撞点，点位置，那么我们现在要做的是创建一个新的列表，我称它为活动列表。

我们会设置被点击的乐器。

所以不管那个活跃列表是什么，I 乘以等于-1。

所以我们将使用我们在活动列表的点击列表中相同的逻辑，但是这将会简单一点，因为它不是一个真正的数组，它不需要是一个列表的列表。

因此，我们将下降到点击和只读，如果点击，我会做另一个列表称为活动列表，你可以称之为活动通道，活动工具，等等。

开始时，我会把它们都设为真，因为我认为我们的默认设置是，让你们所有的乐器都开着。

它只是一种乐器中的下划线。

好的，这将会给我们一个 6 个 1 的列表，表示所有的频道最初都会打开。

但是如果你点击一个频道，它就会关闭。

我们要更新的地方是，我们将进入绘制网格函数。

我们会传入那个活动列表。

所以我们在这里说活动，嘟嘟，嘟嘟，我们会给他们活动列表。

现在做活动。

你记得我之前做的这个颜色，灰色，白灰色，我希望每个乐器的文本都是它活动列表位置的颜色。

所以本质上，如果你点击它，我希望它是一个 1，意味着它是活动的，或者是一个负数，这实际上会很好，因为记住，负数是列表中的最后一项。

所以我认为这是一个聪明的方法。

你好，文字将会是零颜色。

等等，等一下。

颜色，没有活性物质。

00 好的，让我彻底解释一下这一项，因为现在有点混乱，我们引用了一个列表中的一个索引项。

但是 actives zero 告诉我们当前是否希望 high hat 处于活动状态，对吗？这是 1 还是负 1，取决于他是否戴着帽子。

所以如果是 1，我们想变成白色，如果是负数，我们想变成灰色。

现在，我们只需对所有六种乐器执行与这里完全相同的颜色逻辑，并确保更新它们的索引位置。

一旦我这样做了，我会加载它并向你展示我们在做什么。

234 号和 5 号也是。

同样，如果你需要更多的澄清，请在评论中告诉我，我会尽快回复你。

所以如果我点击高帽，你可以看到它变成灰色，这很好。

如果我点响小军鼓，它会变成灰色的低音鼓，我可以让它们不活跃。

但是这对实际代码来说意味着什么呢？

因此，我们需要进入我们的 play notes 功能，因为它也将在这里产生影响。

所以我们需要的是，如果点击了 I，就等于主动节拍。

我们需要检查 I 处的活动列表是否等于正 1。

好了，这就是我们现在要做的。

因为当我们检查并看到，哦，是时候玩嗨帽了，因为在我设置的节拍中，它是 1。

嗯，我们检查了一下，发现实际上他的帽子是关着的。

所以现在还不是玩嗨帽的时候。

对他们所有人都一样。

这就是我们要做的。

但它在屏幕上看起来仍然是亮绿色。

所以它为什么不播放可能有点令人困惑，也许你没有注意到文本是深灰色的。

所以让我们也在网格中，我想我喜欢这个想法。

我们会在这里检查颜色。

所以如果没有选中，应该是那种浅灰色，那种已经基本的灰色。

但是接下来我们要做的是在这个 else 语句中，我们会检查 J 处的活动，现在实际上 J 是这个循环的节拍。

希望这不会让你感到困惑。

但也许是，这是检查什么仪器，所以如果我们的活动仪器是积极的，那么颜色应该是绿色的。

我们走吧。

我们走吧。

好吧，但是如果玩偶，J 实际上，我们可以在这里做别的。

所以我们检查看它是否是一。

如果不是，那么我们希望我们的颜色等于深灰，深灰。

我们走吧。

现在让我解释一下我们刚刚做了什么。

但要确保你跟着走。

希望我没有让你太困惑。

让我们假设你有一顶高帽在你的循环中演奏每一拍。

然后你想加点低音。

但是接下来你会想看看没有踩镲的声音是什么样的。

好吧，你可以把那个频道关掉。

你可以看到方块变成了深灰色。

但最酷的是，它仍然给了你编辑它的能力。

所以你可能还在巡逻。

然后打开它。

比如说，我想加入一些碰撞声和掌声。

我不知道这些会听起来像什么，这可能是古怪的。

但是现在我可以随时重新打开这些东西。

然后你会有一种很奇怪的感觉，实际上听起来并不太糟。

我要关掉地板上的贝斯。

我们有单独的频道控制。

这真的很酷。

这是另一个很酷的功能，就像一个标准的鼓垫能够为你做的一样。

好了，我们有播放暂停，我们有每分钟节拍，我们有循环节拍，我们有添加节拍，添加速度，添加踩镲，或关闭单个频道的所有功能，就像我们已经看到的如何载入音乐那样。

因此，我认为我们需要使用外部文件来加载和保存我们创建的特定节拍。

所以我们接下来要做这个，但是我需要快速喝水休息。

好了，接下来我想对我们的应用程序做的是添加一个保存菜单和一个加载菜单。

我将把它们放在两个不同的菜单上，因为我认为这有助于区分功能，但您也可以将所有这些放在一个菜单上。

这取决于你。

但是让我们开始吧。

好了，让我们从画矩形开始，因为从那里我们将开始比尔挂出这实际上需要如何工作。

让我们来看看我们画所有东西的地方。

我们有很多矩形，节拍和乐器矩形都被画了出来。

接下来我们要做的是保存和加载内容。

好吧。

我们几乎可以使用我们在整个菜单中使用的相同的矩形，因为它们没有任何问题，它们看起来很好。

所以我们会说保存按钮等于，这将是 Pygame 点绘制 rect Skrein。

灰色。

现在，我们需要确保我们继续将它们移动到右边，所以这将是这一个，我们将把它设置为 900。

我们把身高减去 150。

实际上，我觉得如果这两个叠在一起会很酷。

所以身高 150。

然后 200，宽，我们只做 48。

高，有点像加号和减号按钮，因为我们将保存高于负载。

我们就看看会是什么样子。

所以 0，5，然后我们就在它下面加载按钮。

所以我复制同样的按钮等于控制 V，然后减 100。

其他都一样。

是啊，那些按钮看起来很不错。

现在让我们把文字放在上面。

所以我会抓住实际上，我想这些也许可以是标签字体，我想这没问题。

所以我们会说保存文本等于，它将被标签字体点渲染应该是专业的。

我们只会说保存，击败。

我们会实现的。

我们会把它变成白色的。

男生拼东西，对，真的白的。

我会把这整个事情，保存文本。

我们将对 load、load text、load beat、true Drew 和 wait 做同样的事情。

然后我们需要把它们放到屏幕上。

所以屏幕点 blit。

屏幕 dotablit。

这一个，我们想保存文本。

我们想把它放在按钮里面一点点。

所以 920 和身高减 140。

这应该会给我们一个漂亮的，相当方的中间按钮。

然后我们会做筛选，但加载文本。

这也可以是 920。

然后零下 90 度。

让我们再次看到，我们还没有按下这些按钮。

不过，文本看起来不错。

如果你愿意，你可以随意调整间距。

它们在按钮上。

你还想从你们身上得到什么？好的，保存节拍加载节拍。

我把它们一个放在另一个上面的原因是我想再加一个按钮。

一旦我们完成了，那就是板上钉钉的事了。

比如说你填了，就像这整块板都是方块，你完全后悔了，你只想废弃它，重新开始，而不是关闭程序，然后重新打开，我们只是做一个清除板功能。

所以实际上，这比保存和加载要容易得多。

我们为什么不这样做呢，现在我们就像白板一样，因为那就像三行代码。

所以清除板，我们要添加清除按钮。

这将是同一个按钮。

实际上，我会把这些都复制下来，因为它也会有文本。

Pygame 点绘制点矩形屏幕。

然后我们要这个 900，宽 200。

所以我们希望它在 1150 左右。

这有意义吗？1150 和身高。

我认为这个可以达到 100 分，然后这篇文章会说“白板”。

好了，安全了。

然后我们把它放在 1160，身高减 130。

试试那个 1160 身高减 130。

这将是明文和明文。

好吧，让我们看看。

好吧。

我想把它降低 120 度。

那会更好看。

没错。

好的，让我们快速的清理一下白板，因为清理比保存和加载要简单的多。

保存和加载需要处理大量的外部文件。

我认为这样会快一点。

因此，让我们继续检查，如果清除按钮与点碰撞。

我们来看看 LFS，因为它很适合这里，我们说如果清除按钮点碰撞点事件点暂停。

所以如果你点击了清除按钮，那么实际上我们要做的就是把点击列表设置成和最开始时一样。

所以，你知道，我们检查有多少乐器和多少拍子，我们只是把它们都设置为负一。

好吧，我们可以在我们的透明按钮下做完全相同的事情。

所以真的是这样。

好吧，让我们快速检查一下。

所以我们有一大堆高帽子和一些，我们走吧，只是一个随机的，可怕的按钮，你就像，哦，我做了什么，清除板，你是空的，你是自由的。

给你。

好了，我们有了清晰的功能。

真贴心。

干得好。

现在，让我们进行保存和加载。

我想这样做，保存和加载实际上会停止播放音乐，它会让你无法点击其余的按钮。

我要做的是创建两个新变量，分别叫做保存菜单和加载菜单。

我们将使用这些类似于播放的功能来查看，如果某个内容当前为真，那么在被更改之前，我会说保存菜单，当游戏开始时，它将等于假。

所以我们要加载 menu，它们一开始都等于 false。

但是有一件事我们在开始时也要做，你会想要这样做，你会想要把一个空的文本文件放到你的 Pygame 项目中。

所以如果你需要在外面的世界做一个放进去，那也没问题。

但是，如果你有一个像样的 IDE，你可以做新的文件，然后就像叫它，我的节拍或什么点 txt。

我已经有了一个名为保存的 beats dot txt 的文件，比如说，嘿，我们将在这个程序中使用它，然后你想在函数的早期开始，只做 file equals open，然后保存 beats 或者你的文本文件的名字是. txt，然后是逗号，然后从一开始，我们就想读取数据。

假设你关闭了你的会话，然后两天后，你回来，你想做一个新的会话，你想阅读当前所有的信息。

我们的做法有点像 CSV 或逗号分隔值文件，文件中的每一行都是我们一次心跳所需的所有信息。

所以这将是多少节拍，多少 BPM，我们给它起了什么名字，然后是那个人的点击列表。

所以我们会对文件中的行，也就是你有的文件，做一个列表，叫做保存的节拍点追加。

然后那句台词，好了，拯救节拍还不存在。

所以在文件的正上方，我们先保存节拍，这是一个空列表。

好的，因为现在，我们没有任何保存的节拍，它只是一个空变量，直到我们保存一些东西。

但这就是你最初打开和存储文件数据的方式，所以让我们继续使用保存菜单和加载菜单。

现在，如果我们来看看我们的按钮，我们要做的第一件事是检查你是否点击了一个按钮。

所以，如果你点击保存菜单，或者你点击加载菜单，到目前为止，我们要添加到所有鼠标按钮逻辑中的一件事是，我们要说，如果鼠标按钮向上，不保存菜单，不加载菜单，因为从技术上讲，一切都会在那里。

即使在我们安装了新的屏幕来掩盖它之后。

所以我们只是想让你不必担心在我们创建了一个新菜单后点击下面的按钮。

所以这一切都很好。

与此相反的是，一旦我们有了保存菜单或加载菜单，我们需要确保那里的按钮可以被按下，我们将通过添加一个新行来做到这一点，所以 Pi 游戏鼠标按钮，保存菜单或加载菜单，我们稍后再做。

好，让我们言归正传，不要保存菜单和加载菜单，然后我们需要一些 LFS 在这里检查是否保存菜单或加载菜单被点击，所以如果保存菜单，保存按钮，点碰撞点与事件点的位置。

然后我们希望保存菜单等于真，然后我们说 L F 加载菜单点碰撞点事件点暂停，然后我们希望加载菜单等于真。

我们还不想运行这段代码，因为它会禁用我们所有的按钮。

我们除了关闭它什么也做不了。

但是这将会打开我们的保存菜单和加载菜单。

当我们装货的时候，我想，是的，我们现在就让它这样。

所以我的意思是，当我说我们需要这种完全相同的代码，但我们需要做一些不同的东西，我们将使用这个菜单。

所以我们会说 l f。

现在因为我们不想运行这个 if Save Menu 和 load menu or false，但是我们会说 L F event dot type Pygame 鼠标键向上。

我们将创建一个退出按钮。

所以我们说如果退出按钮点碰撞点，事件点的位置。

我们将在 Save 菜单和 load 菜单上使用 exit 按钮来退出。

因此，即使在我们实际设置保存和加载功能之前，我们也只是希望能够进入菜单，然后退出菜单。

好吧。

我们将确保播放等于真实，当你离开菜单时，它可能会暂停，这是不应该的，因为我们没有这样设置它。

但是现在我们有了。

好吧。

所以我们还没有对保存菜单或加载菜单做任何事情，但是我们想让我们来看看我们的其他功能，我们在填充框中绘制东西。

是的，所以我们想在盒子被抽出来之前就做。

所以屏幕点填充是唯一发生的事情。

我们会说，如果保存菜单，然后我们会做一个函数，称为绘制保存菜单。

然后我们会说同样的话，如果加载菜单，然后我们会说绘制加载菜单。

我不要忘记，我们要确保从这两个窗口中都可以返回退出按钮。

退出按钮等于画加载菜单，画保存菜单，好的。

这就是我们真正要做的，我们必须考虑一下，为了让这些菜单运转起来，我们最起码要做些什么。

然后我们可以开始添加实际的功能。

好，让我们来看看，从哪一个开始并不重要，它们在格式上有点类似。

所以我们会在我们的绘图网格下面。

我们将首先绘制保存菜单。

所以画 def。

Bow，我打字有些困难，def draw Save 菜单。

好吧。

我们只需要确保在做任何事情之前返回一个退出按钮。

让我们确保不要忘记这一点。

好吧。

老实说，我们先把它放在屏幕上。

所以我们要做退出按钮。

我们不要称它为退出按钮。

因为我们在很多地方都使用它。

让我们做出口 btn，只是为了分开，我们说出口 btn 等于 Pygame 点 draw 点 rect。

我们将把它放在屏幕上，我们将它设置为灰色，因为我们所有的按钮都是灰色的。

对于 x 位置。

让我们把它放在右边很远的地方，负 200。

让我们做负 200 和身高负 100。

然后为潮湿的洪水做一个对不起 180。

所以它没有完全接触到右侧，也没有完全接触到底部。

然后，我们将使它成为一个实心矩形，圆角矩形边数为 5，就像我们一直做的那样。

让我们在这里制作一些退出文本，以标签字体显示关闭菜单。

所以标签字体点渲染。

它只会说关闭和做做真实和白色。

就这么办吧。

然后屏幕点 blit 屏幕点退出文本，我们想要它我们想要这个家伙的坐标是什么？我们把它放在负 160。

所以我们想在那个负 160，高负 108 负 70 的按钮里面，他们会做一点缓冲。

让我们看看，我基本上要复制这整个东西来画一个加载菜单，就像最初画加载菜单一样。

最初，我们有能力测试打开这两个窗口的情况。

但实际上，你会发现，这可能会有点奇怪。

如果我们不做下一步，我们就说我们在保存节拍。

好吧，我们现在在菜单上了。

但是我们没有做任何让它看起来像菜单的事情。

所以 boo 池没有对象，加载菜单点碰撞点哎呀，这个，我做了什么？退出按钮。

哦，我加载了菜单而不是加载按钮。

你这个傻瓜。

高飞。

皮特。

给你。

好了，已经。

所以我想说的是，我们想要画一个基本上是全屏的矩形。

所以 Pygame dot 画 dot rect，放在屏幕上，弄成黑色。

并使其大小为整个矩形。

因此，从 00 开始，使其具有完整的宽度和高度，没有圆角，没有边缘，我们希望是实心的，并使其成为您在菜单上绘制的第一件事，并为两者而做。

如果我点击保存节拍，你会看到什么，你什么也看不到，因为我做错了。

让我们来看看。

哦，所以没用。

因为我把这些放得太早了。

你想让这些菜单成为你画的最后一样东西。

所以在所有东西都被抽出来之后。

所以在清除按钮之后，如果菜单被选中，我们希望绘制这些菜单。

原因是这段代码是按照这个特定的顺序绘制的。

所以它做的最后一件事就在底部，检查你是否有一个活动的菜单。

现在，我们可以像这样进入加载菜单和保存菜单。

好吧。

举例来说，我们还可以做的是，当我们在这些菜单中时，我们可以暂停这些东西。

所以按钮什么也没做，但音乐仍在播放。

如果这让你感到困扰，那么超级简单的事情就是设置 playing 等于 false。

虽然菜单是活动的，但实际上我认为当我们在那里时，让它仍然活动在墙上可能是有意义的。

因为如果你保存了一个节拍，也许你会想听听它，想一个好名字。

不过，好吧，这很好。

重要的是我们让这些菜单发挥作用，因为现在这些菜单是空白的，我们可以打开来做我们的工作。

所以我们可以停止搞乱主循环，它已经变得很混乱了。

所以我们将从这些菜单开始。

从绘制保存的菜单开始，让我们绘制，保存，因为绘制加载菜单要简单一些，我们必须对保存的所有内容进行排序。

这可能需要一点时间。

让我们从这里开始，我们有完整的矩形。

我们称这个菜单为文本。

我们只是告诉他们在屏幕上做什么。

所以我们会说渲染，我们会说保存菜单。

输入当前节拍的名称，好的。

我们会让它像往常一样白，屏幕点 blit。

一如既往，让我们把菜单文本菜单文本。

让我们挑一个 440 左右的好地方。

让我们看看那是什么样子。

所以保存菜单，输入当前节拍名称。

看起来不错。

我对此很高兴。

这很酷，但是我们还没有，我们还没有真正做任何事情。

我们才刚刚开始。

所以接下来，让我们放一些，让我们放下一个按钮，在我们太担心打字空间之前。

让我们在屏幕上放一个保存按钮。

所以我们称它为保存按钮，因为已经有一个保存按钮了。

这可能有点令人困惑，但这就是我们正在做的。

好吧，圆周率游戏，圆周率游戏点画点矩形。

我们把它放在屏幕上。

我们要把它变成灰色，因为这是我们处理按钮的方式。

我们会把它放进去。

我们让它磨损。

我们会把它放在屏幕的中间。

那么我们就用这个，对，宽度除以二，地板除以二，然后我们就做负 200。

所以这将是一个真正的宽，我们把它的高度乘以 0.75。

所以我们把它放在屏幕的四分之三处。

但是我们会把它做成 400 宽 100 高。

因为这是一个大按钮，这是出现在屏幕上的全部目的。

所以我们要把它做成一个更大的按钮。

保存按钮，然后我们会做保存，哎呀，游戏，保存文本保存 txt。

这将是标签字体点渲染，标签字体点渲染。

这将使文本保存下来。

又真又白。

和屏蔽的 blit 保存文本。

我们想把它放在同一个地方。

所以宽度除以 2，可能是负 50。

这一次，因为让我们说它是 100 宽，也许，我猜测，那可能是它的一个好地点。

然后我们将高度乘以 0.75。

然后我们做加 1020 30，我们把它放在按钮 30 中间。

这应该会给我们一个大的 ol 按钮，在保存屏幕上显示 save。

是的，我们想把它向左移动一点。

好的，但是我们有按钮，这很重要。

让我们把它移动负 70 度。

我不知道我是在即兴发挥。

看是否击败。

那很好。

好吧，所以我们要拯救节拍。

现在，有一件事，我们已经返回了退出按钮。

但是我们也想返回保存按钮。

因为我们要检查我们是否与它和外界发生碰撞。

所以去你画保存菜单的地方。

我们将做退出按钮和保存按钮。

我们稍后会用它来检查我们是否已经保存了节拍。

现在我们要传入一些东西，实际上，我们要检查当前的节拍名称，因为我们要输入并保存名称。

然后我们要检查我们是否在主动打字。

所以是的，这并不快乐，因为这些还不是变量。

但是我们会到这里来。

我们要制造这些新的变量，我们要制造节拍名称。

我最初只是一个空字符串。

我们将创建一个新的变量类型，它最初是假的。

如果我们进入绘图保存菜单，你会看到我们正在传递节拍名称。

我们会传入类型变量。

为此，我们将在屏幕中间制作一个新的 like 输入框。

所以我们称它为，放在哪里并不重要，我们称它为入口矩形。

So entry rect.

那就等于 pi 游戏点 draw 点 rect。

我们把它放在屏幕上，让它变成深灰色。

我们会的，让它变成普通的灰色，因为我们用深灰色来表示它是否被点击过。

好吧，那就灰色屏幕。

然后我们把它放在 400 200 600 200。

好的，那么它将是屏幕 200 的中间 600 个像素。

我们会从顶部往下一点点。

我们会把它做得五乘五。

所以只有一个很大的空矩形。

然后我们将有输入文本，它将基本上告诉我们当前输入了什么。

所以标签字体点渲染，F 字符串的节拍名。

这是真的，白色的，我们想要 blit 那个屏幕，点 blit 输入文本，我们想要把它放在那个变量里面，那个矩形，好的。

我们还需要返回输入矩形，因为我们需要能够点击它，并确定我们是否在主动输入。

我相信这就是我们所需要的。

好，现在让我们回到调用它的地方，确保我们把入口矩形传递回来。

就这么悬而未决，draw Save Menu 确实不小心改了 draw Save Menu 的名字，打了名字又打字，我肯定又放了一个，哦耶，我在里面放了个分号，比如傻鹅，好吧。

和树矩形。

好的，让我们用这些按钮做些什么，我会给你看它现在是什么样子，你也应该自己运行它。

你看，我们在中间有一个漂亮的矩形，当我们输入节拍名称时，它会被载入。

所以让我们继续并关闭。

让我们用这些按钮做些事情。

因此，现在我们必须下去检查，如果所有这些不同的东西都被点击，该怎么办。

好的，我们现在在这一部分，这一层，输入 pi 游戏鼠标键向上，这里有退出键。

显然，为了重置一切，我们将清除节拍名称。

因此，如果您正在键入节拍名称，然后关闭菜单，我们会将其设置为空。

如果你在输入，我们会把它设置回 false，因为现在你显然没有输入。

好吧。

因此，让我们开始看看我们刚刚在菜单中定义的东西，以及我们希望它们做什么。

如果你点击输入矩形，那么你点击那个矩形，那么我们要做的基本上是改变你的输入状态。

所以如果 entry rect collide，point event dot Pause，Pause，那么我们会说如果输入，那么输入等于 false。

如果没有输入，我们就说 L。

所以再一次，如果你刚刚做了一个 else，你会得到这个棘手的小东西，它进来说，哦，如果输入，输入等于假，else，但是 else 检查如果不输入，所以你会得到这种棘手的情况。

所以如果不打字的话。

设置，键入等于 true。

我们将使用 if 类型来处理新的事件类型。

所以我们会下降到像 l f 这样的水平。

所以这个 L，F，我们说如果事件点类型，等于，现在我们用一个新的类型，Pygame 点文本输入。

这就是你点击了一个有文本值的键，输入变量为真。

这就是我们如何处理不修改节拍名称的问题，如果你没有主动打字的话。

然后我们说加号等于事件点文本，因为当你点击一个文本键，一个 P 或者一个下划线和撇号，或者一个 M，当它出现在字符串中时，你点击的实际键的值是事件点 txt。

好的，然后我们会说如果事件点类型等于 pi 游戏点按键，我们会检查是否是另一种类型的事件。

我们用它来检查按下的这个特定键是否等于 pi 游戏点 k 下划线退格键，所以我们要检查退格键是否被按下，节拍名称的长度是否大于零。

这是一个重要的步骤，因为如果节拍名称已经是空的，我们不想尝试从记录节拍名称的变量中删除文本，它已经是零个字符了。

但是我们在这里要做的是，因为没有简单的方法从字符串中取出一个字符，你必须重新定义它。

我们要做的是，现在节拍名称等于当前节拍名称。

我们使用这一系列的字符。

所以离开，离开之前没有字符，这个冒号的意思是从头开始。

然后负一表示转到字符末尾之前的字符。

所以这基本上是一种获取整个字符串直到最近的字符的方法。

就这两个，我们增加了功能，可以让我们删除，实际上我们想要另一个和类型条件。

所以现在输入矩形应该决定我们是否在主动输入。

然后这里的文本输入和按键字符应该会改变我们是否能够做任何事情，所以我们还没有处理实际的保存按钮。

我们会我们接下来会这么做。

但是现在让我们来看看我们的菜单是如何工作的。

所以拯救吧。

我将点击这里，现在我应该可以输入 Pete，Backspace，Backspace，Backspace。

我要输入皮特很酷。

如果我再次点击这个矩形，继续输入。

是的，它什么也没做，这很好。

这就是我想要的。

但是我们还没有直观地展示出来。

让我们回到保存菜单，保存菜单。

让我们添加一个深灰色的插入矩形，表示什么时候该打字了。

或许浅灰色会更有意义。

但是我打算用深灰色，因为这是我的教程。

好吧。

我要做的是，在入口被破坏之前，入口在哪里被破坏了？是的，Ctrl C，我会说如果打字。

然后我会把这个矩形放在这里，它不需要名字，因为我只是用它来表示我们是否在输入，我会说深灰色。

我会把它画成实心的，同样的形状，没关系，因为我们是先画的。

所以你的优势仍然会出现。

这应该是一个很好的方式来表示节省节拍。

我们走吧。

我们在打字。

皮特没事的。

如果我关掉它，好的，现在我不再打字了。

现在我是了。

我可以退格，等等。

如果我关闭它，它就会退出，这很好。

因此，让我们继续处理保存按钮。

我之所以推迟它，是因为处理外部文件和将数据保存到文本文件只是一些额外的步骤。

而且，我们必须选择存储什么数据，以正确的格式存储。

这是一个过程。

所以让我们开始吧。

因为它的功能非常重要，显然，能够保存你最喜欢的节拍并在以后使用它们是这种事情的巨大价值。

所以我们将来到这里，这里有我们的入口矩形，我们将添加一个新的。

我们真的可以像 LFS 一样做这些。

所以我们说 l f。

保存按钮，要非常小心，因为现在我们有一个保存按钮和一个保存按钮。

我们说碰撞点和事件点暂停。

如果是这样的话，我们要做的是，文件等于打开，我们保存的 beats dot txt 文件。

但是这一次，记住，在最开始的时候，我们从它那里读取数据，将数据存储到那个变量中。

现在我们要做一个 W，这意味着我们要写它。

我们接下来要做的是，把我们一开始做的保存节拍，保存节拍列表。

我们将向它添加一些数据。

如果你还记得，我知道就在不久前，我们说过我们将要添加的内容，我们总是希望以一个新的行开始。

因为如果你不这样做，那么无论你什么时候保存，你都有可能保存到同一个文件中。

然后我们用类似每行的方式解析数据，将它作为一个条目存储在我们的列表中，会变得混乱。

所以我们要这样做。

我们先做名字，冒号，然后空格。

然后我们会做字符串括号，节拍名称。

这就是你输入的下划线名称。

然后我们用逗号，然后我们用冒号，花括号，节拍，注意你保存的格式。

因为稍后，我们将不得不对加载菜单进行逆向工程。

所以我们在保存所有我们需要的东西。

我们正在保存我们需要的一切，以便以后能够回忆起来，我们正在保存点击列表，我们正在保存每分钟多少次和多少次，然后我们给它一个名称，以便能够保存它。

因此，我们将把它作为一个项目添加到我们保存的节拍列表中，这意味着它将成为保存的节拍的格式。

然后我们要做的是，我们说 I 在音域内，保存的节拍长度，好了。

我们想做文件 dot 写一串保存的节拍。

这是你必须要做的，因为要写入一个 txt 文件，它必须是一个字符串。

所以你必须对你保存的节拍列表的每个条目进行字符串转换。

然后让它保存在 for 循环之外，我们要做文件点关闭。

这将关闭文本文件，归档新数据，然后我们将关闭菜单。

所以现在 Save Menu 等于 false，大写 F false，因为如果你刚刚保存了你的节拍，就没有理由再留在那里了。

然后我们将 the 设置为 false，因为这是我们的默认设置，我们将清除 beat name 变量。

这意味着你已经完成了你在这里要做的事情。

现在，即使我们没有办法把它加载回来，你可以看到我们有一个 M，你现在保存 beats txt 文件吗？让我们继续做一个。

所以让我们打个拍子。

我会把它变成我一直在做的那种普通的摇滚节奏。

亲爱的，我做了一个拯救节拍，称之为普通摇滚节拍。

我要点击拯救甜菜。

让我们看看。

好吧，这是个好兆头，它没有关闭任何东西。

现在让我们来看看我们的文本文件，这样你就可以知道我们是如何保存它的。

好吧，这很酷。

它的名字通用摇滚节拍，节拍 BPM，240。

然后选择，这是列表，你可以告诉它有所有的喜帽。

这就是第一个。

它们都开着，所以它们都是 1。

我相信这就是陷阱。

你可以看到只有三个。

就像，12341234 对于小军鼓，底鼓是一个接着一个，一个。

所以你可以看出这是一个我们需要做的所有事情的列表，来重现那个节拍。

所以一旦我们保存了它，我们可以清除它，我们可以关闭它，继续我们的生活。

这真的很酷。

但是我们还没办法把它装进去。

这就把我们带到了加载菜单。

我一直在推迟这个，因为它可能是最棘手的一个，我们必须获取所有的信息，我们把它塞进一个文本文件，我们必须从文本文件中逆向工程出来。

让我们开始吧，我抱怨不会让它走得更快。

因此，让我们进入绘图加载菜单功能。

在这里喝一口水。

好的，我们有后面的矩形，我们有退出按钮，这是一个很好的开始。

我将从这里窃取菜单文本和保存文本，因为我们将在菜单文本中重复使用它们，现在会显示加载菜单并选择要加载的内容，我们只需显示加载即可。

他们知道自己在做什么。

然后我们不说保存按钮，而是说加载按钮。

而不是保存文本加载文本，这将说加载节拍，这将说加载文本，但位置可能是好的。

显然，除了退出按钮和其他按钮，我们还需要加载按钮。

我想我们也想返回一个删除按钮，可能是因为你在这里放了太多了。

让我们删除 BTN。

那太好了。

所以我们有一个加载按钮。

让我们继续添加装载文本。

让我们继续做一个删除按钮，删除 BTN。

我们应该把这个删除按钮放在哪里呢？

让我们粗略地把这个放在屏幕上。

所以我们将宽度除以 2 得到中点。

我们会做负 400。

所以从这里出发，负 2-400 就是起点。

我们会把它放低一点。

那么高度乘以我们应该做什么点九。

我不知道有点神志不清是一个漫长的教程。

好的，我们会搞定的。

我们将把它做成圆角矩形。

我们将看到它在哪里看起来是什么样子，然后从那里开始。

我不知道为什么我会把它放在第九点，它应该和载入按钮在同一高度。

但是让我们看看。

如果这个从负 200 开始，这个从负 400 开始。

是 200。

会触动我们的装载按钮。

让我们试着赚 500 元，我不知道我在玩，现在我在未知的水域。

好的，所以我们需要添加一些文本，我们需要删除文本，并把它放在我们的删除按钮上。

这将是标签字体点渲染。

这一次我们将删除文本的节拍。

删，打。

好的，然后应该是白色的。

首先，我们需要为反别名白做真实。

来吧，皮特，你知道，然后屏幕点 blitt，然后删除文本。

删除文本。

好的，关于这个位置，我们只是想从这里偷出 x&y 的起始位置，CTRL+C 到文本，然后往里面挪一点。

所以让我们看看现在减去 500 而不是 500。

我们做 485，然后高度乘以哦，0.75，我的朋友。

好吧。

然后再加 10。

让我们，让我们看看我们做了什么。

我认为这是可怕的，但让我们做加载菜单。

老实说，这不是世界上最糟糕的事情吧？好吗？这看起来不错，让我们继续前进，删除节拍下降一点点。

另一个 1 加 30 我们做了什么。

我们再做一次+30。

好的，现在我们需要如果退出按钮元组没有属性，那么碰撞点，谁是元组？这里吗？退出按钮 Pygame 点绘制点矩形。

我不完全明白为什么我会有那种感觉。

负载节拍。

关闭。

哦。

所以元组对象没有属性碰撞点，我明白这意味着什么。

但是退出按钮就在这里。

绘制加载菜单，退出按钮，加载按钮，删除按钮。

哦，可能是因为我们还没有告诉加载按钮功能。

它得到了一些东西。

等等，我们正在返回退出按钮，加载按钮，删除按钮，到你调用这些菜单的地方。

这是退出加载按钮和删除按钮。

现在关闭按钮应该可以用了，除非我疯了。

我不是。

好吧。

干得好。

嗯，我可能是，但我们继续吧。

好的，回到加载菜单，我们需要设置一个区域来显示我们加载的节拍信息。

所以加载菜单，选择一个节拍来加载我们说，我们把文本放在屏幕上。

但是我们目前没有显示，比如节拍可能出现的区域。

所以让我们画一个像钢笔一样的东西，像一个 rec 外部矩形，所有的数据都将在这里显示。

所以让我们做 Pygame 点画点矩形。

为此。

让我想想做这件事的正确方法是什么？好吧，如果你愿意，我们来画支钢笔。

让我们说 pi 游戏点画点矩形。

让我们把它放到屏幕上。

让我们把它变成灰色。

我们给它 190 乘以 100，从 190 乘以 200 开始。

让我们看看那是什么样子。

让我不知道，1000 高，600 宽。

我不知道，我有点矛盾。

因为我想让这个看起来像个大纲。

但是我不知道把它做成一个实心矩形来显示加载的节拍是否更有意义。

所以不管我做了什么可怕的事，让我们来弥补。

好的，让我们固定这个矩形，我想 190 90 我们可以把它做成 1000 的高度就可以了。

600 应该可以。

五和五可能是好的，我想我们要做的是加载节拍，我想我们要做的只是移动加载并向下删除，因为我确实喜欢能够显示许多不同节拍的想法。

因此，也许我们可以尝试像第九点或接近第九点，而不是第七点或第五点。

让我们把这些放下来，做点什么。

我不知道，八，七。

让我们试试那个点 8 7.8 7.87 加 30。

让我们来看看负荷节拍。

我们走吧。

实际上，这还不错。

有点像矩形入口。

所以让我们把它叫做。

让我们称之为。

我不知道。

击败矩形。

加载的矩形。

我们称之为满载。

长方形。

矩形

没错。

我想我们也想把它还回去。

因为如果你点击某处，你可能会选择一个节拍。

好吧。

让我们来看看我们的函数，在这里我们把东西放回删除按钮，我们会说在这里加载矩形。

好吧。

或者装不装都无所谓。

好的，让我们看看如何在这个 draw load 菜单中解析数据。

所以我们必须检查选择了什么指数。

首先，我们应该做的是，我们有一个保存了一个节拍的文本文件。

我们去做第二个吧。

好吧，那我们就把这弄得愚蠢点。

这不是最糟糕的，不是世界上最糟糕的事情。

但我就叫它汤姆和拍手。

保存节拍。

让我们继续并关闭它，看看我们的文本文件。

现在你看到我们有了这两个。

假设我们有加载菜单。

我们想要解析这两个数据，并在屏幕上显示它们，我们想要显示它们有多少拍。

我们想展示他们的名字和一切。

所以我们需要做的是，我们需要开始检查，比如，我们如何在这些里面得到特定的东西。

所以让我们开始吧。

做这件事没有简单的方法。

这就是我们要做的，我们开始，我们说节拍，音域，保存节拍的长度。

所以请记住，保存节拍是一个列表，列表中的每一项都是一个长字符串，其中有一个保存的节拍。

因此，对于保存节拍的节拍范围长度，让我们设置矩形，显示 10。

所以如果 b 小于 10，意味着我们从零开始。

好的，节拍点击，将等于一个空列表。

我们需要设置一些东西来解析它，这是一个很长的字符串。

因此，行文本将等于中等字体点渲染，我们只是要显示这是什么行。

所以它会是 F，然后那是一个格式字符串，会有 bt 加 1，因为它要从零开始。

但是同样，我不认为我们应该说任何东西都是零拍，这是第一拍。

我们会说真实和白色。

我们会把它显示在屏幕上。

所以屏幕 dotablit。

我们给它一行文本。

我们把它放在 200 乘以 100，加上节拍 200 乘以 50。

因此，这就是我们如何使这一工作为每 10。

因为长方形像 600，高。

好，这就是我们要做的，把行文本放在那里。

但是我们必须开始得到一些索引。

所以，如果你熟悉 Python 中的字符串操作，你会有点超前，因为你将要看到的很多东西可能没有太多意义，除非你熟悉字符串。

所以我们需要想出从哪里开始命名。

所以我们会说保存的节拍。

这是我们保存的所有节拍的列表，然后我们调用特定的字符串。

然后我们需要找到索引值。

这是字符串中，我们第一次看到这个特定的子串。

所以名字冒号空间的索引，你会明白为什么我这么特别，当我们设置，写正确的指令到列表中，因为我们必须反向复制它，把它拆开。

好的，因为这个字符串中有六个字符，一个 m，e，冒号和空格，我们要在这里加一个 6。

然后名称索引结束，嘟嘟嘟嘟，将等于节拍点索引保存的节拍。

然后这里将会是我们字符串中下一个要加入的地方。

所以如果你考虑一下，我会把文本文件放在这里。

当我们到达冒号空格节拍的时候名字结束。

所以我们不得不这样做，通过这样做来检查每一部分的开始和结束。

所以像这样的节拍将会是我们想要结束的地方。

然后命名文本。

每一个的实际文本将等于，我们将使这个中等字体，以便我们可以把它放在屏幕上点渲染。

然后它的文本会保存在 apt beat 的 beats 中，这样会告诉你使用哪个项目。

然后我们需要做的是从名称索引开始，然后是冒号名称索引结束。

这可能看起来有点混乱，但是我们刚刚做的就是说，好的，列出所有的安全节拍，选择我们正在看的特定节拍，然后从这个名称文本停止的地方开始。

所以基本上，这个名字后面的下一个字符，冒号空格会一直出现，直到这个冒号空格出现为止。

这是为该节拍保存的名称的实际文本。

然后我们希望它是真的，然后是白色的，然后我们把它放在屏幕上。

所以屏幕 dotablit。

这将是名称文本。

会变成逗号，然后是 240。

然后 100 加 bT 乘以 50。

那不是我们去的时间。

节拍乘以 50。

这也是我们放 Rotex 的地方。

让我们从这里开始。

因为我认为，如果你熟悉这是如何工作的，当我们去加载菜单，你可以看到我们有通用的裂纹，节拍，汤姆和拍手。

这是第一个和第二个名字。

那真是太好了。

这太棒了。

我们现在要做的是，我们必须弄清楚如何解析其余的数据，因为这只是其中一项。

这对于在屏幕上展示它们很有帮助。

但是我们还需要弄清楚如何获得每分钟的节拍数和选中的列表。

所以这将会有点棘手。

请原谅我。

同样，如果你迷失在细节中，一定要放慢视频速度，重新观看让你困惑的部分，并在下面的评论中提出你的问题。

好了，现在我们要做的是，如果 0 小于或等于 index，我们马上就会得到这个 index 变量。

所以如果它大于零，小于保存的节拍长度，我就到处敲，Shift Tab，离开这里，就这样。

小于我们保存的节拍文件的长度，所以这意味着您当前选择了一个节拍，我们将使用索引作为选择特定节拍的方式。

所以这个，我要把它放在这里，所以我们不要忘记传入它。

但是我们将通过单击其中一个节拍名称来选择，我们将选择我们想要载入的节拍。

这就是索引变量。

然后根据已经选定的内容，我们需要做一些额外的工作。

所以我们需要找出节拍的索引在哪里。

这将等于我们特定节拍下保存的节拍。

所以这就是为什么我们仍然希望它，等等，让我们保留节拍。

而且我们要在这里加第二个条件，B 等于 index。

这就是为什么我们仍然把它放在 for 循环中，因为这将检查并查看当我们获取每个节拍的名称时，它将检查并查看我们是否也主动选择了一个节拍。

所以 b 等于 index。

好的，接下来我们要做的是，在那个点索引处，就像之前一样，现在下一个从冒号开始，确保你的字符串在字符串变量冒号空间 BPM 中，因为这是每分钟节拍数变量开始的地方。

这使得加载的节拍，加载的节拍，这是一个新的变量，等于保存的节拍的整数点节拍，在这里要非常小心，因为我们必须再次做这种双重索引的事情，所以在节拍处保存节拍是不安全的。

然后我们要做的是从名字索引末尾加上 8 来击败索引。

它从名称索引末尾开始的原因是，或者说名称索引 n 加 8 个字符，是因为它要从冒号开始。

它将在八个字符后结束，也就是实际节拍值开始的时间。

这就是为什么我们在这里放一个铁 T 来把它转换成一个数字。

所以它所做的是，我们从这个字符索引到这个字符，我们把它变成一个数字，所以即使它看起来像一个数字 8，这实际上是在一个字符串里面。

所以它只是另一个字符串，直到我们这样做。

但现在我们又找回了充满活力的节奏，这很好。

我们必须对 BPM 做基本上完全相同的事情，因此 BPM 索引结束 BPM，do 索引结束，它也有一个新变量，将等于保存的心跳数。

然后是点索引。

当冒号被选中的时候，我没有把它放在引号里。

开始了。

出现这种情况时，索引会说，好的，这是所选 BPM 部分的结尾，这会使加载的 be PMS 与加载的 beats 几乎相同，只是索引值不同。

所以我来拿。

所以这个不是从名字索引来的，而是从节拍索引来的，它不会是+8，而是+6。

我想我又输入了 8，然后这个会一直到 BPM index 和 beats index 和 interest，dang，哦，就是 beat index。

我们开始吧。

好了，现在我们有了 BPM，节拍和它的名字。

我们没有的只是最棘手的部分，这将是被选中的列表。

所以我们现在要加载点击，对吧，因为我们在外界称之为点击。

所以加载的点击，我要区分加载的点击，因为一个字符串将等于保存的节拍，在节拍。

实际上，我们已经有了这一项所需的所有信息，它将是 BPM 指数，但这一项将是+14，好的，我将解释为什么是+14。

它会一直到末尾，减去三个字符。

原因是我们需要把弦分开。

所以如果你说，这是它开始的地方，所以 1-234-567-8910 1112 1314 个字符，在我们到达第一个字符之前，或者在我们的列表中减去一个字符，然后如果你到了最后，我们有一个空格，然后在最后结束括号，这就是为什么它到了-3，这将给我们一个所有值的字符串。

现在我们必须把这个字符串拆分成一个列表。

为了做到这一点，我们将使用内置的 Split 函数，但我们必须告诉他们在什么地方分隔每个列表项。

所以我们要拆分它，我们下到 loaded，clicks，我们现在要称它为 row 行，因为我们要拆分它两次，对，它现在只是一个长字符串，我们需要把它拆分成一个字符串列表，然后我们要把每个字符串拆分成实际的和负的。

为此，我们创建了这个中间列表，它将加载点击行，并设置为等于列表。

然后在这里面，我们加载，点击字符串。

然后点分割是内置函数，将一个长字符串分割成一个列表。

它会是这样的开括号，然后是逗号，然后是空格，然后是闭括号或者反过来，闭括号，逗号，空格开括号。

原因是，如果我们看一下文本文件，在每个条目之间分开的是什么，所选列表中的每个条目是一个闭括号，然后是一个逗号，然后是一个空格，然后是一个开括号。

这就是我们要把每一项，拆分成它自己的列表项的原因。

好了，现在我们要做一些更复杂的事情。

所以请容忍我。

一旦我们完成了这个，也许真的要看看每一行在做什么，想想它在做什么。

努力理解它，然后问我你是否还有问题。

但是对于范围内的行，我们刚刚创建的加载的点击行列表的长度。

所以我们建立了一个 for 循环来遍历那里。

我们会说如果装了子弹。

我们开始吧。

如果加载，单击行，项。

所以项目只是检查。

我们不希望这是争吵，我们希望这是项目。

我超越了我自己，我们确实希望那是 row，我们想说 loaded。

点击行，好的，等于，我要创建另一个中间变量，让我明白，因为有很多单词。

所以我们会说，加载点击行等于加载，点击，行复数在特定的行。

然后我们要做的是，我们将拆分该行项目。

我们将基于一个逗号，然后一个空格。

我加空格的原因是因为当你做一个拆分的时候，它会给列表中的每一个东西一个自己的项，但是它会去掉字符串中的这个文本。

所以我们这样做。

然后我们会把它分开，创建一个新的列表，然后我们会存储这个列表和加载的点击量行。

然后我们要做的是遍历并说 for item，因为它们还不是范围内的整数，它将是我们刚才创建的已加载点击行的长度。

好吧。

我们要做的是，检查加载的点击行单数，在 item，是否等于，我们将检查它是否等于字符串 1，或者字符串负 1。

我们这样做的原因是，一旦它被排序过一次，我们就不想再运行一次。

所以我们说，或者如果加载的点击量等于负一，因为在理论上，这是唯一两个应该相等的项目。

如果我们只需要一个手术室，就不需要另一个。

所以如果它等于字符串值 1 或字符串值-1，那么我们说加载的点击行 item 等于加载的点击行 item 的整数值。

我们这样做的原因是，一旦它变成了一个整数，就不再执行了。

所以我们不用再执行这个了，因为所有东西都已经是整数了。

好吧。

这就是我们这么做的原因。

然后我们从 if 中出来，我们说我们想要跟踪 beat 是什么，beat 中加载的是什么，让我正确地说，我们想要制作一个加载内容的点击值列表。

因此，如果我们加载了这个收集列表，它基本上反映了外部点击的世界，那么我们要确保我们在正确的时间追加。

所以我们会回到我们做这个点击列表的地方。

我们将在这里附加每个列表。

所以我们会说，让我确保我得到了我的缩进，右节拍点击点追加。

每次我们做另一行时，我们都要添加一行已加载的点击量。

然后我们说加载的点击等于跳动的点击，好了。

我们想要加载的矩形，我们想要返回被点击的矩形。

但是我们实际上需要返回加载的点击，我们需要返回节拍和 BPM。

让我们在这里做另一个变量。

我们称之为加载信息。

让我们把它列成一个清单。

所以它会有很强的节奏。

它将在其中加载 BPM，并在其中加载 click。

好的，但是我们需要做的是，因为现在有一个合理的场景，还没有选择任何东西。

所以这些可能不存在，因为现在我们定义它们的唯一地方是，如果选择了什么，如果我们已经设置了索引值，那么我们最开始要做的，就是初始化它们，就像你在程序开始的时候一样，但是我们会在函数里面做。

所以加载点击等于零，加载节拍等于零。

Load collect 是一个空列表，不为零，但是你明白了。

并且加载的 BPM 等于零。

好的，我们需要做这三件事。

然后我们把它全部传回到加载的信息中。

所以我们会把它传递回去。

我知道，这是我们做过的比较复杂的事情之一，像这样操作字符串有点棘手，但我们实际上在这里做了一些非常高级的东西。

因此，如果你是一个初学者，你应该祝贺自己，如果你只是设法跟随并理解我们刚刚做的大部分事情，因为这是一些相当棘手的字符串工作。

现在，我们开始深入到事件处理，并实际设置我们希望这些事情做什么。

所以我们来到这里，检查它不是保存菜单和加载菜单以外的区域。

所以是第二部分。

如果保存按钮客户端点长度文件，我们将继续。

好的，鼠标按钮在矩形入口上方。

我们现在想做的是，我们想说，做 L，F，我们怎么说加载矩形。

如果点击了加载的矩形，那么我们希望索引等于，我们将使用事件位置 1，也就是 y 位置，减 100。

然后我们将它除以 50。

这将为我们提供一个从 1 到 10 的值，告诉我们刚才在 y 轴上单击的位置。

我们会用这个指数来表示活跃的节拍。

让我们回到已加载的菜单，使用该索引来绘制一些内容，以指示主动选择的节拍。

好的，回到我们加载的菜单，我们传入了索引，让我确定我们确实传入了它。

加载菜单下拉菜单，我们开始。

我们想确保我们通过了。

实际上我们没有，我们没有在开始的时候初始化它，我们就在这里调用它，我们就说，index 最初等于 100。

这样，它就不会被选中。

好的，绘制加载菜单会说，好的，如果加载菜单在那里，但我们想使用索引在屏幕上绘制一个矩形，如果它在我们的范围内，所以在加载矩形下面，我会说如果索引如果零小于或等于索引，它小于我们保存的节拍列表的长度，所以这是检查我们有一个小于我们的列表的长度，然后我们将 Pygame dot 绘制 dot rect 屏幕，我们将使它成为浅灰色。

所以这将是我最后一次添加灰色，我发誓。

我们会让它变成 190。

然后我们让它从 100 加上指数乘以 50 开始。

我们会让它 1000 宽 50 高。

所以浅灰色。

让我们继续定义它。

这又一次，它朝着与我们的基本灰色相反的方向移动。

那么浅灰色，这将会像哦，像一个 171 7170 好的，现在我希望当我们做加载菜单时，load beat 破坏了一些太多的值来解包期望的四，因为我不认为我告诉它期望加载的信息返回。

让我们来看看。

法律加载菜单加载信息，并加载矩形加载信息。

正确。

我们走吧。

加载信息。

好了，现在让我们打开加载节拍。

普通的摇滚节奏。

哦，弦没有。

是啊，当然是指索引我当然有。

所以我们去看看。

我给哪个写了索引？索引，索引索引。

我们走吧。

好吧，我们再试一次。

负荷节拍，嘿，我们有一个浅灰色的矩形。

如果我点击第一个，如果我点击第二个，如果我点击第三个很好，因为那里没有节拍。

我点击这些按钮。

真贴心。

但是我们还不能删除东西。

我们还不能把东西装进去。

所以让我们继续在按钮上努力。

好了，回到我们的事件处理上来。

也许我可以用不同的方式来设置它。

但是我在每次活动的时候都会这样做。

让我们到这里来，说，好的，我们有所有这些 LFS·LFS 加载的矩形。

让我们做 l 如果删除按钮点碰撞点与事件点的位置。

如果我们删除了一些东西，那么我们想做的事情实际上并不太糟糕。

是 if index。

所以差不多是一回事。

如果索引在零之间。

因此索引需要大于或等于零。

并且索引需要小于保存的节拍长度。

我可以说小于，因为存储节拍的长度总是比它的最大索引值大 1。

所以如果有三个值，它们的索引分别是 01 和 2。

我们要做的就是保存 beats dot pop，不管它在索引中是什么，这样我们就可以删除一个条目了。

这个很简单。

我们将同时强调其中一些的功能。

一旦我们让它们开始工作，好的，那么接下来，让我们来做加载按钮，因为这个按钮有点棘手。

我们将加载按钮点碰撞，点，事件点暂停，这部分很简单。

接下来的部分很熟悉。

如果零小于或等于小于保存的节拍长度的索引。

然后，我们将设置一些变量，使其等于我们获取的信息。

所以 beats 将等于我们传递回来的加载信息，我想我们称之为加载信息。

没错。

加载的信息。

在零，所以第一件事是节拍，加载信息。

第二件事是 bpm。

所以这将是一个加载的信息。

然后第三个被点击，这将在两点载入信息。

我们将把索引重新设置为 100。

这就像一个无关紧要的数字。

然后我们将 load menu 设置为 false，就像按下 save 按钮时一样，因为您的工作现在已经完成了。

我们会的，我相信这就是我们要做的。

所以让我们去检查一下。

现在，如果我们已经获得了“load”按钮上的所有功能，我认为“Close”按钮正在工作，我认为我们可以在那里单击。

所以现在看我们的屏幕，我们什么也没做。

没有加载任何东西，如果我加载了一个普通的摇滚节拍，我点击了 Load beat，没有任何反应。

它确实关闭负载节拍。

让我们试试汤姆和拍手。

好的，很近，我能感觉到，但是没有雪茄。

这是怎么回事？好的，我认为加载按钮不起作用的原因是我们需要我们刚才做了 LF 加载矩形，它需要是 LF 加载矩形点与事件点位置的碰撞点。

因此，我真的很惊讶，索引和突出矩形的工作没有这一点。

但那应该能让我们把它装进去。

因此，让我们继续检查负载节拍通用摇滚节拍负载节拍。

我们走吧。

这真的很贴心。

现在让我们试着清理黑板。

那也是牛逼。

我们来看看删除一个有没有用。

所以，让我们摆脱汤姆和拍手，因为这是一种愚蠢的反正。

所以我们继续吧，看看能不能删掉。

看起来我们已经摆脱它了。

现在让我们用更多的拍子，每分钟更多的拍子。

让我们做 24，这是一个合乎逻辑的事情吗？让我们把它做得更大一些，比如 480，看看是否可行。

好的，我们现在在更高的地方。

我们把它关掉，这样就不会有太多的噪音了。

所以是八个。

那是 1216 20。

然后在这最后四个，我们会做崩溃。

好吧，然后让我们做低音小军鼓。

实际上，我们想把这些分散开一点，因为它的速度是普通摇滚节奏的两倍。

所以我们要做低音小军鼓。

暂停一下，然后我们会做低音低音，小军鼓技术暂停，低音，低音小军鼓，然后我们会拍拍手，拍拍手，拍拍手。

最后我们会做四次。

让我们看看四次的声音是什么样的，因为我们是硬核。

好吧，所以我要留着这块牛肉。

我要大声说出来。

你厌倦了 CBT，所以那没用。

现在。

我们需要找出为什么我们的 CBT 按钮不起作用。

我们该怎么做才能打乱这个碰撞点的剩余部分呢？暂停。

我认为我们不希望这些都是 LFS，因为从技术上讲，他们在同一个地方。

让我们看看这是否能解决问题。

我想就这样吧。

引起我们的冲突。

我们去看看。

加载节拍入口矩形，不要发现奇怪的事情发生。

我们需要检查为什么没有定义入口矩形。

它来自保存菜单。

哦，好吧，是的，入口矩形不会被定义。

因为如果保存菜单不为真，那么就没有 rect。

让我们来看看像这样的矩形。

让我们在这里补充一些东西。

如果保存菜单的话。

然后我们把这些都放进去。

我想我们对这三个也要同样的东西，因为它们只装载。

所以我们说如果加载菜单。

因此，我们确实需要区分，我们不想检查这三个按钮的任何内容，如果这不是真的，那么希望这将解决它。

所以如果我们在保存按钮时没有定义加载。

但你为什么在乎呢？我以为我已经了解你了，所以你不在乎。

哦，我们希望所有这些都在同一个 if Save 菜单中。

我们走吧。

让我们试着拍拍手。

就在那里。

普通摇滚节拍中的节拍负载让我们加载它。

是的，那是硬核。

好吧，那就 12 个吧。

让我们做些傻事。

不知道没关系。

让我们试着把它保存为一个更长的节拍。

还是省省吧。

让我们看看是否能加载更长的节拍。

好的，我去清理一下。

我将载入普通的摇滚节拍。

好吧。

我会清理干净的。

我看看能不能加入更长的节拍。

一共是 12 个。

好吧。

因此，我们能够关闭单个频道，能够播放和暂停，能够在活动或不活动时进行编辑。

我们有能力改变循环中有多少节拍，我们有能力保存节拍，我们有能力加载节拍，我们有能力清除棋盘。

这是一个非常酷的应用程序。

我在建造它的过程中得到了很多乐趣。

显然这是一个具有挑战性的教程。

我知道已经过了很久了。

所以如果你一直坚持到底。

我希望你喜欢它。

如果你对我们没有涉及到的东西有任何疑问，或者你想进一步了解，或者你自己尝试过，但遇到了困难，请在下面的评论中告诉我。

我会尽快回复你。

我希望你喜欢它。

如果你看过，请在视频上留下赞，订阅我的频道。

这对我帮助很大。

我每周都会发布大量类似这样的精彩内容。

所以，没有任何进一步的麻烦，祝你的项目好运，感谢观看。

下次见，再见。