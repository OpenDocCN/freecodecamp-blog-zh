# 面向初学者的 Android 应用程序开发

> 原文：<https://www.freecodecamp.org/news/android-app-development-for-beginners/>

75%的手机是安卓手机，75%的互联网用户只用手机上网。所以安卓应用的市场很大。

我们刚刚在 freeCodeCamp.org YouTube 频道上发布了 Android 应用开发速成课程。如果你是 Android 应用程序开发的新手，这个课程是完美的。

拉胡尔·潘迪开发了这个课程。拉胡尔是脸书 Android 领导者，也是斯坦福大学的讲师。

在本课程中，您将通过构建一个提示计算器来学习 Android 开发。本课程假设你之前没有使用 Android 的经验，到最后你会有一个可以发布的应用程序。

您将学习如何使用 XML 创建用户界面，以及如何使用 Kotlin 编程语言编写逻辑代码。这些是任何现代 Android 应用程序的基本构件。

您还将学习如何为布局使用 ConstraintLayout，以及为应用程序逻辑使用两个事件侦听器。在您输入基本金额和小费百分比后，应用程序将为您计算小费和总额。您还将实现一个提示百分比动画和页脚，使我们的应用程序更加独特。

观看以下课程或 freeCodeCamp.org YouTube 频道上的[(1 小时观看)。](https://youtu.be/FjrKMcnKahY)

[https://www.youtube.com/embed/FjrKMcnKahY?feature=oembed](https://www.youtube.com/embed/FjrKMcnKahY?feature=oembed)

## 副本

(自动生成)

在这个初学者课程中，你将学习如何创建一个来自 Rahul Pandey 的 Android 应用程序。

Rahul 是脸书大学的一名 Android 工程师，也是斯坦福大学的一名讲师，我们将从头开始构建一个 Android 应用程序，我们将从一个空项目开始，以一些你可以实际使用的东西结束，甚至发布到 Play Store，我们将构建一个小费计算器，在那里你可以输入基本金额、小费百分比，应用程序将为你计算小费和总额。

我们将使用 kotlin 编程语言来构建这个应用程序。

所以我假设你有一些编程背景。

但是如果你是 kotlin 的新手，我会在描述中留下一个链接，链接到一个关于我制作的语言的 12 分钟快速入门。

我是 Rahho，我已经在 YouTube 上和 YouTube 外教授 Android 有一段时间了。

所以，当你准备好了，让我们一起来开发这个应用吧。

我想在这个视频中讲述三件事。

首先，我想介绍一下小费计算器应用程序的主要特性。

第二，我将解释我们在构建 Android 时将涉及的核心概念。

第三，因为我有意让这个应用程序非常简单，我还想提出一些我们在构建它时不会遇到的 Android 概念。

这些将在以后更复杂的 Android 应用程序中讨论。

我之前提到过，一旦他完成了教程，你可以直接在谷歌 Play 商店上发布这个应用程序。

这正是我所做的。

因此，如果你想尝试我们将要构建的东西，那么请随意查看描述中的链接，并在你的一个 Android 设备上下载。

因此，让我们做一个应用程序的演示，这样我们就可以了解我们将要构建的主要功能。

在这个例子中，我出去吃了一顿非常奢侈的单人晚餐，我花了 83.15 美元。

我留下了相当丰厚的 24%的小费，苹果会自动计算小费和总额。

为了让计算简单一点，我们为什么不把基数更新为 100 美元。

你可以看到，出现的键盘只允许我们输入数字和小数，这很有意义，因为我们在这里处理的是货币。

如果我对用餐时得到的服务感到非常满意，我可以提高小费的比例，使其达到 30%的最大值。

这里发生了两件事。

一个是我们在 30 动态更新小费和总金额计算。

太阳是 130 度。

但是，我们也更新了小费比例的描述。

所以从伟大到惊人，也变成了这种更明亮的绿色。

另一方面，如果我真的对服务不满意，我可能会给零小费。

我们认为这是一个可怜的提示。

你可以看到颜色是如何变成红色的。

在页脚的底部，我们还有一个个性化应用程序的方法，这样你就可以说出你是谁，你是谁，你来自哪里。

我们在提示计算器中涵盖的概念与每个 Android 应用程序的基本概念相同。

首先是创建 UI。

每个应用都需要一个用户界面。

这里我们将利用的核心组件是一个约束布局，它将包含其他小部件，例如 TextView 或 seekpart，在提示百分比中输入。

第二，每一个有趣的 Android 应用程序都会倾听用户的输入并做出反应。

因此，我们有两种方式在我们的应用程序中输入数据，一种是输入基本金额。

第二是小费比例。

基于此，我们需要做出反应并适当地更新 UI。

第三，我们将仅仅触及 Android 上的样式和动画的表面，我将向你展示如何更新一些颜色，还将向你展示如何用提示描述做一个动画，并动态地改变它的颜色。

小费计算器中也有很多我们不包括的东西。

这一点很重要，因为这样可以缩小应用范围，让这个应用变得非常快速和简单。

来建造。

如果你是 Android 新手，首先，我们不会有多个屏幕。

这意味着我们不必在 Android 中处理导航或后台堆栈之类的事情。

事实上，我们拥有的单一屏幕实际上非常简单，因为我们没有任何需要管理的列表数据。

第二，我们与互联网中的联网无关。

一旦您开始与 API 或服务器对话，事情就会变得相当复杂，因为您必须处理异步编程和管理这些数据。

第三，我们也完全不处理存储，一切都在本地和内存中。

因此，我们不会写入数据库、磁盘或任何地方的云中。

所有这三个都使得应用程序的构建更加简单。

所以我确信，当你做好这个，走进一家餐馆时，你会非常受欢迎，因为你可以很容易地计算出小费金额，而且你的名字会出现在应用程序上。

下一段视频再见。

在此视频中，我们将从全新的 enter studio 项目开始，并为我们的提示计算器布局视图，特别是，我们将布局八个视图，其中左侧的四个文本视图将描述右侧显示的内容。

我们要做的第一件事是创建一个全新的 enter studio 项目。

因此，我在我们的工作室运行这里，我运行北极狐，但任何最近的版本应该做新项目的 tap。

我将选择空的活动模板。

这些其他的有时是有用的，但是它们给我们的应用程序带来了很多麻烦，这可能会令人困惑。

所以通常情况下，我会选择空活动。

让我们称我们的应用程序为 Tippie。

包名，通常我会把我的域名或者电子邮件地址倒过来。

因此，我将保持原样，然后选择一个位置，确保您有 kotlin，选择这种语言。

我将选择 API 21 的最低 SDK 版本。

现在，我将点击完成。

每当我有一个全新的项目时，我喜欢做的第一件事就是试着运行启动代码。

因为如果我们连启动代码都不能运行，那一定是哪里出了问题。

在开始编写任何代码之前，让我们确保我们处于一个已知的好位置。

当我们在工作室创建一个新项目时，将需要一些时间来设置一切。

要运行我们的应用程序，我们可以转到菜单中的下拉菜单，选择将我们的应用程序部署到仿真器或物理设备。

因此，我将选择 pixel two API 29，这是我之前创建的一个仿真器，如果它不存在，请点击绿色三角形来启动我们的仿真器，然后将我们的项目构建并部署到该仿真器。

你会在 Android Studio 的底部看到状态，以了解当前的进度。

这可能需要一两分钟。

但当它完成时，应用程序会自动发送到设备并被带到前台。

所以我们需要做的就是等待，直到我们在模拟器上看到一些动作。

好极了。

这看起来很有希望。

我们看到一个名为 so open emulator 的应用程序，带有 hello world 的文本，这是一个空项目的默认文本。

这给了我们信心，我们能够成功地运行这个基础项目。

让我们到 inner studio 花几分钟时间讨论一下启动文件。

实际上，这很简单，因为我们只关心两个文件，主 activity dot kotlin 和 activity main dot XML，在 Android 术语中，你可以把一个 activity 想象成代表一个屏幕。

所以对于我们现在的项目，我们只有一个屏幕。

这被称为主要活动或主屏幕。

这就是我们在这个名为 main activity 的文件中定义的业务逻辑。

特别是，起始代码给了我们一个已经被覆盖的函数或方法。

这被称为 onCreate，当我们的应用程序开始创建我们的屏幕时，Android 系统会自动调用这个函数。

这里重要的一行是第九行 setcontentview r dot layout activity main。

所以 R 代表资源。

所以我们在这里说的是，屏幕的内容或 UI 应该是资源中的布局文件，在 activity main dot XML 中定义。

事实上，如果我们跳到它的定义，我们可以看到它直接指向活动主点 XML。

因此，我将最小化这里的项目工具窗口，给我们自己更多的空间。

这也是最小化属性窗格。

这就是我们在应用程序中看到的，只是一个带有 HelloWorld 的空白画布。

特别是，如果你看这里的组件树，它可能会被最小化。

但是您可以通过点击这里来展开它，我们可以看到父元素是一种叫做约束布局的东西。

它只有一个名为 TextView 或 label 的子元素。

它有一个值为 hello world 的属性。

这就是我们在运行的应用程序中看到 Hello World 文本的方式。

在这个视频中，我们将把所有的时间花在 activity main dot XML 上，因为我们现在只关心为我们的应用程序构造 UI。

特别是，这是我们想要的结束方式，我们将在屏幕上显示八个组件。

在左边，我们有四个不同的文本视图，你可以想到一个文本，你想要一个标签，它是用户不可编辑的。

在右边，我们有由 TextView 描述的实际组件。

因此，我们在顶部有一个编辑文本，允许用户输入账单金额，我们有一个搜索栏，允许用户输入小费百分比，然后在底部有两个文本用于显示小费和总金额。

在我们开始构建我们的布局之前，还有一件事我想说出来，那就是我们的 UI 有多个视角，我们默认看到的是设计预览，这是实际上会显示在您的仿真器或设备上的内容。

但是您也可以下拉到 code 选项卡，这是实际的底层 XML。

因此，您可以看到我们如何使用约束布局，然后一个子视图查看与设计相同的文本视图。

分裂意味着你两个都看。

我们的大部分时间将花在设计预览上。

我们能做的是进入调色板，拖放不同的组件，如文本视图或编辑我们想要的文本。

同样，这将显示在“代码”选项卡中。

所以请记住，在设计预览中所做的任何更改与底层 XML 之间都是一一对应的。

现在，让我们回到设计，删除所有的组件，这样我们就有了没有子元素的单一约束布局。

文档将约束布局描述为使用平面视图层次创建大型复杂布局的一种方式。

我们能够通过我们定义的一组约束来描述兄弟视图和父布局之间的关系。

这使得内部系统能够在多种尺寸的手机或平板电脑上优雅地布局我们的用户界面。

这里重要的是没有嵌套的视图组。

在 Android 上，如果你有一个非常深的嵌套视图层次结构，那会导致很多性能下降，我们称之为 jank 或 UI 滞后。

因此约束布局允许我们在没有嵌套视图组的情况下创建复杂的视图。

回到 tip calculator 项目，我们将在单个父约束布局中在屏幕上布局所有八个视图，没有嵌套的视图组，这是我们能做到的最好的，在我们的父约束布局中没有相对布局或线性布局。

因此，即使您以前从未使用过约束布局，现在也花一点时间考虑一下如何在屏幕上相对于彼此定位视图，以便我们可以在平面视图层次结构中描述它。

回到 Android Studio，我们要做的第一件事是拖出一个表示屏幕左上角组件的 TextView，这是表示基表的 TextView。

每当我拖出任何组件时，我做的第一件事就是将 ID 更新为更有意义的内容。

所以我就把这个电视叫 base 标签，然后把文字更新为 base。

你会注意到 Android Studio 抱怨这个 TextView 缺少约束。

所以它只有设计好的时间位置，它会跳到位置 00，这是运行时屏幕的左上角，除非我们添加约束。

这是约束布局的要点，我们必须在垂直和水平方向上约束每个组件。

因此，在垂直方向上，我们要做的是拖动基于电视的标签的顶部锚点，并将其拖动到屏幕顶部。

然后在“属性”选项卡中，我们将指定它离屏幕顶部的边距，我将在顶部指定 48。

类似地，我们希望指定一个左边距，所以我们将拖动左锚点并将其拖动到父节点，并将其指定为距离屏幕左端 32 dP。

现在，您可以看到错误消失了，我们现在将对屏幕左侧使用的其他三个文本执行相同的过程。

从基本标签正下方的标签开始是电视小费百分比标签。

作者在这里的文字是 24%。

下面的文本视图将成为电视提示标签。

文本将被提示。

最后我们会有电视总标签。

这里的文字是完整的。

因此，我们有同样的问题，我们必须限制所有这些水平和垂直，垂直，我们要做的是采取每个文本视图的顶部锚点，并将其拖动到它上面的组件。

我们将指定 32 dP 的边距，这意味着每个文本应该比它上面的文本低 32 个像素，这将拖动顶部锚点，并将其拖动到它上面的文本的底部锚点。

再次，做同样的事情 32 dP 垂直约束这些视图。

那么水平方向呢，如果我们回到所需的最终状态，您会注意到，如果我们在这里画一条垂直线，左侧的所有组件都将与顶部文本 you this TV base table 的右端对齐。

这就是我们想要水平约束它们的方式。

我们实际上可以在“设计”选项卡中这样做，你可以说“对齐”，然后对齐右边缘。

但是我想在代码选项卡中向您展示如何做到这一点。

因此，如果我打开“代码”选项卡，就像我们讨论过的那样，您在“设计”选项卡中所做的每个更改都会在“代码”选项卡中有相应的更改。

所以现在我们有四个纹理，这正是我们在这里看到的，我们有 1234 个，就像我们说过的，现在有一个错误，因为我们没有横向约束这些。

这就是为什么我们有这个红色下划线。

垂直约束就是你在这里看到的。

因此，我们与这条线沟通的是，电视提示百分比标签的顶部应该与电视基本标签的底部完全相等，上面是 TextView，还有 32 dP 的边距，这意味着您希望它比上面的组件低 32 像素。

同样，我们想要做的是指定该组件的结尾，电视提示百分比标签应该等于基于电视的标签的结尾。

我们希望这适用于左侧的每个组件，这样，您就可以看到错误是如何消失的。

如果我们返回到“设计”选项卡，您可以看到现在一切都是一致的。

还有一点我想在这里指出的是，工具名称空间仅用于呈现设计预览。

因为我们现在已经在水平和垂直方向上完全约束了这些视图，所以实际上我们不再需要它了。

因此，我将选择其中的每一项并将其删除。

还有一件事，我非常喜欢不同属性名称的一致风格和排序。

例如，这里我们在同一行或新行上有结束尖括号。

要为我们自动解决这个问题，我可以点击“双移”，然后只需搜索 re 格式。

还有一个重新格式化代码的捷径。

如果我这样做了，那么你可以看到 Android Studio 是如何帮助我们修复整个文件的，这是我更喜欢的。

好的，让我们回到设计选项卡。

在我们继续讨论屏幕右侧的组件之前，我想做一些快速的设计调整。

首先，我想把这里的文字放大一点。

因此，我将使文本外观中等，你可以看到它是如何变大的。

然后这个电视提示礼物标签有点独特，因为它代表了用户实际选择的礼物的价值。

因此，为了表明它与其他的有一点不同，我将在这里将文本加粗。

酷，我喜欢。

现在让我们考虑一下屏幕右端的四个组件。

这将是编辑文本，下面是我们看到的工具条。

下面是两个文本视图。

所以让我们拖出一个编辑文本。

我们要拖动的是一个表示十进制数的。

所有这些不同的编辑文本之间的区别其实很简单。

简单来说就是输入类型。

因为我们在和货币打交道，所以我们需要数字和小数。

在这下面，我们将有一个搜索栏。

在那下面，我们将拖动到文本视图。

好吧，让我们更新这里的 id，使之更加合理。

这就叫做基础量。

接下来我们有 seekbar 提示。

然后我们有电视小费金额。

最后，我们得到了电视总收入。

我们把这里的文字更新为 103 点 11。

这个，我想我们说的是 1996 年。

在定位这些元素之前，让我们做一些设计调整。

这些底部纹理是整个应用程序中最重要的部分。

所以我要把文字做大。

seekbar，我将指定一个 200 dP 的硬编码宽度，使它稍微宽一点。

这里还有一个名为 Max 的属性，它是 seekbar 可以容纳的最大数量。

一共是 30 英镑。

因为我们最多只允许 30%。

对于编辑文本，我将把 EMAS 设置为 8，这意味着这个编辑文本有多少字符宽，8 对我们来说足够了，我将把文本大小增加到 24 SP。

最后，我将在这里添加一个提示或一个占位符，它是用户知道此编辑文本用途的账单金额。

现在我们来思考一下如何定位这些。

所以在垂直方向上，底部的两个文本，你应该垂直对齐，所以我要选择这两个文本，然后对齐垂直中心。

类似的还有那些上面的。

类似地，小费比例和 seekbar 也是如此。

您可以看到，在“设计”选项卡中，我们实际上可以看到添加的约束的预览。

对于账单金额。

让我们考虑一下如何在水平方向上约束它，它将距离左侧的相应文本 32 dP。

在水平方向上，右侧的所有其他组件，即底部的三个组件应与账单金额编辑文本的左端对齐，必须选择所有这些组件，我将指定左边缘应全部对齐。

看起来不错。

我们现在要做的唯一一件事是，如果我们悬停在这里，我们将失去编辑文本的垂直约束。

为此，我将进入“代码”选项卡。

这是基本金额的编辑文本。

我们传达垂直定位的方式是将此元素的顶部视为左上角视图的顶部，该视图是一个电视基台，类似地，该视图的底部也应该是电视基台的底部。

所以它会在正中间。

因此，如果您返回到“设计”选项卡，可以看到现在错误已经消失了。

你可以直观地看到这些约束是什么样子的。

如果您返回到 Design 选项卡，同样，我们不再需要这个工具名称空间，因为我们完全约束了一切。

让我们快速重新格式化代码。

然后我想做的另一件事是，尽管这不是必需的，但为了运行程序，只是为了开发人员的信息，我想用注释来标记这些。

这些是左边的视图。

对于文本视图，从编辑文本开始，这些是右侧的视图。

没错看看这是什么样子。

好吧，太棒了。

正如我们所料，这与我们在设计预览中看到的非常相似。

我想在这里修正或改进的唯一一件事是，虽然用户实际上没有输入任何东西，但我们已经有了小费和总金额的值，这有点奇怪。

这正是我们之前谈到的工具命名空间的目的。

所以我要做的是选择相应的文本视图。

这里没有文本，我将向下滚动。

我将把它移到扳手文本区域。

这就是工具名称空间。

因此，我将把这些移到工具文本中。

最后，这里也是一样。

为了向您展示这一点，如果我们返回到“代码”选项卡，如果您现在查看电视提示百分比标签，而不是 Android 文本属性，现在是工具文本属性。

如果我们最后一次运行应用程序，让我们看看它对初始布局的影响。

太棒了，看起来不错。

希望这个视频让你对约束布局的威力有了一个很好的认识。

我可以向你们展示的一件事只是为了演示我们所做的，就是在屏幕上的这八个视图中，它们都被定位，而不是一个单独的父对象。

如果我拖动左上方的文本视图，所有的东西都会跟着移动，这是一个很好的方式来约束所有的视图。

因此，下一个视频中的工作实际上是连接主活动中的业务逻辑，这样我们就可以对输入做出反应，并计算总小费。

下期视频再见。

在上一个视频中，我们在屏幕上展示了小费计算器应用程序的八个视图。

在这个视频中，我们希望添加业务逻辑，使我们的应用程序真正具有交互性，我们希望能够做到的是，当用户在座位栏上滑动时，我们希望更新小费百分比标签。

当他们输入一个基本金额时，我们要取这个值，然后计算小费的总额。

特别是，您会注意到没有提交按钮。

因此，一旦用户更改了基本金额或小费百分比，我们希望在任何事情发生变化时动态计算小费和总金额。

因此，作为第一个练习，我希望能够做到的是，一旦用户更改 seekbar 上的值，我希望能够更新百分比标签。

因此，为了做到这一点，我们要做的第一件事是获取对屏幕中视图的引用，我们实际上需要能够从中读取数据或修改数据。

屏幕上实际上有五个不同的小部件，我们关心的是小费百分比标签，然后是屏幕右侧的所有组件。

在我们的工作室里，我们会为每个组件声明一堆变量。

例如，我们有编辑文本，这将是基本金额。

这将是一个编辑文本类型。

但是不要太担心这里的语法。

如果它令人困惑，我们所说的只是一个私有变量。

这是一个后期初始化，因为我们要在 onCreate 方法中初始化它，而不是在构造函数中，这就是为什么它的后期初始化是一个变量，我们在 base mount 中调用它，我遵循的约定是，变量的名字和 ID 的名字完全相同。

所以现在在 onCreate 中。

在设置内容视图后，我们将说在基础装载时通过 ID et 基础数量查找视图。

现在，我们将对屏幕上的其他四个组件重复这一操作。

所以我们有一个搜索条提示。

这里的类型是 seekbar。

然后我们有电视小费百分比。

这将是给你的短信。

然后我们还有两条短信。

一个是电视小费金额，一个是电视总金额。

现在，我将在 onCreate 中取出对所有这些的引用，最后我们就有了总数。

回到我们的目标，你要做的第一件事是，当用户在座位栏上滑动时，我们希望得到用户输入变化的通知，然后更新电视提示百分比标签来表明这一点。

因此，实际上，让我更新这里变量的名称，只是为了保持一致。

我们得到座位栏更改通知的方式是在它上面添加一个监听器，它会显示 seek bar 提示点 set on seek bar change listener。

现在我们需要告诉表演者当座位栏改变时应该发生什么。

这里的语法是我们要说 object，seek bar.on，seek bar，change listener。

然后我们要在这里定义这个类。

“输入 today”将帮助我们实现这一点，您将在“object”下看到红色下划线，点击红色灯泡并点击“implement members”。

为了符合 seekbar，change listener 上的定义，我们必须覆盖三个方法。

NRC 会帮助我们的。

别太担心。

同样，语法令人困惑。

这里的细节是我们正在定义一个实现这个接口的匿名类。

所以，如果我看这里的定义，你可以看到这是一个公共接口，它有我们已经覆盖的那三个方法。

现在我们的工作是告诉系统，当每个方法被调用时应该发生什么。

实际上，我们并不关心开始跟踪触摸或停止跟踪触摸。

所以我要在这里去掉两个 due，让它空着实现。

在我们更新 UI 之前，让我们首先在 Android 中添加一个 log 语句，以便更容易地弄清楚发生了什么。

所以我会登录 I，这是一个有两个参数的方法。

第一个是字符串，我称之为 tack，我稍后会定义。

第二个也是字符串，它是消息或日志语句。

我会说在进度改变时，这是一个方法名，以及进度，这是 seekbar 的当前值。

让我们来定义这个标签，我将在类的顶部定义一个私有的 const Val 标签。

这里的约定是，每当你有任何类型的日志记录时，标签通常是类名。

好吧，让我们试试。

所以这里的想法是，每次座位栏上的进度发生变化时，这意味着用户正在擦洗，我们将打印出 logcat 中显示的当前值，这是日志输出它的位置。

所以打开 logcat。

打开模拟器。

我们关心的日志只来自我们的应用程序，它是 calm，calm，rk Pandey 蒂皮，我们也只关心信息级日志，因为这就是 log.io 代表的信息级日志。

我们也只关心日志，它有这个特殊的标签，这是主要的活动。

所以让我们添加主活动作为过滤器。

在这里，当我们更改座位栏时，您可以看到我们如何获得一行 logcat 输出，它准确地表示了座位栏显示的当前指示器。

因此，如果我们一直走到最大值，我们会看到预期的 30，如果我们一直往下走，我们会看到 0。

所以现在让我们更新用户界面。

特别是，我们希望更新电视提示百分比标签，以指示 seekbar 的当前进度。

因此，我们将说电视 2%，标签的文本属性，我们将设置为等于进展。

但实际上，我们希望进度表示为字符串，而不是 int。

我们还想在它后面连接一个百分号。

所以我们会说美元符号进度，这就是我们在 kotlin 中进行字符串插值的方式。

类似于我们在 log 语句中所做的，然后在末尾添加一个百分号。

让我们试一试。

因此，当我们在搜索栏上拖动时，你可以看到电视提示百分比标签是如何与搜索栏的当前进度同步更新的，这很好。

这里有一个改进，最初，我们没有在标签上标明小费的百分比。

为了解决这个问题，我们再定义一个常数，我们称之为初始 tip present。

所以我们会有一个私有的常量初始小费，我们会设置为 15。

所以最初，默认的小费是 15%。

因此，在我们对侦听器做任何事情之前，用那个占卜器常量，在 onCreate 方法中，将它们搜索棒提示点进度等于初始提示百分比。

我们还想适当地更新标签。

因此，我们会说电视小费百分之标签点文本等于初始小费百分之，与百分比符号后。

现在，当我们运行应用程序时，我们应该看到 15%而不是空白的 2%标签，就像我们做的那样，进度条指示器正好在整个座位栏宽度的中间。

接下来，类似于我们如何能够对座位栏中的变化做出反应，我们也希望能够对编辑文本中的变化做出反应，所以在 ET 基础挂载上有一个类似的方法，我们称之为添加文本变化监听器。

语法是相似的，我们在这里传入一个对象，它是一个匿名类，是文本监视器的实现。

我们还需要 Enter 来帮助我们，有些方法我们必须重写。

因此，我将点击红色灯泡，实现成员三，覆盖所有成员。

与之前类似，我们唯一关心的是文本更改后，我将删除这里的实现体。

只是为了更好地了解这里发生了什么。

同样，让我们在文本更改后添加一个日志语句。

美元注册。

好吧，让我们试试。

所以美元符号 s 是传入的参数。

这实际上就是用户当时正在输入的内容。

运行这个，让我们再次打开 logcat。

好的，就像之前一样，如果我修改搜索栏，你可以看到它在适当地变化。

然后，如果我将该值添加到编辑文本中，您可以看到 800，它正在日志中适当地更新。

两个小提示。

首先，我有时会看到学生在 kotlin 中调用函数时出错。

当我们调用 log into 时，你看到的 MSG 是一个来自 energy 的提示，关于那个参数代表什么。

所以如果你真的输入 MSG，会导致编译错误。

所以我们要确保你不会这么做。

第二，我想揭开 object 关键字的含义。

所以像我们目前为止两次使用的对象表达式，是如何创建匿名类的例子，匿名类是一次性使用的类，通常用于实现接口。

所以我们有文本观察器和 seekbar 变化监听器作为 Android 系统定义的接口。

当用户对底层的编辑文本或 seekbar 进行适当的操作时，我们覆盖的这些方法会自动被调用。

因此，现在我们已经具备了让这个应用发挥作用的所有要素。

每当编辑文本改变时，我将调用一个名为 compute、tip 和 total 的方法。

这实际上是从编辑文本和搜索栏中获取值，然后适当地更新小费和总金额。

所以这个方法还不存在。

但是，让我们再次利用 Android Studio 的工具，在 main activity 中为我们创建这个函数。

在这个方法中有几件事必须发生。

首先，我们想得到基本小费的价值。

第二，我们想计算小费的总数。

第三，我们需要更新 UI 来显示这些值。

因此，要获得基本提示的值，非常简单，我们只需查看基本金额的编辑文本，获取文本，然后调用字符串。

然后在一个字符串上，我们知道它会是一个类似于十进制的货币，所以我们会调用 double 来处理它，以便把它变成我们可以处理的数字。

我们称之为基础量。

然后类似地，对于 2%，我们想得到座位条上的进度值，这个属性叫做 progress，它将被保存在一个变量中，我称之为 tip percent。

接下来，我们要计算小费和总金额。

所以小费的数额就是基本数额，乘以小费的百分比除以 100。

例如，如果基本金额是 100 美元，我吃了 100 美元的一餐，小费比例是 20%，那么我希望小费金额是 20 美元。

所以 20 除以 100 等于 20%乘以 100。

这给了我 20 美元。

所以这是小费金额。

然后我们有了总金额，总金额就是基本金额加上小费金额。

好了，最后，我们需要更新用户界面。

同样，这变得非常简单，因为我们引用了显示小费和总金额的两个文本视图，这是电视小费金额，我们将在那里设置文本属性为小费金额。

这将会抛出一个错误，因为小费金额是一个数字，它是一个双右数，但我们实际上需要一个叫做汽车序列的东西。

为了给它一个汽车序列，我们可以调用字符串。

然后类似地，我们调用我们需要说的电视总金额是，这里的文本属性是总金额为字符串。

这应该是一个加号。

等等，这是我们应用程序的整个大脑。

所以如果我们运行这个，那么我们要做的是，每当编辑文本值改变时，我们要调用这个方法，我们应该更新 UI，以得到正确的小费金额和总金额，对，所以我们有 15%。

对于小费，如果我在这里加上 100 美元，那么你会立即看到我们得到了正确的小费和总计算。

如果我改变座位条，也就是 2%,我们会得到相同的逻辑。

事实证明这很简单，因为我们已经把所有的逻辑都抽象到这个方法中了。

因此，我将调用 compute tip 和 total，就在进度更改中。

好的，如果你现在尝试这个，我们应该有一个非常实用的应用程序。

和之前一样，如果我放入 100。

在这里，我们确实正确地计算了 115。

如果我改变百分比，你可以看到它会相应地更新。

好吧，这实际上很有效。

但是有两件事我认为是不正确的或者可以改进的。

但是，现在请花一点时间思考一下，您可以对我们现在使用的应用程序做哪两项改进，尝试使用它，看看您是否能发现任何问题。

好的，我们能做的第一个改进实际上是一个 bug。

所以请注意，如果我在基本金额上退格，会发生什么，所以那里什么也没有，所以你可以看到应用程序实际上崩溃了。

因此，如果我们查看 logcat，让我们看看实际上是什么错误。

所以我要向上滚动到堆栈跟踪的最顶端。

您可以在这里看到我们有一个数字格式例外。

这是重要的部分，有一个空字符串。

堆栈跟踪告诉我们问题发生的确切位置，这是一个主活动行 58。

所以现在发生的问题是，当编辑文本有一个空值时，尝试将空字符串转换为双精度值是没有意义的。

我们在这里不应该做的第一件事，实际上是检查基本量是否为 dot txt，如果是空的，那么我们需要做一个更早的转向。

此外，我们应该清除电视小费和总金额的值。

因为如果编辑文本是空的，这意味着没有东西可以点击。

我们应该对这两个纹理什么都不显示，然后我们调用 return，这样剩下的函数都不会被执行。

我们要做的第二个改进是格式化小费和总金额的输出。

所以当我们输入 100 作为基数时，这并不明显。

但是如果我们加上 100.9，那么你可以看到总数变得很长很难处理。

因为我们处理的是货币问题，所以我们真的应该强制要求小费和总额中有两位小数点。

我们要做的就是在这里，而不是仅仅调用字符串，我们要在把字符串放入文本视图之前格式化它。

所以我们用这种格式化的方法。

所以我们像这样定义格式，从百分比到 F，这意味着我们只需要小数点后的两个数字。

我们会传入小费金额。

然后类似地，对于总量，一个百分比点两个 f 的格式。

让我们试一试。

希望现在，在这种情况下，我们应该最终得到 116.04，而不是这个很长的小数，你可以看到，不是只有一个小数点，而是有两个。

真正的考验是当我输入 100.9 的时候。

现在，它的显示要好得多，我们有 116.04，而不是那个变得不可读的大小数。

现在，我们有了一个非常实用的应用程序，我们所做的是获取对布局上相关视图的引用，然后将 seekbar 的侦听器添加到编辑文本中，因为没有提交按钮。

只要搜索栏或编辑文本有任何变化，我们就会动态地计算小费和总额，并相应地更新这个计算小费总额的视图。

所以在下一个视频中，我想向你展示的是一些风格上的改进，以及个性化和添加一个非常酷的动画的方法。

下一集见。

至此，我们已经完成了小费计算器的实现。

在这个视频中，我们的目标是在应用程序中添加一些彩色动画和个性化。

所以我们从底部的页脚开始。

很多应用程序或网站都有这个，上面写着“你知道，在加州用爱制造”或“这个人用爱制造”。

因此，我们将从在屏幕底部添加文本开始。

让我们进入 studio，打开 activity main dot XML，向下滚动到底部，我们将在这里拖出一个 TextView。

让我们给它一个电视页脚的 ID。

然后，文本将由 raw 用爱来制作，当然，你可以个性化你想要约束它的方式。

我们将把它水平地放在屏幕的中央。

因此，我们将添加一个左右直线，使其居中，然后我们将使其距离屏幕底部 32 dP。

我还想在这里添加一些不同的风格调整。

首先是全部大写，我想让这里的所有内容都大写。

而且我想把字体改成无衬线，浓缩，轻微。

最后，我想把它做得稍微大一点，看起来中等大小。

最后，我想用表情符号改变爱情这个词。

你可以将它添加到你的键盘上，或者另一种方法是，如果你在谷歌上搜索心形表情符号，那么出现的第一个结果，会给我一个复制和粘贴表情符号的选项。

把那个贴进去。

它在预览中看起来有点奇怪，但当你在设计中渲染它时，它会正确地显示出来。

如果我们在应用程序中查看。

太棒了，看起来不错。

我想做的下一件事是配色方案。

因此，我们远离这些默认的状态栏颜色原色在这个背景白色。

所以让我解释一下这些颜色是从哪里来的。

有一个非常重要的文件必须存在于每一个 Android 应用程序中。

这就是所谓的 Android 清单文件。

因此，如果我们打开它，那么这个文件描述了你的应用程序的所有不同的组件，权限，例如，如果你的应用程序需要互联网权限，等等。

对我们来说重要的一行是在第 11 行，在这里我们描述了应用程序的主题，这是一个在我们创建空项目时自动为我们创建的文件。

所以我要跳到这里的定义。

您会看到这里有两个不同的文件，一个用于普通主题，一个用于夜晚主题。

我们现在看到的是正常的，我要把它打开。

这是我们获取默认应用程序颜色的地方。

因此，为了更新颜色，我们必须定义新的颜色，然后在这里替换它们，我们可以通过点击此选项来查看该文件所在的位置，选择“打开文件”,我们可以看到它位于资源、值和主题目录中。

颜色也是在 values 目录中的 colors XML 内部定义的。

每种颜色都被定义为十六进制值，紫色、500 等等。

所以我们的工作是找出我们想要的颜色，然后在这里添加它们。

然后我们将在主题 XML 文件中引用它们。

所以为了弄清楚你想要什么颜色，有几个不同的选择，我会告诉你如果你去 color.adobe.com 我通常会怎么做。

有一个非常好的工具，你可以从中找到你想要的配色方案。

这里有几个不同的选项，你可以选择色彩调和规则，类似的单色三原色，等等。

一旦你对某样东西满意了，你就可以向下滚动，在这里找到十六进制值。

所以我已经做了这个练习。

这是我想出来的颜色，我将有一种颜色叫做原色蓝，深蓝色和背景蓝。

让我们继续深入到颜色 XML 中，定义这些颜色，第一个颜色将被称为原色，蓝色现在有了这个值。

下一个是背景蓝，或者下一个是深蓝色。

最后，我们有蓝色背景。

所以现在在主题 XML 中，我将原色更新为蓝色。

然后我将主要的变体更新为深蓝色，这将是状态栏的颜色。

最后，为了在整个应用程序上有一个背景颜色，我将在这里添加一个属性，它被称为背景颜色，Android 颜色背景。

这就是我们的蓝色背景。

让我们试一试。

太棒了，看起来棒极了。

所以我们现在非常接近想要的最终状态，我们有页脚，我们有定制的颜色。

最后要说的是提示描述上的这个动画。

这实际上是这样的。

当用户擦洗时，我们将动态更新用于描述当前小费比例的单词的颜色，如果小费很差，它将从红色变为非常亮的绿色，如果小费很好。

不仅如此，我们还将改变用来描述小费比例的那个词或那个形容词。

所以它给了用户一些非常好的互动反馈，告诉用户他们会留下什么样的小费。

好的，那么我们要做的第一件事就是添加文本你需要搜索栏并增加这两个文本之间的垂直距离。

因此，关闭这些其他编辑器窗口，因为我们不需要再次查看它们。

在主活动中。

我们要做的是首先增加 24%即 2%标签和电视提示标签之间的距离。

让我们把这里的页边距增加到 56。接下来，让我们多拖出一个文本。

我们称之为电视提示描述。

然后文本应该是空的，因为这将取决于初始的小费百分比，这是通过编程设置的。

但是为了更好地理解这可能是什么样子，我们将使用一个工具名称空间，并在这里说 acceptable。

看起来不错。

现在我们需要水平和垂直地定位它。

因此，在垂直方向上，它将位于搜索栏提示栏的正下方，我们将在这里添加一个大约 dp 的边距。

然后我们希望这两个水平对齐。

水平居中，很好。

你可以看到它是如何添加左右约束的。

所以它会在正中间。

你可以看到错误也消失了。

现在回到 MainActivity 中，我们需要获得对那个 TextView 的引用。

假设这里的 ID 是电视提示描述。

因此，当我说电视提示描述时，请在此处查阅。

每次 C 部分改变的时候，那就是我们现在有潜力的地方，来更新那个文本上的语言，你想在这里有多一个方法，叫做更新提示描述。

让 Enter 来帮助我们创建它，因为这个方法还不存在。

我们实际上要做的一件事是作为参数进入更新提示，描述方法，我想在进度和进度中传递。

同样，energy video 现在可以帮助我们将此作为参数添加到我们定义的函数中。

点击红色灯泡，进入帮助我们添加参数，我在这里所做的就是添加一个参数。

与其称之为进步，我不如称之为小费百分比。

我输入的是。

因此，现在的想法是，根据小费的百分比值，我们希望能够说电视小费描述点 txt，我们希望能够将其设置为良好。

当然，这种商品会随着价值的变化而变化。

科特林的建筑。

能够基于一组条件来决定某物的值被称为 when，这类似于 Java 中的 switch。

所以我要保存我们的提示描述等于当然后视 2%的值将采取一定的行动。

所以如果提示描述，如果 10%在 0 到 9 之间，那么字符串应该是差的。

如果在 10 到 14 之间，我们称之为可接受的 15 到 19，那就很好。

当它在 20 和 24 之间时。

会很棒的。

这里应该有一个额外的时间段。

最后，任何其他意味着值大于 24 的东西，我们都会说惊人。

所以现在我们不说 good，而是说 tip description。

最后，在我们测试之前，我想做的另一件事是在最开始的时候，当我们设置我们的屏幕时，你知道在 onCreate 方法中，一旦我们获得了对每个视图的所有引用，我们还想在这里调用该方法更新提示描述，使用初始提示百分比，以便语言总是与我们开始时的内容同步。

让我们试一试。

现在，我们应该可以在搜索栏的正下方看到一个文本，该文本中的内容应该根据我们在搜索栏中选择的内容进行更改。

好的，这看起来已经很有希望了，因为最初 2%是 15，这意味着我们属于葡萄酒陈述的这个分支，这意味着价值应该是好的。

那很好。

如果我们把它降到零，我们就变穷了，如果我们一直往上走，我们就会变得惊人，我们做到了。

想做的一件快速的事情是回到活动主界面。

我想设置这个的字体粗细为粗体。

纺织品应该是大胆的，让它更加突出。

最后，我想展示的最后一件事是这个交互式彩色动画，如果用户选择了一个非常好的提示，我们会显示亮绿色，如果用户选择了一个不好的提示，我们会显示红色，表示有问题。

回到 Android Studio，在 minute tivity kotlin 更新提示描述中，我们将添加基于提示百分比更新颜色的逻辑。

问题是我们如何基于一个整数动态地计算一种颜色，我们要做的是通过一个叫做插值的概念，这实际上是一个概念上非常简单的东西的花哨词。

如果我告诉你我跑了 100 英里，我完成了 75%,那么你会告诉我我大概完成了 75 英里。

你在脑子里做的是线性插值，你假设我以恒定速度运动，从零开始，到 100 结束。

因此，我在 75 英里处，同样的情况也适用于这里。

每种颜色都可以用整数来表示。

所以如果我给 20%，那么我们就在最差颜色和最好颜色之间的三分之二处，这是两个整数。

我们所需要做的就是一些简单的数学运算，来计算这个颜色值到底是多少，用于提示描述。

我们要做的第一件事是定义最差投资提示的颜色。

所以打开颜色，XML，让我们添加颜色词提示颜色，最佳提示，我选了一个红色和绿色，就像我们说过的，我们要粘贴这些值来表示颜色差和颜色好。

我们已经定义了这些。

现在我们的工作就是简单地在 0 点做一些数学运算，我们应该显示 30 点的最差小费，我们应该显示最佳小费，其他的都是介于两者之间的值。

这种情况非常普遍，Android 实际上有一种叫做 RGB 评估器的东西来帮助解决这个问题，我们用整数值来表示颜色。

a 代表阿尔法，RGB 是红、绿、蓝，它将帮助我们计算颜色。

回到主活动，我们要定义一种颜色。

这将来自 argb evaluator dot evaluate。

然后它接受三个参数。

一个是进度条上 0 和 32 之间的分数，这是最差的颜色，结束值是最好的颜色。

所以这个分数就是齿尖百分比，也就是周长 10 除以齿尖最大值 30。

这将是海洋公园提示点最大。

接下来，我们需要得到最糟糕的颜色。

我们这样做的方法是 context compat dot get color pass in this，它指的是上下文，然后是我们刚刚在 colors XML 中定义的实际颜色，即颜色优先。

最后，我们要在这里提供最好的颜色。

你会注意到的一个问题是有一个类型不匹配，我们需要一个 float，但是我们找到了 integer。

默认情况下，因为分子和分母都是整数，我们要做一些截断，这是我们不想要的。

因此，处理这种情况的方法是将分子或分母中的一个转换为浮点值。

这将解决这个问题。

现在我们有了这个颜色，我们需要做的就是设置提示描述文本的颜色，设置文本颜色。

最后，在我们尝试之前，我们需要将 evaluate 函数调用的结果转换为一个整数，因为我们知道我们要计算的值是整数，所以颜色应该是 int。

现在我们应该能够很好地编译和运行它了。

所以现在应该发生两件事。

一是我们应该加粗文本。

第二，应该立即应用颜色。

根据我们选择的礼物，它也应该适应。

对，这看起来不错。

最初，我们有一种介于绿色和红色之间的颜色。

如果我一直走到零，你可以看到它变成红色。

如果我向上移动到最佳尖端，也就是 30 度，你可以看到它是如何从红色慢慢变成绿色的。

我非常喜欢这一点，因为与我们以前相比，现在感觉更具互动性和动态性。

好吧，让我们再试一次。

我们要在账单上放 9 美元。

当我擦洗的时候，你可以看到所有的东西是如何适当更新的。

如果我退格，没有崩溃，我可以输入另一个数量。

一切都如我们所料。

太棒了。

因此，如果这是你第一次进入应用程序，这是惊人的。

恭喜你。

请在评论中告诉我。

我非常喜欢小费计算器的原因是，你可以用很多方法来扩展这个基本项目，我们必须让它变得更有趣。

所以我有几个主意第一，你可以把账单分给 n 个人。

所以你可以想象一下，你和三四个人一起出去吃饭，然后你应该把总数除以三或四，以便让每个人都很容易支付一定的金额。

其次，您可以添加一个按钮或某种组件，允许用户向上或向下舍入最终金额。

所以不需要应对变化。

当然，在设计或色彩更新方面，你还可以做更多的事情。

所以我现在推荐的是完成任何数量的扩展，我们讨论过的其他扩展，或者你自己想出来的东西，然后你就可以或多或少地在 Play Store 上发布你所拥有的内容。

我不会在这里详细介绍，但我会在描述中留下一个视频，讲述如何做到这一点，我希望你将这个提示计算器作为你作为 Android 开发者之旅的起点，并在未来开发更多的应用程序。

如果你喜欢这个，请投个赞并发表评论。

我们希望收到您的来信。

非常感谢您的收看，我们下期再见。

再见