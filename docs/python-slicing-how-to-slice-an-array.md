# Python 切片——如何对数组进行切片，以及[::-1]是什么意思？

> 原文：<https://www.freecodecamp.org/news/python-slicing-how-to-slice-an-array/>

对数组进行切片的概念是切掉数组的一部分。在 Python 中如何做到这一点？我将在本文中向您展示如何做到这一点。

如果你喜欢看视频内容来补充你的阅读，这里也有这篇文章的视频版本。

## 什么是数组？

数组是一种数据结构，允许你同时在一个变量中按顺序存储多个相同数据类型的项目**。您可以通过索引(顺序中的位置)来访问这些项目。**

它们有点类似于 Python 中的列表，只是列表允许你存储不同数据类型的多个项目**。此外，虽然列表是内置的，但数组不是。**

## 如何在 Python 中访问数组中的值

以下是用 Python 创建数组的语法:

```
import array as arr 

numbers = arr.array(typecode, [values]) 
```

因为默认情况下 Python 中没有内置数组数据类型，所以您必须从`array`模块中导入它。我们将这个模块作为`arr`导入。

使用`arr`的`array`方法，我们可以通过指定一个`typecode`(值的数据类型)和数组中存储的值来创建一个数组。

下表显示了可接受的类型代码:

| 类型代码 | c 型 | Python 类型 | 字节大小 |
| --- | --- | --- | --- |
| ' b ' | 有符号字符 | （同 Internationalorganizations）国际组织 | one |
| ' b ' | 无符号字符 | （同 Internationalorganizations）国际组织 | one |
| 你好 | wchar_t | Unicode 字符 | Two |
| ' h ' | 带符号的短 | （同 Internationalorganizations）国际组织 | Two |
| ' h ' | 无符号短整型 | （同 Internationalorganizations）国际组织 | Two |
| 我 | 有符号整数 | （同 Internationalorganizations）国际组织 | Two |
| 我 | 无符号整数 | （同 Internationalorganizations）国际组织 | Two |
| 我 | 长签名 | （同 Internationalorganizations）国际组织 | four |
| 我 | 无符号长整型 | （同 Internationalorganizations）国际组织 | four |
| 问 | 署名龙龙 | （同 Internationalorganizations）国际组织 | eight |
| 问 | 无符号长整型 | （同 Internationalorganizations）国际组织 | eight |
| f ' | 漂浮物 | 漂浮物 | four |
| 迪 | 两倍 | 漂浮物 | eight |

从 Python 文档的[中获得的类型代码。](https://docs.python.org/3/library/array.html)

下面是 Python 中的一个数组示例:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

print(numbers[1])
# 2 
```

我们在这里创建了一个从 1 到 5 的整数值数组。我们还通过使用方括号及其索引来访问第二个值，顺序是 **1** 。

## 如何在 Python 中对数组切片

假设你想分割这个数组的一部分，然后把这个部分赋给另一个变量。你可以使用冒号和方括号。语法如下所示:

```
array[start:stop:step] 
```

`start`索引指定切片开始的索引。默认为 **0** 。

`end`索引指定切片结束的索引(但不包括该索引处的值)。默认值是数组的长度。

`step`参数指定了切片的步骤。默认为 **1** 。

让我们看一些例子，它们涵盖了数组切片的不同方式。

### 如何在没有开始或结束索引的情况下切片

当您在没有`start`或`end`索引的情况下切片时，您基本上获得了数组的整个副本:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[:]

print(copy)
# array('i', [1, 2, 3, 4, 5]) 
```

正如您在这里看到的，我们有一个`numbers`数组的副本。

> 同样值得注意的是，切片操作不会影响原始数组。使用切片，您只能“复制”原始数组的一部分。

### 如何使用开始索引进行切片

例如，如果您想要从特定的起始值到数组的结尾对数组进行切片，方法如下:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[2:]

print(copy)
# array('i', [3, 4, 5]) 
```

通过在方括号中传递`2:`，切片从索引 **2** (保存值 3)开始，直到数组的末尾，正如您在结果中看到的。

### 如何使用结束索引进行切片

例如，如果您想将数组从第一个值分割到第三个值，方法如下:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[:3]

print(copy)
# array('i', [1, 2, 3]) 
```

通过在方括号中传递`:3`，切片从 **0** 索引(默认情况下，因为没有指定)开始，直到我们指定的第三个索引。

如前所述，切片排除了第三个索引处的值。所以在结果中，正如您在`copy`变量中发现的，返回的值是从索引 **0** 到索引 **2** 的值。

### 如何使用开始和结束索引进行切片

如果你想指定切片的开始和结束点呢？方法如下:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[1:4]

print(copy)
# array('i', [2, 3, 4]) 
```

通过使用一个数字，然后是一个冒号，后跟一个方括号中的数字，您可以分别指定开始和结束索引。

在我们的例子中，我们使用了 **1** 和 **4** 作为`[1:4]`中的。从结果中，您可以看到切片从索引 **1** 处的值(即`2`)开始，直到索引 **4** 之前的值(即`4`)(在索引 3 处)。

### 如何用步骤切片

当您将`start`和`end`索引分别指定为 1 和 5 时，切片将选择索引 **1** 、索引 **2** (对先前索引增加 1)、索引 **3** (对先前索引增加 1)和索引 **4** (对先前索引增加 1)处的值。

在该切片中，默认使用 **1** 的步长。但是你可以提供不同的步骤。方法如下:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[1:4:2]

print(copy)
# array('i', [2, 4]) 
```

通过添加另一个冒号，可以指定一个步骤。于是我们有了`[start:stop:step]`。

在我们的例子中，起点是 **1** ，终点是 **4** ，步长是 2。切片从索引 1 处的值开始，即 **2** ，然后下一个值将位于前一个索引加上步长，即`1 + 2`等于 3。索引 3 处的值是 **4** ，因此它被添加到切片中。下一个索引将是 5 ( `3 + 2`)，但是由于 5 超过了停止索引，它将不会被添加到切片中。

正如您在代码中看到的，切片副本只有 2 和 4。

### 如何使用负的开始和结束索引进行切片

`start`或`stop`指数也可以是负数。负索引从数组末尾开始计数。这意味着负索引是数组中的最后一个值:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

print(numbers[-1])
# 5 
```

通过在这里使用负 1，您会看到从一个数组的末尾返回了 **5** 。

对于像`[-3:-1]`这样的切片表达式，这意味着开始索引为 **-3** ，结束索引为 **-1** 。让我们看看这是如何与我们的阵列配合使用的:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[-3:-1]

print(copy)
# array('i', [3, 4]) 
```

切片从索引 **-3** (数组末尾的第三个值，即 3)开始，到索引 **-1** (数组的最后一个值，即 5)结束。切片不包括最后一个值，所以我们有 3 和 4。

> 结合一个负的`start`指数和一个正的`end`指数(反之亦然)将不会起作用，因为你将同时走向不同的方向。

### 如何用负步切片

您可以使用负步长，这意味着切片的步长递减。这里有一个例子:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[2::-1]

print(copy)
# array('i', [3, 2, 1]) 
```

这里，我们指定一个索引 **2** 的开始，没有结束，以及一个 **-1** 的步长。这里的切片将从索引**2**3 开始。负步长意味着切片中的下一个值将位于比前一个索引小 1 的索引处。这意味着`2 - 1`等于 **1** ，因此该索引处的值(2)将被添加到切片中。

这将反向进行，直到到达数组的末尾，即索引为 **0** 的位置。切片数组产生值 3、2 和 1。

### `[::-1]`是什么意思？

你以前在 Python 的任何地方见过这个表达式吗？它的意思是:没有指定的`start`索引，也没有指定的`end`索引，只有一个 **-1** 的负步长。

`start`索引默认为 **0** ，因此通过使用 **-1** 步长，切片将包含以下索引处的值: **-1** ( `0 - 1`)、 **-2** ( `-1 - 1`)、 **-3** ( `-2 - 1`)、 **-4** ( `-3 - 1`)、 **-5** ( `-4 - 1`)。几乎是数组的反向副本。

下面是它的代码:

```
import array as arr 

numbers = arr.array('i', [1, 2, 3, 4, 5])

copy = numbers[::-1]

print(copy)
# array('i', [5, 4, 3, 2, 1]) 
```

如你所见，这是一个简单的反转数组的方法。

## 包扎

在本文中，我们简要介绍了如何在 Python 中声明数组，如何访问数组中的值，以及如何使用冒号和方括号剪切数组的一部分。

我们还了解了切片如何与步骤和正/负开始和停止索引一起工作。

你可以在这里了解更多关于数组的知识: [Python 数组教程——定义、索引、方法](https://www.freecodecamp.org/news/python-array-tutorial-define-index-methods)。