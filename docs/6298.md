# 命令魔术:如何用控制台操作文件和字符串

> 原文：<https://www.freecodecamp.org/news/command-magicks-how-to-manipulate-files-and-strings-with-the-console-3c554e64048/>

卢西亚诺·斯特里卡

# 命令魔术:如何用控制台操作文件和字符串

![WmTHF8Xb-NAT1dLhH3RnU46x8lo5RnUA2TNK](img/aabf1141b42d37f656e7d407aa02a087.png)

Programming will make you be amazed by the Cosmos. Source: [Pixabay](https://pixabay.com/en/milky-way-universe-person-stars-1023340/).

作为开发人员，我们每天都会做很多重复的事情，这些事情占用了我们宝贵的时间。寻找自动化和优化这些流程的方法通常非常有利可图。

很多时候，我们发现自己在程序的输出中寻找相关的位，并手动将它们移动到不同的文件中，将一个句子中的所有大写字母改为小写字母，或者从文件中删除所有非数字字符。那种枯燥、重复且容易出错的任务，如果我们用手去做，就会堆积起来，变成一件令人头疼的事情。

传统观点认为，我们应该通过编程而不是手动来完成这些事情。很多时候，问题都陷入了这个甜蜜点，为它编写一个完整的脚本，即使是用 Python，感觉也是多余的。手工操作会花费太长时间或者产生太多错误。

幸运的是，许多任务已经被比我们聪明得多的人编写了代码。只需按几下键就可以访问它们。它们都可以作为 shell 命令使用，今天我将向您展示其中的一些。如果你对终端完全陌生，不知道如何导航你的文件系统或做类似的任务，我建议你读一下我之前对终端的介绍。

所以事不宜迟，让我向你介绍任何编码向导都应该知道的最有用的咒语。

#### echo:在控制台中显示一个字符串

在我们深入占卜和转换的艺术之前，一个真正的编程向导必须掌握魔术的技艺。echo 命令后跟一个字符串，它只是让控制台输出输入的内容。例如，运行以下代码行:

```
echo “hello world!”
```

将产生以下输出:

```
hello world!
```

这可能现在看起来微不足道，但我保证它在将来会很有用。

#### cat:显示输入的真实形式

对一个文件调用 cat 命令会将其内容输出到终端。例如，我们有一个包含文件“文件 1.txt”和“文件 2.txt”的目录。两个文件都包含文本“这是一个文件”。呼叫:

```
cat file1.txt
```

将输出文件的内容:

```
this is a file
```

注意，cat 命令的参数可以是任何 shell 样式的名称。我们可以使用通配符*来匹配任何字符串。这样，我们可以一个接一个地输出不同文件的内容，就像这样:

```
cat *.txt
```

在这种情况下，*匹配文件 1 和文件 2，并且它们都以结尾。txt，所以都是打印的。该命令的输出将是

```
this is a filethis is a file
```

记住这个命令——没有一个术士没有一只小猫是真正完整的。

#### 葛瑞普:大海捞针

切换到占卜，grep 是在字符串中查找子串的咒语。
来电

```
grep <some string> filename
```

将输出指定文件中出现给定字符串的每一行。

如果我们希望它不仅以准确的形式出现，而且以不同的大小写出现，我们必须通过 **-i** 参数来忽略大小写。

如果我们在一个命令中对不同的文件调用它，我们将得到每个文件的列表，其中的行与模式匹配。例如，在前一个目录中，调用

```
grep “this” *.txt
```

会屈服

```
file1.txt: this is a filetile2.txt: this is a file
```

#### sed:将字符串转换成另一个字符串

sed 命令是一个转化法术。它获取一个文件的内容并把它们转换成不同的内容。有许多使用它的方法。其中一些我承认知道的很少。(如果你正在阅读这篇文章，并且想到了一些我没有提到的 sed 做的很酷的事情，请在评论中告诉我，因为我喜欢学习新的技巧)。最常见的一种方法是用不同的字符串替换字符串中与模式匹配的部分。

这是通过调用

```
sed “s/regexp/replacement/optional_flags” file_name
```

这将做的是:

*   在 file_name 文件中查找与 regexp 匹配的每一行
*   用*替换*替换该行的第一个 *regexp* 实例
*   将结果字符串输出到控制台(不改变文件！).

如果我们在末尾提供 g 标志(比如 s/old/new/g ),它将匹配每一行的所有实例，而不仅仅是第一个。使用 **-i** 参数(就地)将实际写入输入文件。

例如，调用

```
sed “s/is/was/g” file1.txt
```

将输出

```
thwas was a file
```

如果我们只想匹配整个单词，我们必须将\b 字符放在正则表达式的两边，就像这样

```
sed “s/\bis\b/was/g” file1.txt
```

最终得到

```
this was a file
```

## 结合我们的咒语:操作者

现在你精通了四种新的魔法学校，每一种都有其特有的法术。但是要成为一名真正的巫师，你必须学会把魔法线绑成令人敬畏的图案。为此，您将使用三个强大的工具。

#### |(管道)运算符

管道操作符获取前一个命令的输出，并将其写入下一个命令的输入，从而创建一个管道。
比如，打电话

```
cat *.txt | grep “is”
```

将首先获取当前工作目录中所有文本文件的内容。然后查找包含字符串“is”的每一行，最后打印出来。

#### >(写)运算符

写操作符将把它的输入写到它的输出——通常是一个文件。

例如，创建以“这是一个文件”为内容的文本文件的快速方法是调用

```
echo “this is a file” > some_file.txt
```

看到那个魔法咒语是怎么加起来的了吗？我告诉过你会有用的。

请注意，如果文件已经存在，这将覆盖其内容，甚至没有询问。如果这不是我们想要的，我们必须使用我们最后的工具:

#### > >(追加)运算符

>>操作符将把它的输入写到它的输出中，除了它不会覆盖已经存在的内容。

就这样，我们完成了这个教程，你现在是一个巫师的学徒。去练习你新的施法技巧吧，你可以以后再感谢我。如果您遇到困难或不记得一些标志做了什么，请务必查看所有这些命令的手册页——一个向导永远不会离开他的书。

*请考虑[用一点捐款支持我的写作习惯](https://www.buymeacoffee.com/strikingloo)。*

关注我的 Medium，了解更多教程、技巧和诀窍。这篇文章也发表在我的新网站 [datastuff.tech](http://www.datastuff.tech/programming/files-strings-shell-tutorial/) 上。看看吧！