# 学习 Kubernetes 并开始容器化您的应用程序

> 原文：<https://www.freecodecamp.org/news/learn-kubernetes-and-start-containerizing-your-applications/>

Kubernetes 是一个开源的容器编排平台，它自动化了容器的部署、管理、伸缩和联网。这使得将应用程序部署到生产环境变得更加简单。

我们刚刚在 freeCodeCamp.org YouTube 频道上发布了一个 Kubernetes 课程。

波格丹一世·斯塔什丘克开发了这个课程。他是一位受欢迎的 DevOps 讲师，已经在 Udemy 和 YouTube 上教授了数十万人。

以下是 Kubernetes 速成班涵盖的所有部分:

*   初学 Kubernetes 游戏攻略
*   What is Kubernetes
*   什么是 Pod
*   Kubernetes 集群和节点
*   永恒的服务
*   What is kubectl
*   本课程所需的软件
*   安装 kubectl
*   安装 Minikube
*   使用 minikube 创建 kubernetes 集群
*   探索 Kubernetes 节点
*   只创建一个 Pod
*   探索 Kubernetes 豆荚
*   为 kubectl 命令创建别名
*   创建和探索部署
*   使用其中一个 pod 的 IP 地址连接到它
*   什么是服务
*   创建和探索集群 IP 服务
*   使用 ClusterIP 服务连接到部署
*   删除部署和服务
*   创建节点 web 应用程序
*   停靠节点应用程序
*   将自定义图像推送到 Docker Hub
*   基于自定义 Docker 映像创建部署
*   扩展自定义映像部署
*   正在创建节点端口服务

观看 freeCodeCamp.org YouTube 频道的全部课程(3 小时观看)。

[https://www.youtube.com/embed/d6WC5n9G_sM?feature=oembed](https://www.youtube.com/embed/d6WC5n9G_sM?feature=oembed)

### 副本

(自动生成)

Kubernetes 使应用程序容器化成为可能，并简化了生产部署。

波格丹一世·斯塔什丘克将教你开始使用 Kubernetes 所需要知道的一切。

欢迎来到 Kubernetes 初学者俱乐部。

Kubernetes 是将容器化应用程序部署到生产环境中的事实标准。

Kubernetes 是开源的，因此可以免费使用。

在我们开始这门课之前，让我先自我介绍一下。

我的名字是波格丹一世·斯塔什丘克，我已经使用 Docker 和 Kubernetes 练习多年了。

我已经使用 Kubernetes 将真实世界的应用程序部署到生产中。

此外，我在网上和我的个人网站上教 shoe.com，你可以找到我教的所有课程。

现在让我们开始学习 Kubernetes 初学者教程，我想从课程计划开始。

因此，我们将从术语和 Kubernetes 的主要特征开始，讨论本课程的内容。

您将了解什么是 Kubernetes cluster，什么是 node，什么是 sport，以及 Kubernetes 的基本功能。

之后，我们将立即投入实践，并在我们的计算机上本地构建小型 Kubernetes 集群。

之后，我们将使用此类群集创建和扩展不同的部署。

此外，我们将构建一个定制的 Docker 映像，将其推送到 Docker Hub，然后基于这个定制的 Docker 映像创建 Kubernetes 部署。

除此之外，我们还将使用莫亚配置文件在 Kubernetes 中创建服务和部署。

此外，我们会将不同的部署连接在一起，因为当您必须通过网络将不同的应用程序连接在一起时，这是非常常见的情况。

Kubernetes 当然允许这样做。

最后，我们将把容器运行时从 Docker 改为 CRI o，因为 Kubernetes 没有绑定到 Docker。

它还支持其他容器运行时，如 CRI O 和 container D。

你完全可以不用 Docker 就能使用 Kubernetes。

本课程的一个先决条件是您熟悉 Docker，我假设您知道什么是 Docker 容器以及如何创建不同的容器。

好的，让我们开始这门课。

我想从 Kubernetes 是一个容器编排系统的定义开始。

使用 Docker，你当然可以在任何计算机上创建容器。

但是当然，如果你想在不同服务器的不同计算机上创建多个容器，你可能会遇到麻烦。

Kubernetes 允许您在不同的服务器上创建容器，无论是物理的还是虚拟的。

所有这些都是自动完成的，无需您的干预。

你只需要告诉 Kubernetes 你想基于一个特定的图像创建多少个容器。

Kubernetes 是一个相对独立的好词，它由 10 个不同的字母组成。

但是 IT 专业人员和软件开发人员是相对懒惰的人，他们不太喜欢打字。

这就是为什么单独搜索奖通常被缩短为三个字符。

但是是怎么做到的呢？让我们来看看这个单词。

在 k 和 s 之间，实际上有八个不同的字母。

所以第八，这就是为什么贷款奖励 Kubernetes 会缩短为三个字符，K 八 s。

所以八代表了开始和结束侧枝之间的字母数量，就这么简单。

知道了这个非常简单的调整，我们可以继续。

现在让我给你解释一下 Kubra 这是怎么回事。

因此 Kubernetes 负责在不同的服务器上自动部署容器化的应用程序。

这些服务器可以是裸机、物理服务器或虚拟服务器。

虚拟服务器选项当然现在更普遍，现在几乎没有人使用裸机服务器。

因此 Kubernetes 允许您跨不同的服务器执行自动化部署，这些服务器甚至可能位于世界的不同地方。

除此之外，Kubernetes 还负责主服务器在多个服务器之间的分发。

这使您能够有效地使用资源，避免资源利用不足或过度利用。

此外，Kubernetes 还负责部署的应用程序的自动伸缩，以防您需要增加(例如)必须在不同服务器上创建的容器的数量。

所有这些都是自动完成的。

你只需告诉何时你想扩大或缩小。

此外，Kubernetes 还负责集装箱的监控和健康检查。

如果某些容器由于某些原因出现故障，Kubernetes 可以自动替换故障容器，所有这些都无需您的干预。

正如我刚才告诉你的，Kubernetes 部署容器化的应用程序，因此它必须使用特定的容器运行时。

多格拉只是 Kubernetes 目前可能的选项之一，支持 Docker、CRI o 和 container D 等容器运行时，以及搜索容器运行时，例如 Docker 或 CRI O 必须在 Kubernetes 集群中包含的每个服务器上运行。

这里的主要结果是 Kubernetes 甚至可以在没有 Docker 的情况下使用。

它支持其他容器运行时，如 CRI O 和 container D。

在本课程的最后，我将向您演示如何更改容器运行时间，以及如何从 Docker 迁移到 CRI O。

现在让我们从 Kubernetes 的术语和架构开始。

让我们从港口开始两者都是达卡 Kubernetes 世界中最小的单元滚动集装箱是 Kubernetes 中最小的单元 pod 是最小的单元，集装箱是在 pod 内部创建的。

所以两个原子都在容器内，可能有容器，一个甚至几个容器。

此外，还有共享卷和共享网络资源，例如共享 IP 地址。

这意味着同一 pod 内的所有容器共享卷和 IP 地址。

如果您想在同一个端口内创建多个容器，您必须记住这一点。

当然，最常见的情况是每个港口只有一个集装箱。

但是，有时当集装箱必须紧密连接在一起，并且它们严重依赖于彼此，并且它们可能存在于同一个名称空间中时，有可能对同一个港口中的几个集装箱进行分级。

但是同样，每个端口一个容器是最常见的用例。

另外请记住，每个端口必须位于同一个 Sarah 上，不可能将来自一个端口的容器分布到 Kubernetes 集群中的不同服务器上，一个 pot 一个服务器。

现在让我们来看一下 Kubernetes 群集，Kubernetes 群集由节点组成，节点实际上是 Sarah 裸机服务器或虚拟服务器。

您可以在 Kubernetes 集群中包含多个 saij 服务器，它们将位于世界不同地方的不同数据中心。

但是通常属于同一个 Kubernetes 集群的节点彼此靠近，以便更有效地执行所有作业。

节点内部有端口，这也是 Kubernetes 中最小的单元，每个端口内部都有容器，通常每个端口有一个容器，这样的板在不同的节点上分级，所有这些都是自动完成的，Kubernetes 会完成这项工作。

当然，您的工作是创建这样的节点，并基于这些节点创建集群。

节点不会自动形成类或者没有你的干预。

但是在这样的初始配置之后，一切都将自动化，Kubernetes 将自动在不同的节点上部署两者。

但是这些节点实际上是如何与 Charles or 通信的，以及它们是如何被管理的。

在 Kubernetes 集群中，有一个主节点，集群中的其他节点称为工作节点。

主节点实际上管理工作节点。

如果主节点的工作是跨其他工作节点分配负载，并且所有与您的应用相关的板都部署在工作节点上，则主节点仅运行系统端口，这些端口负责 Kubernetes 集群的实际工作。一般来说，我们也可以说 Kubernetes 集群中的主节点实际上是控制平面，它不运行您的客户端应用。

那么，哪些服务实际上运行在不同的节点上呢？让我们看看这张图表。

有 cubelet、cube 代理和容器运行时等服务，这些服务存在于 Kubernetes 集群中的每个节点上。

您已经知道了什么是容器运行时容器运行时在每个节点内部运行实际的容器，并且有像 Docker CRI o 或 container D 这样的容器运行时。

还有 cubelet 这样的服务。

并且每个工作节点上的这种服务与主节点上的 BI 服务器服务通信。

阿迪服务器服务是 Kubernetes 世界中不同节点之间的主要通信点。

存在于每个节点上的立方体代理也负责每个节点内部和节点之间的网络通信。

此外，主节点上还有其他服务。

他们是调度者，这样的服务负责在教室的不同节点之间规划和分配主。

此外，还有多维数据集控制器管理器，这个单点实际上控制着 Kubernetes 集群中的一切。

它实际上控制着群集中每个节点上发生的事情。

另外，还有云控制器管理器。

他的工作是与实际运行 Kubernetes 集群的云服务提供商进行互动，因为通常情况下，你不会仅使用自己的服务器自己创建这样的集群。

相反，您可以非常容易地从一个云提供商那里运行 Kubernetes 集群，它实际上几乎自动创建所有节点以及这些节点之间的连接。

为此，您必须在主节点上运行云控制器管理器服务。

此外，例如，如果您想要在 Kubernetes 集群内部创建应用程序的部署，该部署将对外部世界开放并允许来自外部的连接，那么您还可以创建负载平衡器 IP 地址。

还有那些负载平衡器。

IP 地址通常由特定的云提供商提供。

还有一个主节点，有 etcd 这样的服务。

这个服务实际上存储了与整个 Kubernetes 集群操作相关的所有日志。

这样的日志作为键值对存储在那里。

此外，主节点上还运行着其他服务，例如，负责域名解析和整个 Kubernetes 集群的 DNS 服务。

例如，使用 DNS 服务，您可以通过相应部署服务的名称连接到特定的部署。

通过这种方式，您可以将不同的部署与一个作业或运行在 Kubernetes 集群中不同节点上的不同服务连接起来。

主节点上的主要服务是 API Sarah。

顺便说一下，使用这个 API 服务器服务，您实际上可以管理整个 Kubernetes 集群。

是怎么做到的？这是通过使用 cube CTL 或 cube control 完成的。

cube control 是一个独立的命令行工具，它允许您连接到特定的 Kubernetes 集群并远程管理它。

cube CTL 甚至可以在您的本地计算机上运行。

使用这样的 cube CTL 工具，您可以管理远程 Kubernetes 集群。

使用这样的工具，您实际上使用 REST API 连接到主节点上的 API 服务器服务。

这种交流发生在 HTTPS 上空。

顺便说一下，集群中的其他节点我指的是工作节点以同样的方式与主节点通信。

这意味着使用这样的 cube CTL 工具，您可以管理任何远程 Kubernetes 集群。

这是 Kubernetes 体系结构概述，现在您知道 Kubernetes 集群由节点组成，其中一个节点是主节点，它管理我们的其他节点，这些节点称为工作节点。

每个节点上都有电路板，电路板由 Kubernetes 自动评分。

在港口内部，有集装箱，通常只是单个集装箱港口。

另外，请记住，端口内的所有容器共享该端口的名称空间，如卷或网络 IP 地址。

此外，我们在 Kubernetes 的最小单元以及可以创建和删除的端口都可以从一个节点移动到另一个节点。

这是自动发生的，无需你的干预。

但是你必须用这种想法来设计你的应用程序，两者都可能在任何时候被删除。

此外，有不同的服务运行在不同的节点上。

例如，API 服务器服务是主节点和其他工作节点之间通信的中心点。

此外，使用这样的 BI service 服务，您实际上可以使用 cube CTL 工具管理实际的 Kubernetes 集群，例如，如果您从计算机上执行管理，则必须将该工具安装在您的计算机上。

好吧，我不想深入探究 Kubernetes 的细节，因为这是非常复杂的工具。

我想更多地关注实际任务。

这就是为什么现在在这样的概述之后，我们将和你一起投入到实践中，一起执行不同的实际任务。

例如，我们将创建部署、服务、扩展部署、创建自定义 Docker 映像以及基于该映像创建部署，等等。

为了和我一起完成所有的实际任务，你必须在你的电脑上安装一些程序。

现在，当我们谈到所需的软件时，首先我们必须创建实际的 Kubernetes 集群，我们将在其中创建不同的部署。

当然，你可以使用亚马逊网络服务或谷歌云等云提供商的服务来创建集群，但你必须为这样的服务付费。

如果你想要免费的解决方案，你可以在你的本地计算机上创建类。

为此有了迷你魔方这样的工具。

这种工具实际上只会创建一个节点集群。

并且该节点将既是工作节点又是主节点。

但是对于测试部署来说，作为一个游戏场，它工作得非常好，而且所有的都是免费的，可以在你的本地计算机上运行。

为了成功运行 mini cube，您必须利用虚拟机或容器管理器。

以下虚拟机或容器管理器受 VirtualBox、VMware、Docker、Hyper V 或 parallels 支持。

还有其他的选择。

但是你必须利用其中的一个选项。

为了实际创建虚拟节点，它将在您的 Kubernetes 集群中运行这两个节点。

如果你是 Windows 用户，我建议你使用 Hyper V。

如果你是 Mac OS 用户，你可以使用 welchol box，它是免费开源的，或者你可以使用 VMware 或 parallels。

顺便说一下，也有一个选项来运行迷你立方体作为容器内的 Docker。

当然，如果您的计算机上已经安装了 Docker，您可以利用它来创建一个使用 mini cube 的 Kubernetes 集群，它将创建一个单独的 Docker 容器，在该容器中，两者都将被创建。

但是我个人不建议你使用 Docker 选项，因为它有一些限制。

例如，我无法将 Docker 容器中的容器运行时更改为 CRI 或容器 d。

因此，我建议你继续进行这里提到的其他选择。

顺便说一句，Hyper V 可以在 Windows 计算机上开箱即用，并且您可以将它用作运行 mini cube node 的 Butoh 机器管理器。

为了使用 mini cube 进行总结，您将创建一个单节点 Kubernetes 集群。

但是正如我之前提到的，您必须使用特定的工具来管理这个集群。

这个工具叫做 cube CTL。

对了，cube CTL 是包含在 mini cube 里面的。

但是如果你想使用这样的包含版本，你必须输入 mini cube cube CTL 命令，这是不方便的。

所以我推荐你单独安装 cube CTL。

当然，使用单独的安装，您将能够管理其他 Kubernetes 集群，例如位于 Amazon Web Services 的集群。

所以，cube CTL 也是你必须安装在电脑上的程序之一。

当然，我会向你解释如何安装迷你立方体和立方体 CTL。

除此之外，在这个实践课程中，我们还会做一些编码。

为此，你必须使用一个代码编辑器，我建议你安装 Visual Studio 代码，它是开源的，可以免费使用。

如果您还没有安装它，请继续安装。

此外，它有许多不同的扩展，其中之一是 Kubernetes 扩展。

使用这样的扩展，你可以很快地为你在 Kubernetes 的部署和服务创建莫亚配置文件。

这就是你学习本课程所需的全部内容 mini cube cube CTL 和 Visual Studio 代码。

现在让我们从实际部分开始。

我希望你会喜欢这门课。

我们将开始安装 mini cube 和 cube CTL。

好了，伙计们，现在让我们开始课程的实践部分。

我们将从安装 communicate cube 和 cube CTL 开始。

但首先，我想请你导航到 kubernetes.io。

这是 Kubernetes 的主要站点，它包含了所有与迷你立方体集群配置、部署创建等相关的文档。

请点击此处查看文档。

在左侧部分，转到“开始”。

在这里你可以读到如何创造一个学习环境。

除此之外，您还可以找到如何创建生产环境的信息。

但是我们现在对创建当地的 Kubernetes 集群感兴趣。

为此，我们将利用迷你立方体。

我们还将安装 CTL 管道。

这就是为什么警察点击这个超链接安装工具。

并找到如何在不同操作系统上安装 cube CTL 的说明，请选择您的操作系统。

我这里选 Mac OS。

如果你是一个 Mac OS 用户，你可以很容易地用自制软件安装 cube CTL，让我来给你演示一下怎么做。

让我点击这个选项。

运行安装命令 brew install cube CTL 让我复制这个命令并打开终端我正在使用的项目到 Mac，然后将这个命令粘贴到这里。

让我们继续安装 cube CTL。

典狱长包和立方体 CTL 安装完毕。

让我检查一下立方体 CTL 的版本。

为此，我可以利用这个命令立方体 CTL 版本，有桌面客户端。

让我在这里输入。

我看到 cube CTL 安装成功。

这是客户端版本大调 1 和小调 22。

这是实际上安装的精确版本。

好的，如果你是 Windows 用户，我推荐你使用软件包管理器安装 cube CTL，你可以在 Windows 上安装并设置 cube CTL，然后在这里选择使用 chocolaty 或 scoop 在 Windows 上安装。

点击这个选项，在这里你会找到如何使用 chocolaty 软件包管理器或 scoop 命令行安装程序安装不同软件包的说明，我推荐你安装 chocolaty 软件包管理器。

为了做到这一点，请打开此处的链接，并找到如何安装 Windows 软件包管理器的说明。

使用同一个软件包管理器，你也可以很容易地安装 mini cube。

因此，请继续安装这个软件包管理器，然后，按照这些说明如何在 Windows 上安装 cube CTL。

只使用这个命令，然后使用这个命令验证 cube CTL 是否可用。

好吧。

在此之后，我假设 cube CTL 已经在您的计算机上可用。

现在让我们继续安装 mini cube。

返回入门页面，向下滚动到学习环境，然后单击已安装工具超链接。

这一个，你会发现你必须安装立方体 CTL 的游戏。

这就是我们刚刚一起做的。

如果您向下滚动，您会发现一些选项，您可以利用这些选项来创建一个本地 Kubernetes 集群，用于学习和测试目的。

现在有 kind 这样的工具，它允许你在你的电脑上本地创建 Kubernetes 集群，但是它需要 Docker。

还有就是 mini cube 和 cube ADM。

我们将在整个课程中使用迷你立方体。

这就是为什么让我们开始安装迷你立方体。

它不需要码头工人。

但它确实需要一个虚拟机管理器，如 Hyper V parallels。

或者，如果你愿意，你也可以利用 Docker，请导航到这个链接 mini cube，你可以简单地在谷歌搜索栏中输入 mini cube，然后点击输出中的第一个结果。

在这里，您可以找到如何开始使用 mini cube 的文档，请单击此链接开始使用。

在这里，您可以了解 mini cube，它基本上会在您的计算机上本地创建一个 Kubernetes 集群。

并且它将只包含一个节点，该节点将充当主节点和工作节点。

要创建这样一个集群，您所需要的只是一个简单的命令 mini cube start。

但是为了成功地创建一个 mini cube 集群，你必须安装一个容器或者你的娃娃机管理器，比如 Docker，HyperCard，Hyper V parallels 等等。

我之前告诉过你，如果你是 Windows 用户，我推荐你使用 Hyper V，因为它在 Windows 上开箱即用。

如果你是 Mac 用户，我推荐你使用 will toolbox 选项，或者 parallels 或 VMware Fusion beautiful box 对我们是免费的。

因此，如果你不想为 Virtual Machine Manager 购买任何东西，我建议你选择这个选项。

此外，可以在 Docker 容器中创建迷你多维数据集集群，为此您只需安装 Docker。

但是我个人不建议您继续使用这个选项，因为在 Docker 容器中运行这样一个玻璃门有一些限制。

在下面你可以找到如何在不同的操作系统上安装 mini cube。

如果您是 Windows 用户，您可以像使用 cube CTL 一样使用 choco latte，请选择此选项并输入一个命令 choco install mini cube，如此简单，您将在 Windows 计算机上安装 mini cube，但我使用的是 Mac OS，这就是为什么我将选择此选项并选择 homebrew，为了使用 brew 安装 mini cube，我可以只输入一个命令 brew install mini cube。

让我继续使用 brew 安装它。

让我们回到终端和这里的命令 brew install mini cube。

让我们等一会儿，直到这个安装。

好了，迷你立方体已经安装好了，现在我可以验证它的版本了。

这是我的版本，你也可以输入 mini cube HELP 命令来查找 mini cube 中所有可用命令的列表。

如果您向上滚动，您将了解如何启动本地 Kubernetes 集群、获取本地 Kubernetes 集群的状态、停止 glass 或删除和打开 dashboard。

您也可以暂停并立即取消暂停 Kubernetes 集群。让我们创建实际的集群。我假设现在您已经安装了 mini cube 和 cube CTL。

这些工具是两个独立的工具。

这就是为什么它们有两个独立的命令 mini cube 和 cube CTL。

现在，让我们继续创建一个 Kubernetes 群集。

为此，请使用命令 mini cube start，但首先让我们输入 mini cube status，以便检查群集 mini cube status 的当前状态。

在这里，我看到配置文件 mini cube 没有在 mini cube 周围找到配置文件这两个配置文件，而且为了启动集群，我必须运行 mini cube start 命令。

这就是我们现在要做的，让我们开始创建群集迷你立方体。

在这里，我想请你用选项启动迷你立方体集群。

这个选项是 driver，你应该写两个破折号，这是 driver。

这里会有等号。

之后，您必须指定虚拟机或容器管理器，您将利用它们来创建迷你多维数据集集群。

我之前提到过，如果你是 Windows 用户，我推荐你使用 Hyper V。

因此，如果你在 Windows 上，只需在这里输入，Hyper V 就像这样全部小写，没有破折号，有这个驱动等号 Hyper V。

如果你是 Mac OS 用户，你可以选择 VirtualBox parallels 或 VMware Fusion，我会使用 VirtualBox。

如果您没有工具箱，请继续安装它，这是您的工具箱，单击这里的第一个链接。

你的工具箱是免费的。

这是你可以下载工具箱的链接。

因此，如果您没有工具箱，并且您是 Mac OS 用户，请下载您的工具箱。

对，我已经把你的工具箱装好了。

这就是为什么我在这里将它简单地指定为驱动程序选项 bio。

所以我将键入 Vertol 框。

让我们继续在 VirtualBox 虚拟机内创建迷你多维数据集集群，在我的示例中，创建您的工具箱虚拟机数量的 CPU 内存和磁盘。

创建虚拟机需要一段时间，请稍等。

现在我在 Docker 上看到准备 Kubernetes 消息。

这意味着默认情况下，我们将利用 Docker 容器运行时在 Kubernetes 集群中运行实际的容器。

在这里，我看到步骤生成证书和密钥启动控制平面。

最后，我看到 done cube CTL 没有配置为使用微型多维数据集集群。

这意味着您不需要做任何事情就可以从 cube CTL 连接到实际的 mini cube 集群。

此连接是在创建迷你多维数据集集群的过程中自动创建的。

此外，在我的情况下，我看到这样一个警告，您已经选择了您的工具箱驱动程序，但有更好的选择更好的性能和支持，考虑使用不同的驱动程序 HyperCard parallels 或 VMware。

现在让我们实际验证这个 Kubernetes 集群的状态。

为此，您可以输入命令 mini cube status。

你应该会发现主机是讽刺 cubelet 正在运行 API 服务器正在运行和立方体配置配置。

这是迷你立方体集群的正常状态。

现在，我们实际上能够在这个小型多维数据集集群中创建部署服务。

另外，我想提一下，我现在没有运行 Docker。

我在这台电脑上安装了它。

但是在这里的图标栏中，我没有看到 Docker 图标，这意味着现在我的本地计算机上的 Kubernetes 没有利用我的计算机上的实际狗或安装。

但是有一个 Docker 正在 mini cube 节点内部运行。

这就是我们现在要检查的。

如您所知，Kubernetes 集群中的每个节点都是虚拟或物理服务器。

在我们的例子中，我们已经创建了一个虚拟服务器，您可以使用 SSH 协议连接到任何服务器。

为了通过 SSH 连接，我们首先需要找出哪个 IP 地址分配给了 Kubernetes 节点。

迷你立方为此提供了命令。

只需键入 mini cube IP，您就会看到哪个 IP 地址被分配给了一个虚拟机，该虚拟机正在运行我们由 mini cube 创建的 Kubernetes 节点。在我的情况下，他是一个地址，只需获取此 IP 地址，然后键入 SSH Docker，这是此类节点的默认用户名，如 beautiful Sarah，在添加基于 mini cube 余额的符号后，请按 enter，您将看到指纹，请继续操作，并在此处键入取款等指纹。

然后会提示您输入 minikube 的默认密码。

您的 toe 机器是 DC 用户，请在这里输入。

所以用户名比较黑，密码是 DC 输入的用户密码。

现在我看到了来自迷你立方体 Sarah 的欢迎提示。

现在我在库伯内特节点内。

我希望您在这里输入的第一个命令是 docker ps。

这样的命令将列出你在 Docker 容器中运行的所有内容。

这里有一堆不同的容器，它们是在 Kubernetes 节点内部创建的。

再次重申，Docker 是 Kubernetes 的默认容器运行时。

还有其他容器运行时，比如 CRI O 和容器 d。

但是这里我们看到有一堆不同的容器，它们是由 Docker 在 mini cube note 内部创建的。

举例来说，这里我看到这样的容器，如立方体 API 服务器，立方体调度程序等。

回顾一下我们与您讨论过的运行在主节点和工作节点上的不同服务。

这些服务实际上是在容器内部运行的，正如您现在看到的。

此外，还有一些容器，例如多维数据集代理存储供应器或核心 DNS。

同样，每个容器都有自己的用途。

这就是如何验证哪些容器是在 Kubernetes 节点内部创建的。

但是，如果我在这里输入一个 cube CTL 命令，我会看到错误“找不到 cube CTL 命令”,因为 cube CTL 命令在 Kubernetes 节点内部不可用。cube CTL 是用于管理 Kubernetes 集群的外部工具。这样，我们现在退出 SSH 连接，关闭连接。

现在让我们利用 cube CTL 命令这里的 growth cube CTL 在我们的计算机上本地可用，因为我们已经安装了 cube CTL，然后让我们首先检查信息 cube CTL 群集的类，我得到以下输出 Kubernetes 控制平面正在运行。

这里我看到了输入 mini cube IP 命令后我们刚刚看到的 IP 地址。

在您的情况下，这样的 IP 地址当然会不同。

我还看到核心 DNS 服务也在运行。

这意味着现在我们能够在我们的 Kubernetes 集群上创建部署服务等。

但是首先让我们列出 Kubernetes 集群中可用的节点。

为此，请输入命令多维数据集 CTL 获取节点。

在这里，我看到的只是单节点，因为 mini cube 创建了单节点群集，此类节点的名称为“就绪”。

这是控制平面和主机角色。

我们将在迷你立方体集群中实现这一点。

这个节点同时充当主节点和工作节点，在工作节点上，Kubernetes 创建与您在 Kubernetes 集群中部署的部署相关的不同螺栓。

现在，让我检查一下该群集中哪些端口可用或现在可用。

为此，我们输入命令 cube CTL get pods，现在我看到输出“在默认名称空间中没有找到资源”。

让我们列出这个 Kubernetes 集群中现在可用的所有名称空间。

为此，请输入命令 cube CTL 获取这样的名称空间。

我看到 Kubernetes 中使用了几个名称空间，如默认多维数据集节点 lease、多维数据集公共和多维数据集系统名称空间，以便对不同的资源和配置对象进行分组。

如果您简单地输入 cube CTL get pods，您将在此处仅看到默认命名空间内可用的端口。

顺便说一下，所有将在分数中创建的端口在默认命名空间中都很棒，但我们到目前为止还没有创建任何端口。

这就是为什么让我们尝试找出哪些端口运行在我们的其他名称空间内，例如 cube system。

为了列出特定命名空间中的端口，您必须利用命名空间选项。

所以立方体 CTL。

去拿豆荚。

有命名空间，等号，这里输入立方体系统。

让我们继续运行这个命令。

现在，在这个命名空间多维数据集系统中，我看到了 gordianus etcd 这样的板，它存储了整个 Kubernetes 集群、多维数据集、API 服务器、多维数据集控制器、多维数据集、代理、多维数据集调度和存储供应器的所有日志。

所有这些螺栓都是系统球，在这个主音符上运行。

好了，这就是我们如何找出 Kubernetes 集群中哪些端口正在运行。

现在让我们继续手动创建这两个文件。

为此，我们可以使用类似于 docker run 命令的命令。

但是使用 docker run 命令，您可以在这里只创建一个 docker 容器，也可以利用 cube CTL Run 命令只创建一个端口。

让我们做的立方体 CTL 运行在这里将被命名。

例如，让我们利用 Docker Hub 上提供的 nginx Docker image。

为此，让我们在这里输入端口 Nginx 的名称。

然后，我们添加选项 image，它的值将是 Ingenix Ingenix。

这是 Docker 图像的名称，它将被自动提取，新的容器将基于该图像创建，并且该容器将在 Kubernetes 端口内部运行。

让我们继续下去，看看会发生什么。

立方体 CTL 伊朗 Ingenix 做这个图像等于 Ingenix，这里我看到输出端口 Ingenix。

太好了。

让我们输入命令立方体 CTL 获取 pots。

在这里，我看到单端口 nginx 尚未就绪。

而不是他创造的容器。

让我们再次输入相同的命令，cube CTL get pods，现在我看到该板正在运行，它已准备就绪，其状态为 run。

当然，创建这样一个 pod 需要一些时间，因为它内部有 nginx 容器，Kubernetes 节点内部的 Docker 实际上被请求从 Docker Hub 中提取 nginx 图像，并基于搜索图像 Ingenix 创建相应的容器。

让我们了解一下这个被命名为 Nginx 的特定端口的详细信息。

此名称是我们在此手动指定的。

为此，请输入命令 cube CTL describe port，这里将是您想要描述的端口的名称，这里将是 Ingenix。

这是运行端口的名称。

这里有许多与这个特定端口相关的不同细节。

让我向上滚动一点。

在这里，我将找出此端口所属的名称空间等信息，它会自动分配给默认名称空间。

这就是为什么当我们输入命令 cube CTL get pods 时，我们能够在列表中看到它，因为这样的命令列出了默认名称空间内的所有内容。

这是有关创建或保留此类特定端口的节点的信息，Kubernetes 会自动在群集内的所有节点工作节点之间分配负载，并为特定板选择特定节点内容有关创建此特定端口的节点的信息。

当然，在我们的单节点群集中，每次创建任何端口时，您都会看到相同的节点，这里是此类节点的 IP 地址，这里是开始时间，这里是标签，状态为正在运行。

这是分配给这个特定端口 172 17 03 的 B 地址。

但请注意，现在我们将无法使用此类内部 IP 地址或端口连接到此特定端口。

为了能够连接到端口，您必须在 Kubernetes 中创建服务。

这就是我们稍后要讨论的。

在这里或下面，您还可以找到哪些集装箱是在这个港口内创建的。

这里只有一个容器，这是该容器的 ID，这是长 ID，这是用于该特定容器的图像。

这就是我们创建新端口时使用虚线图像选项指定的图像。

这里是图像 ID，它是来自 Docker hub 的图像的 ID，因为默认情况下，Kubernetes 从 Docker Hub 获取所有图像。

当然，也可以配置 Kubernetes 从其他 repos 获取图片。

录音服务，但默认为 Docker Hub。

好的，这是关于这个特殊港口的故事。

我们发现有一个 B 地址分配给此端口，有一个在此端口内部创建的容器。

这里是与这个特定端口的创建相关的日志。

您会看到此特定端口已成功分配给分钟，您会注意到此处有一条关于从 Docker Hub 中提取图像引擎 X 的消息成功提取了图像创建的容器引擎 X 并启动了 Ingenix 中的容器。

这意味着现在有 nginx 容器在网格端口内部运行。

同样，您可以通过输入 command cube CTL get pods 找到所有船只的列表，这里是现在默认名称空间中可用的单板。

现在，让我们快速返回到 Kubernetes mini cube 节点内部，至少再次返回到 Docker 容器，我们会发现现在又多了一个在引擎导出中创建的容器。

因此，使用向上箭头，我可以返回到之前输入的 SSH 命令。

在这里，再次连接到这个节点。

输入 TC 用户密码。

让我们在这里输入一个 docker ps。

但是现在让我们通过名称 ngi NX 来过滤输出。

现在我会发现有两个不同的容器，这是第一个，这是第二个，它们与引擎 x 相关。

这里是推力容器的名字，K 八 s nginx nginx 默认等等。

此外，还有一个集装箱 GAE 港 nginx 违约等等。

第二个容器叫做 boss 容器。

在这里，您可以看到，在容器 balls 可执行文件内部，实际上启动了一个容器，并对其进行了分级，如果多格拉是 Kubernetes 中的一个容器运行时，则总会有两个这样的容器，它们是为每个特定的端口创建的。

创建这样的 post 容器是为了查看特定端口的名称空间。

我们之前讨论过，同一块电路板中的所有容器实际上都共享名称空间。

这个容器，实际上是运行在我们的 nginx 网络服务器上的，可能会被 Kubernetes 重新创建。

但是两者都没有被触及。

第二个容器称为 boss 容器，它需要保持端口的名称空间。

好的，这就是现在集装箱的样子。

让我们实际连接到这个运行 nginx 服务的容器。

为了连接到容器，您可以使用 ID this one 或 this name。

让我们用这个 ID 连接到容器，请选择这个容器。

让我们进入 Docker Exec 命令。

这里的 ID 是容器的 ID。

让我们使用 SHA 可执行文件连接这个容器。

现在我在集装箱里面。

让我们检查一下它的主机名。

Ingenix。

它实际上是董事会的名称。

这个容器被赋予了相同的名字。

让我们检查一下该容器的 IP 地址，这里是这样一个地址 172 17 03。

这就是我们在端口详细信息中看到的 IP 地址。

现在，让我们尝试使用这个 IP 地址连接到运行在我们当前所在的容器内部的 web 服务器。

为此，我们可以使用 see URL 命令，这里是基于这个特定容器的 IP 地址。

不管怎样，我们是在 nginx 容器中。

让我们试着建立联系。

这里我看到了欢迎来到 nginx 页面，它是由这个 web 服务器返回的。

这意味着 nginx web 服务器已经启动并正在运行。

让我们离开这个容器，现在我们仍然在 Kubernetes 节点内。

好的，但是我们建立了 SSH 连接。

现在让我们也像那样退出这个连接。

现在，让我们输入以下命令 cube CTL get pods this all white，使用此选项，您还会在此输出中找到特定端口的 IP 地址，这是我们刚刚在容器内部看到的相同 IP 地址。

现在让我们尝试从我们的计算机连接到这样一个 P 地址，我们的计算机相对于我们的 Kubernetes 集群是外部的，因为 Kubernetes 节点是在虚拟机内部运行的。

并且该 IP 地址由 Docker 分配给节点内部的特定容器。

让我们尝试连接到这样的 IP 地址，我可以利用相同的命令 CRL。

这是在苹果电脑上提供的。

或者你可以简单地打开一个网络浏览器并连接到这个 IP 地址。

你会发现你不能像那样连接到引擎 X 容器。

因为正如我之前告诉你的，这样的 IP 地址是端口的内部 IP 地址，你不能从教室外面连接到这样的端口。

太好了。

这就是我们如何在 Kubernetes 集群中创建第一块板。

我们还探索了配电盘的尾部。

我希望现在你已经清楚了，当你在库伯内特港的品级容器中创建一个板时会发生什么。

为了创建容器，它必须从 Docker Hub 中提取图像。

在我们的示例中，提取了 nginx 图像，并基于该图像创建了新的容器。

此外，我们进入容器内部，验证 nginx web 服务器现在实际上正在运行。

但是我们不能从外部连接到这样的端口，因为现在它只有由 Docker 分配的内部 IP 地址。

但是当然，使用 cube CTL Run 命令创建端口并不方便，因为您无法伸缩。

例如，增加端口数量，只有一个端口，这是我们使用 cube CTL Run 命令创建的。

这就是为什么现在让我们简单地删除创建的端口，因为有命令 cube CTL Delete。

接下来是我们要删除的资源的名称和 Dysport，这里是我们的示例 Ingenix 中的端口名称，因为我们在输入 cube CTL Run 命令时手动指定了端口的站点名称。

因此，让我们继续删除 Sasha 端口购买 Ingenix 已删除，cube CTL get pods，在默认命名空间中没有找到资源，这样的端口就消失了。

与此特定端口相关的所有卷和所有命名空间都已删除。

太好了。

你可能注意到我们多次输入 cube CTL 命令，在我看来，这样的命令相对较长。

我们能够为这样的命令创建别名，以便在将来节省一些时间。

我们可以将 cube CTL 命令别名为一个字母 k。

然后我们将输入 K get ports 这样的命令。

但是现在，如果我输入一个搜索命令，我会得到命令未找到错误，因为我还没有创建任何别名。

在类似 Linux 的操作系统上，您可以通过输入命令 alias 非常容易地创建别名。

接下来将是命令的别名，然后是等号，在双引号中的等号后，您可以编写命令，如果您是 Windows 用户，并且如果您使用的是 PowerShell，则此命令在这里将不起作用。

如果你想在命令行中获得类似于我的体验，我推荐你安装 Git Bash。

为了安装它，请导航到获取 SCM comm 并简单地下载 Git。

如果您的 Windows 计算机上已经安装了 get，那么您已经可以访问 Git Bash，它是另一个终端。

如果你没有安装 Git，请到这里的 Windows 部分下载 git for windows，这里有不同的链接。

并且安装后请打开 Git Bash 终端而不是 power shell。

因此，我已经在 Mac OS 的这个终端中使用了 alias 命令。

因此，我将能够创建这样一个别名，让我们创建 LS LS 已创建，现在我能够使用简短版本的命令 K get pods，现在我看到输出在默认命名空间中找不到资源。

从现在开始，我将使用 cube CTL 命令的这种简短版本，但是请注意，这种别名将只在终端中的这个会话期间离开。

当你打开另一个终端会话时。

这个别名就没了。

如果你想我想创建一个永久的别名，当然，这是可能做到的，为了执行这样的任务，你必须编辑你的 shell 配置文件。

但是我现在不会这样做，有时间别名就足够了。

太好了。

现在，让我们继续。

正如我之前提到的，在 Kubernetes 集群内部创建单独的端口并不方便，因为您无法扩展和增加端口的数量。

因此，当您能够增加端口数量、数量等级、修改配置等时，创建多个端口的最常见方法是使用部署。

部署将负责实际端口的创建。

但是请注意，部署中的所有端口都是相同的，完全相同。

但是您可以创建同一个板的多个副本，并将负载分布在 Kubernetes 集群中的不同节点上，这就是部署的目的。

现在，让我们继续创建部署。

我们将使用与 nginx 图像之前相同的图像。

之后，我们还将增加此次部署中的端口数量。

我们还将为此部署创建一个服务，以便能够从外部部署连接到我们的部署。

让我们继续创建规模部署。

为此，我们将使用命令 cube CTL，create deployment，我们已经为 cube CTL 命令起了别名。

这就是为什么我将输入 key create deployment。

接下来将是部署的名称。

我们把它命名为 Ingenix 吧。

然后，让我们同样指定图像，就像我们在 cube CTL 中所做的那样，运行命令。

等号后面是我们希望用于此部署的图像的名称。

我们在这里输入 Nginx。

为了避免任何混淆，让我们修改这个部署的名称。

我们把它命名为 Ingenix。

这样的部署，让我们继续创建此部署。

部署是使用 ant 或命令 K get deployments 创建的。

他是单身部署，这是现成的和最新的。

让我们进入 K 舱。

现在，我看到没有一个主板是由这种特定部署管理的。

在我们创建了这样的部署之后，这样的板被自动创建。

现在该端口由该部署管理。

当时只有一个港口。

并且当然可任意缩放端口的数量和想要具有的端口的度数，例如 235 等等。

但是首先，在做那之前，让我们阅读关于大小部署的细节。

为此，让我们输入命令 gay 描述部署。

这里是 nginx 部署的名称。

下面是已创建部署的详细信息。

让我们向上滚动一点。

在输出的开头，我看到了部署引擎 X deployment 的名称。

这是我们为此部署指定的名称，这里是创建我们的 sash 部署的名称空间。下面是默认名称空间，您将看到 Kubernetes 自动将所有标签分配给此特定部署。

只有一个标签等号引擎 X 部署。

还有注释，这里是自动创建的注释。

他也是选择器选择器被用来连接电路板和蓝图。

因为在 Kubernetes 中，板和部署实际上是分开的对象。

我们必须知道如何将特定的主板分配给特定的部署。

在这里，我们看到选择器 up 等号 nginx 部署，对于自动创建并分配给此部署的特定端口，我们将找到一个具有相同值的标签 up 等号 nginx 部署，我们马上来看一下。

此外，还有一个复制副本字段，您可以在这里找到有关板数量的信息，这是此部署所需的数量，而在此运行的端口的实际数量只是所需的单端口单个复制副本，一个更新，一个总计，一个可用。

这意味着现在有一个端口分配给此部署，他也是策略类型滚动更新，它告诉如何执行部署的更新。

我们将在本课程的稍后部分回到这个话题。

此外，在下面，您将会看到关于此特定部署的其他详细信息。

在这里你可以找到关于这两个模板的所有细节。

而且正如我刚才告诉你的，你会发现端口里面对应的标签上等号 nginx 部署。

部署中的选择器字段中也提到了相同的标签。

这就是部署连接到特定端口的方式。

此外，如果您向下滚动一点，您会发现与此特定部署相关的实际事件。

这里我们看到的是单事件扩展副本集。

但是什么是副本集呢？你可以看到一个新的副本集 nginx 部署和副本集的 ID。

副本集实际上管理所有与部署相关的球。

副本集是应用程序的一组副本，因为您可以在同一个部署中创建 510 100 个不同的板。

并且它们都包含在副本集中。

这就是为什么在这里您会看到复制集的大小扩大到 1，并且在此复制集中创建了一个端口。

太好了，这是这次部署的详细信息。

现在，让我们再看一下端口列表，这里的 get pods 只是一个端口，请注意它的名称。

它从我们刚刚讨论过的副本集的名称开始。

所以在部署细节的输出中，nginx 部署和这个散列，以及之后，这个特定端口的特定散列。

如果在同一个部署中有多个属于同一个副本集的端口，您将在这里看到相同的图形，但是不同端口的哈希不同。

现在，将有一个单一的港口，这是准备好了，我们只是研磨。

此外，我们可以获得关于这个特定端口的详细信息，让我们获取它的名称，并在这里输入 gay describe board。

在这里，让我们粘贴企业哈希。

这是这个特定端口的详细信息。

让我们向上滚动。

他是与这个名字相匹配的董事会的名字。

它被分配到与部署相同的默认命名空间。

这是该特定 pod 正在运行的节点，这是该特定端口的标签。

我看到了诸如 up nginx deployment 和 port template hash 这样标签。

注意这个哈希等于这个哈希。

并且它与副本集的 ID 相匹配。

这里运行的 isis 也是板的 IP 地址。

在这里，我看到这是由特定的副本集控制的，副本集 nginx 部署。

这是副本集的散列，它控制这个特定的端口。

此外，这里还有关于在端口内部运行的容器的详细信息。

这是用于在这个特定端口创建容器的容器 ID 和图像。

此外，最后，您可以找到与端口相关的日志，正如我们之前所讨论的，成功地分配给特定的节点池、映像 nginx 等等。

现在，有了部署。

有一个副本集，而不是部署。

并且端口不由该部署管理。

现在只有一个港口。

太好了。

现在，让我们尝试扩展此部署，并增加部署中的端口数量。

现在有一个单一的端口，我们可以利用以下命令立方体 CTL。

简而言之，Kay 在我们的案例中，我们希望扩展部署。

咱们就在这里部署吧。

在我们的例子中，部署的名称是 Nginx。

那个部署。

然后，让我们指定一个我们希望立即部署到此部署中的副本。

现在将会有一个单独的副本。

为了指定所需的副本数量，我们可以在这里添加选项副本，然后在等号后面指定副本的数量。

假设我们想要扩展到五个副本。

让我们在这里输入文件。

让我们扩展我们的部署。

部署已扩展，现在让我们进入命令门获得投票。

我看到目前正在创建四个新容器。

这里有一个港口，第二、第三和第四个港口。

并且该端口仍在运行。

过一会儿，你应该会看到所有五个螺栓将运行。

他们来了。

我们刚刚将我们的部署扩展到五个不同的副本。

现在，我们的 Kubernetes 集群中有五个不同的 pod 正在运行。

请注意这有多简单，我们没有手动创建这些球，Kubernetes 为我们自动扩展了这一部署。

请注意，所有这些端口都有相同的前缀，这是副本集的名称，所有这些端口都属于。

并且这些部分对于不同的端口是不同的。

同样，两者都在运行。

我们还将阅读有关这些端口的详细信息，其中将包括 IP 地址，我们在此处添加选项“全白”。

我会看到每个端口在这里或这里、这里、这里或这里都有不同的 IP 地址。

所有这些螺栓都是在单节点微型立方体上评分的，因为我们在这里只是单节点群集。

当然，如果您运行多个节点，那么很多数据将分布在不同的节点上。

你会看到极点被分配到不同的节点。

好了，现在让我们试着缩减此部署中副本的数量。

从五岁到三岁。

让我们回到这个命令，K，scale deployment nginx deployment。

在这里，让我们指定我要复制三个这样的副本。

部署规模扩大了，我们去拿板吧。

我看到现在只有三块板启动并运行，两个端口被移除。

太好了。

现在，让我们尝试连接到其中一个端口。

举个例子，这个被抢到了他的 IP 地址。

之前，我们已经尝试从本地计算机连接到其中一个端口，同样，我们的本地计算机相对于 Kubernetes 集群来说是外部的，这非常非常重要。

让我们尝试连接到这个 IP 地址 CRL 并粘贴 IP 地址，连接不成功。

现在，让我们进入节点 mini cube 节点内部，尝试从节点内部连接到该端口(任何端口)。

这意味着我们正在尝试连接到群集内部的端口。

让我们再次以 sage、Docker、apt 和这个 IP 地址的身份 SSH 到我们的 mini cube 节点。

在你的情况下，这个 IP 当然是不同密码的 DC 用户。

现在，我们来看看 URL，并输入其中一个端口的 IP 地址。

这里任何港口都可以。

让我们看看 URL，我能够通过其 IP 地址连接到特定端口。

让我们尝试用另一个 IP 连接到另一个端口。

例如列表 y 0.3。

我不确定我是否有这样的端口运行。

是的，我有。

我还从这样的端口得到了响应，并得到了一个无限的摘要，现在我位于节点内部。

我能够使用这些端口的 IP 地址连接到在这个特定节点上运行的端口。

让我们从这个节点退出。

同样，让我们列出端口和地址。

因此，我能够从节点连接到这个端口和这个端口。

当然，这样的 IP 地址是在创建时动态分配给双方的。

如果你想连接到特定的端口，你不应该依赖端口的 IP 地址。

因此，不方便使用这样的 IP 地址。

您应该利用 Kubernetes 管理的某种其他 IP 地址，它允许您连接到部署内部的任何端口。

让我告诉你怎么做。

在库伯内特。

如果您想使用特定的 IP 地址连接到特定的部署，您必须创建所谓的服务。

有不同的选项可供选择，您可以创建所谓的群集 IP，此类 IP 地址将被创建并分配给特定部署，您将能够使用此虚拟 IP 地址在群集内部连接到此特定部署。

Kubernetes 将在分配给特定部署的不同端口之间分配大量数据，但请注意，此类 API 地址将只是整个部署的单个 IP 地址。

当然，使用这样的 API 地址比我们刚才尝试的端口的特定 IP 地址要方便得多。

此外，还有一个选项来创建外部 IP 地址，以向外界开放部署。

并且可以向节点的 IP 地址公开特定的部署，或者使用负载平衡器，或者进入 Kubernetes 集群内部，也可以有多个节点，并且两者都可以分布在不同的节点上。

因此，最常见的解决方案是拥有一个负载平衡器 IP 地址，对于特定的部署，该地址对于整个 Kubernetes 集群来说是唯一的。

而且，您将能够连接到您的部署，无论两者在何处分级，只需使用一个外部 IP 地址。

但这种负载平衡器的 IP 地址通常是由特定的云提供商分配的，如亚马逊网络服务或谷歌云。

并且这种分配由运行在主节点上的云控制器管理器服务来管理。

现在，让我们尝试为我们的部署创建集群 IP。

我们将为该特定服务创建。

我们已经创建了部署，让我们阅读有关规模部署的详细信息。

顺便说一句，你可以缩短这么长的路，就像这样展开。

这是我们部署的名称。

现在有三个不同的端口，它们已经在此部署中。

现在让我们为这个特定的部署创建一个服务。

使用服务，您可以从部署中公开特定的端口。

现在我们运行三个不同的端口。

每个港口内都有 nginx 集装箱。

默认情况下，nginx web 服务器运行在端口 80。

这意味着我们必须将容器的内部端口 80 暴露给部署之外的任何其他 prod。

例如，我们可以选择端口 8080。

对于此特定示例，为了从部署端口公开内部端口，您应该执行设备命令 expose，让我们输入一个 gay expose 部署。

这里将是部署的名称，我们希望为 nginx 部署创建服务。

这是我们部署的名称。

重述一下，我们在这里没有提到端口，我们使用部署。

和端口由部署来管理。

让我们公开部署引擎 X。这里的部署将是选项端口，让我们指定一个我们希望用作部署外部端口的端口。

让我们将它设置为端口 8080。

此外，我们还必须在这里添加目标端口，如果集装箱内的产品与我们现在在这里指定的产品不同。

在我们现在的例子中，带进集装箱的是陈年的。

这就是为什么我们必须在这里添加选项，这个目标端口是否等于符号 80，因此我们将内部端口从容器暴露给外部 prod 88。

我们这样做是为了部署英雄的名字。

好了，让我们来展示 nginx 部署服务引擎，现在至少展示了一些服务。

而且现在有两个服务喉咙服务是默认的系统服务。

它被称为 Kubernetes，类型是集群 ID，这里是集群 IP 地址。

这里我们还看到了一个更严重的 nginx 部署。

他的名字是他是集群 IP 类型，这里是集群 IP。

而且这个 IP 地址完全不同于分配给该端口的 IP 地址，这个 IP 地址甚至是从另一个网络的 IP 地址板的 172 开始的。

这里的 IP 地址从 10 开始，这是一个由 Kubernetes 创建的虚拟 IP 地址，它只是一个可用于连接任何端口的 IP 地址，这种类型的集群 IP 允许您仅从 Kubernetes 集群内部连接到我们示例 nginx 部署中的特定部署。

例如，如果在您的 Kubernetes 集群中，有一个数据库部署，例如，有 MongoDB 数据库或 my SQL 数据库。

并且搜索数据库不应该从外部可用和访问，您可以为这样的数据库部署和 Kubernetes 集群内部的其他部署创建集群 IP 服务，我们将能够使用集群 IP 连接到数据库部署。

但是，会话部署将对外界隐藏。

但另一方面，如果您创建了任何 web 服务部署，并且它应该可以从外部获得，那么您当然必须使用节点端口或负载平衡器将其暴露给外部世界。

这就是我们稍后要尝试的。

集群 IP 仅在集群内部可用。

这里我们看到了群集 IP 地址。

这是它，这是我们的部署暴露出来的。

此外，您可以使用这个命令的简短版本获得服务列表，只需输入 gay get SVC，它是服务 SVC 的简短版本。

结果是一样的。

现在有两个不同的服务，最后三个 IP 地址一个用于 Kubernetes 服务，另一个用于 nginx 部署服务。

现在，让我们尝试使用此服务连接到我们的部署。

我们来抢这个集群 IP。

让我们首先尝试从本地计算机连接到这个集群 IP 地址。

查看 URL 并粘贴此 IP 地址。

冷却后，让我们也添加我们暴露的端口。

这是我们部署的外部端口。

在内部，它将代理到每个容器上的端口 80。

让我们试试这在我们的本地计算机上是否有效。

我没看到任何回应。

我刚才就是这么跟你说的。

在 Kubernetes 群集之外，群集 IP 地址不可用。

群集 IP 的这种行为只是内部可用的 IP 地址，但您可以从任何节点访问群集 IP。

让我们试试。

让我们 SSH 到我们的节点。

让我们回到这个命令，SSH 多格拉和节点 DC 用户的 IP 地址。

现在，让我们尝试从节点连接到群集 IP。

在这里，我们再次指定端口 8080。

我看到了结果欢迎来到 Ingenix。

这个响应是由部署中的一个端口提供的。

当然，现在从这个输出中，我无法识别哪个端口确切地回答了我。

但是这个答案是由部署中的一个端口提供的。

我可以再试一次。

再一次，我从部署中的端口得到答案。

事情就是这样的。

集群 IP 只是单个 IP，被分级为针对特定部署的服务。

您可以只使用一个 IP 来连接到任何端口，Kubernetes 在幕后将所有请求代理到特定的选定端口，并在部署中的不同端口之间进行大量平衡。

好的，让我们结束这个连接，没完没了。不，也读一下关于特定服务的故事，我们将使用命令 K get SVC 来获取服务的缩写，他是我们之前创建的服务的名称。

让我们取这个名称，现在 K 描述服务和服务的名称，我们想要得到关于这里的细节是 Gloucester IP，我们刚刚使用它来连接到这个系列。

还有国外的，这里是 targett 港口。

这是三个不同的终点。

这些端点表示特定的端口，用于连接到这个特定的集群 IP。

因此，负载将在这三个不同的端口之间平衡。

注意这里的每个地方都是端口 80。

它是我们服务的目标端口，Dysport，ad 是运行 Ingenix 服务器的默认端口。

AD AD 和 AD 也在这里，您可以看到服务群集 IP 的类型，选择器也在这里表示等号 Ingenix 部署。

这就是这项服务实际上是如何连接到特定端口的。

所有这些端口在 nginx 部署中都有特定的标签。

这个标签是由 Kubernetes 创建的。

自动地，我们没有指定它，因为我们只是使用 grid deployment 命令创建了部署。

我们使用 expose 命令创建了一个服务。

这里的命名空间是默认的，与和部署的命名空间相同，称为 Nginx。

部署。

好了，这项服务到此为止。

我们使用集群 IP 公开了我们的部署。

集群 IP 仅在 Kubernetes 集群内部可用。

现在您知道了如何创建端口、如何创建部署、如何扩展部署以及如何为特定部署创建服务。

我们利用了在 Docker Hub 上可以获得的 Ingenix 图像。

现在是时候进入我们计划的下一步了。

我向你们承诺，我们将创建一个定制的 Docker 映像，将其推送到 Docker Hub，然后基于该映像进行网格部署。

这就是我们接下来要做的。

但在此之前，让我们删除现有的服务和部署，以便进行清理，比如说设置。

因此，让我们删除部署键删除部署。

这里是 nginx 部署的名称。

此外，让我们删除系列 gate 删除系列 Ingenix 部署，就像该服务也被删除一样。

让我们现在列出部署 gate get deploy it 部署的简短版本，没有找到资源，让我们列出服务 gay get SVC 只是一个名为 Kubernetes 的默认服务。

我们准备好了。

现在让我们创建一个非常基本的 Node js 应用程序。

它们是我们将利用 Express web 服务器包并创建我们的自定义 web 服务器。

下一步的计划是遵循规则，我们将不创建 GS Express web 应用程序，我们将配置一个 web 服务器，它将使用服务器的主机名进行响应。

当我们使用一个根 URL 连接到它时，这样我们将能够区分哪个端口实际上响应了一个特定的请求。

我们还将使用 Docker 文件和 Docker build 命令来查看此类应用程序。

之后，将构建 Docker 映像推送到 Docker Hub。

最后，我们将使用这种定制的映像创建部署。

你可以在 GitHub 库中找到所有的最终项目文件，你可以在这里找到它的链接。

但是我强烈推荐你，即使你对 no GS 和 express 不太了解，也可以自己创建这样的应用。

当然，我建议您建立您的自定义图像，并将其推送到您的 Docker Hub 帐户。

当然，你可以使用我的账户下的图片。

它们是公开的，由你决定。

所以我们不要公开 Visual Studio 代码。

如果没有，请安装。

我来打开它。

在 Visual Studio 代码中，请打开嵌入式终端按组合键 Ctrl+back tick，就像打开终端一样。

现在让我们为项目文件创建文件夹。

我将光盘放到桌面上。

在这里，我将使用“创建目录”命令创建文件夹 gate 代表 Kubernetes。

正如您已经知道的，让我们来看看 2k 八 s 文件夹，如果您正确安装了 Visual Studio 代码，您可以使用 code dot 命令打开任何文件夹。

如果您的计算机上没有这样的命令，您可以在 Windows 上按组合键 Command Shift B 或 Ctrl Shift B，在这里输入 gold 并选择 Show Command install gold Command in path，然后调用的命令将可从任何终端使用。

所以我在过去已经有了这个命令。

这就是我在 Visual Studio 代码编辑器中打开 K eight s 文件夹的原因。

它会像那样在新窗口中打开。

现在这个文件夹完全是空的，没有文件。

让我在这里再次打开嵌入式终端。

它将在 K 八 s 文件夹中打开。

现在让我们为我们的第一个项目创建文件夹。

这个文件夹的名字叫做同性恋。

八个 s，这个 web this Hello，因为我们将构建一个非常基本的 web 应用程序，它将简单地响应来自 Sarah 和服务器名称的 Hello。

所以同性恋网络你好。

在这个文件夹中，我们将创建节点 js 应用程序。

让我们听听在终端 CD 到 K 八 s web Hello 文件夹中的那个样子。

我们将初始化节点 js 应用程序。

为了做到这一点，你必须在你的电脑上安装 NPM。

如果你没有可用的 GS 和 NPM，请到 no GS 下载。

这里是链接，不下载 GS，也不从你的电脑安装 Gs，它会和 NPM 一起安装。

当然，我们不会在我们的计算机上使用 Node js 运行应用程序，而是在 Kubernetes 集群的容器内部运行应用程序。

但是为了在本地初始化项目，并安装依赖项，您必须使用 NPM。

因此，请不要和 NPM 一起安装 GS。

之后，NPM 应该可以在你的电脑上使用。

我会隐藏我的背痛。

现在让我把 NPM 放进去。

我会初始化这个项目。

您可以在这里添加选项 dash y，它将在新节点 js 项目的初始化过程中为您保留所有答案。

所以 NPM 在里面，这就是新项目被初始化的原因。

在这里你应该可以找到现在打包的 JSON 文件，里面有项目版本名称等内容。

现在让我们安装一个名为 Express 的软件包，BM install Express。

它将从 NPM 注册表包中被下载并被安装，包中的 JSON 文件被更新，这里没有被依赖的 Express。

所以现在让我们在 K eight s web Hello 文件夹中创建索引 js 文件。

顺便说一下，注意现在有了 node modules 文件夹，其中包含了我们项目的所有依赖项。

但是现在可以安全地删除这个文件夹了，我们不再需要它了，因为我们不会在 node 的帮助下在本地运行这个项目。

所以只需选择这个文件夹并删除。

好了，现在我们只需要打包 JSON 和打包日志 JSON 文件。

太好了。

现在让我们创建文件，我们将在 gay eight 的 web Hello 文件夹中创建它。

这是一个新文件，我们将其命名为 index dot m j s y m，因为我们将使用 EF 六模块语法，从版本 13 开始，Node js 中就提供了这种语法。

如果你想使用 import 语句，而不是 require 语句，你必须用扩展名 MJS 来命名文件。

所以让我们创建文件索引点 MJS。

这里我不会死于整个应用程序的内容，我会简单地复制它们，以节省一些时间。

所以贴在这里。

如果你愿意，你当然可以自己编写这个非常小的应用程序。

所以我们从快递包装进口快递。

我们还从 oils 进口油，oils 内置在 no GS 模块中。

之后，我们在端口 3000 处创建快速应用程序。

如果愿意，您可以指定任何其他端口。

这是我们的 Express web 服务器将在容器内部运行的端口。

这里我们为斜杠 URL 添加了一个路由处理程序。

这是一个路由 URL。

我们简单地从他们的 oils 主机名中用文本 Hello 来回答客户端，使用 oils 包我们检索服务器的主机名。

在服务器的响应中，您会看到简单的文本消息 hello 和运行该应用程序的服务器的名称。

因此，我们向客户发送了这样的信息，并将其记录到控制台。

最后，我们启动快速 web 服务器更新侦听，我们将从端口 3000 开始，web 服务器启动后，我们将查看控制台消息 Web 服务器正在侦听端口，这里是端口。

我不会深入探究 node GS 的解释和语法，因为它不是一门老的 GS 课程。

但是你有一个想法。

我们创建了一个非常基本的 web 服务器，它将响应这样的文本消息。

因此，让我们将更改保存在该文件中。

像保存更改一样在 Windows 上按 CTRL 或在 Mac 上按 Command。

现在让我们对接这个应用程序，为此我们将创建一个 Docker 文件。

现在我向你推荐安装名为 Docker 和 Kubernetes 的扩展。

所以在这里进入扩展，在这里输入 throws Docker。

选择多格拉，然后单击安装。

在我的情况下，Docker 扩展已经安装。

然后请安装 Kubernetes 扩展，找到它并安装它。

在我的例子中，Kubernetes 扩展安装得更早。

所以现在我们可以走了。

此外，为了建立实际的 Docker 映像，您必须在您的计算机上运行 Docker。

之前我们不允许 Docker 为了启动一个迷你 cube Kubernetes 集群。

但是现在我们需要 Docker 来建立 Docker 形象。

这就是为什么请继续安装 Docker。

如果您的计算机上没有安装，请下载 Docker。

请访问此链接并安装 Docker desktop，它适用于 Windows Mac OS。

你也可以在类似 Linux 的系统上直接安装 Docker。

所以请继续安装 Docker。

后来。

请运行它我会像那样运行它。

我之前已经装过了。

现在我看到图标多格拉从这里开始，我看到了相关信息。

我会等一会儿。

同时，让我们在 K eight 的 web Hello 文件夹中创建一个 Docker 文件。

因为我们没有在 K 8 的根文件夹中创建单独的义务。

让我们在这里创建一个 Docker 文件新文件，并将其命名为 Docker 文件。

请注意，Visual Studio 代码可以识别该文件的类型，并添加了图标 Docker。

并且在 Docker 文件中实时添加我们希望如何构建自定义 Docker 图像的说明。

为了节省时间，我将再次获取这个 Docker 文件的内容并粘贴到这里。

还有下面的说明。

我们将使用 Node Alpine 作为自定义图像的基础图像。

这里我们将工作目录设置为 slash up。

接下来，我们公开端口 3000。

然后，我们到这里打包 JSON 文件，并打包 JSON 的 slug。

然后，当我们构建这个自定义映像时，我们运行 npm install。

安装 NPM 后，我们从 Docker 文件所在的文件夹中复制所有剩余的文件。

在我们的例子中，它只是一个文件索引点 NGS。

并且这个文件将相当于图像内部的应用程序文件夹。

如果您不熟悉这些步骤，并且不知道 Rockdoor、exports 等的含义，我强烈建议您找到 Docker 速成班并浏览一遍，以便了解 Docker 如何工作以及您如何能够构建自定义映像。

本课程不是码头工人课程。

因此，我们检查所有剩余的应用程序文件，以锁定文件夹。

最后，我们添加指令 CMD，它代表 command，实际上表示当基于这个自定义重建映像的相应容器启动时，将执行哪个命令。

我们希望运行 npm start 命令。

但是，如果我们在项目文件夹中输入 npm start，现在会发生什么呢？

让我们试试那个。

让我们将这些更改保存在 Docker 文件 save 中。

让我们再次打开嵌入式终端。

我还在 K 八 s 的 web Hello 文件夹里。

这个文件夹里有两个 GS 文件的索引。

在这里，我们输入 npm 启动命令。

我所看到的，我看到了丢失的脚本开始。

现在，如果您输入 npm 启动命令，我们的义务将不允许任何事情。

为了能够运行我们的义务启动 web 服务器，我们需要修改包. JSON 文件。

就这么办吧。

让我们打开 JSON 文件包，在这里你会发现脚本部分，只有一个默认的脚本测试。

让我们像这样用 start 代替 test。

并且在这里用双引号键入节点索引点 MJS。

现在将会有一个启动脚本，它将使用一个节点文件索引来运行 NGS。

这将在端口 3000 上启动我们的 Express web 服务器。

这就是我们在这里讨论的。

我们已经在包 JSON 文件中保存了更改。

现在 NPM 安装是可用的。

我们现在能够建立我们的形象。

如果你想创建自定义图像，你需要利用 Docker 建立命令。

而且通常这个命令是输入到我们 Docker 文件所在的文件夹里的。

在我们的例子中就是这个文件夹，如果我在这里列出文件和文件夹，我会找到一个 Docker 文件。

Docker 文件内容来自 work、dir expose 等等，现在执行 CMD，让我们创建一个 Docker 映像。

此外，我们还将为这个定制的 Docker 图像添加技术。

这将包括您在 Docker Hub 帐户的所有用户名。

如果您没有 Docker Hub 帐户，请前往 docker.com Hub 创建帐户。

我已经有一个帐户，这是我的用户名。

请创建您的帐户并选择您的用户名。

之后，您可以将存储库推送到您帐户下的 Docker Hub。

当您推送存储库时，您会在存储库部分找到它们。

现在，在我的帐户下，这个名称空间中没有存储库。

所以让我们回到 Visual Studio 代码。

在这里，让我们为我们的应用程序构建一个自定义图像。

让我们使用命令 Docker build。

接下来是 Docker 文件的路径。

我将简单地使用点，因为现在我在创建 Docker 文件的文件夹中。

所以 Docker 建立 dot。

接下来，让我们使用 SD 选项为我们的图像添加一个标签，然后将是您的 GitHub 帐户的用户名。

在我的情况下，我会打我的。

在斜线之后，我会给这个库命名。

让我们把它命名为我们命名这个文件夹，同性恋八是网络做你好。

就像那样。

让我们使用 Docker build 命令来构建这个映像。

构建一个图像注意，在我的例子中，基础图像已经存在于缓存中，其他层也被缓存。

最终图像被建立起来。

现在，如果我输入命令，Docker images 并添加 grep，这里将是 K eight s web，我将在我们的本地图像库中找到现在可用的图像。

这是我们刚刚创建的图像的名称。

这是最新的，因为在我刚刚输入的这个命令中，我没有指定您可以在这里的列后指定的标记。

但是我用后来的堆栈创建了图像。

这就是为什么这里的技术是最新的。

这是构建图像的 ID 和图像的大小。

现在让我们假设这一成本仅用于构建 Docker Hub 的映像。

为此，您必须首先向 Docker Hub 订购。

为此，请输入 Docker 登录命令。

我之前已经登录过了。

这就是为什么 Docker 利用缓存的凭证并成功登录的原因。

在您的情况下，如果您第一次输入 Docker 登录名，系统会提示您输入 Docker Hub 登录名和密码。

现在，我可以将这个构建映像推送到 Docker Hub。

为此，我将使用命令 docker push，这里是我希望推送到远程存储库托管服务的图像的名称。

徐先生，你好。

让我们继续，推动它使用默认甲板最新推动不同的图像层，这需要一些时间，因为图像以色列太大。

所以你看到等待所有这些层。

最后这张图片被推送到 Docker Hub。

让我验证它是否出现在这里。

刷新页面，现在有八号登机口的网络问候图像。

太棒了。

顺便说一下，这个图像是公开的，您也可以在 Kubernetes 部署中使用它。

映像已准备就绪，可以添加 Docker Hub。

现在，我们能够基于这个映像创建 Kubernetes 部署。

就这么办吧。

我们到终点站吧。

让我们创建一个新的部署。

顺便说一下，现在没有部署，凯，开始部署。

没有部署，获得 SVC 服务，没有服务，只有一个 Kubernetes。

这是默认的。

现在，让我们基于自定义构建的映像创建一个新的部署。

为此，我们首先使用与之前相同的命令，好的，很好的部署。

好吧，很好的部署。

我们把它命名为 s。

网络。

你好。

下一个将是选项图像。

和图像将被藏在我的情况下，斜线同性恋八的网络。

你好，同样的名字，当我把这个图片推送到 Docker Hub 时，它就出现在这里，同样的名字，正如我在这里看到的。

这是我的用户名。

这是 Docker 存储库的名称。

让我们继续基于此映像创建部署。

当然，如果您自己执行所有步骤，并将客户构建映像推送到您帐户下的 Docker Hub，您可以在这里使用您的用户名。

因此，让我们继续创建新的部署。

部署是用 K get pods 创建的。

现在，我看到容器创建状态是该端口的状态，它是为此部署创建的。

让我们再次检查，仍然容器创建，因为它需要一些时间从 Docker 中心拉图像。

现在我看到容器正在运行。

这里是容器的名称。

这是通过部署创建的副本集的散列。

这是这个特定端口的特定哈希。

现在，让我们使用集群 IPL 创建一个服务。

然后尝试连接到我们的 web 服务器，它没有使用 GS Express。

所以让我们创造服务。

为此，我们将公开端口密钥公开部署。

这里将部署同性恋八人网的名称。

你好。

接下来，让我们添加选项 prod，并重述我们的 Express web 服务器运行在端口 3000 上。

让我们回到我们的应用程序。

转到索引点 NGS 文件。

这是端口 3000。

我们基本上可以将它暴露给将用于连接到部署的同一个外部端口，为此，我们只使用一个不需要该目标端口选项的 prod。

这就是为什么让我们像那样加上这个端口等号 3000。

这将为部署 K eight s web Hello 创建群集 IP。

让我们继续用最少的 servicescape get SVC 创建服务。

这是一个新创建的服务。

这里是服务的名称，这里是集群 IP，由 Kubernetes 创建。

同样，使用这样的 IP 地址，我们将能够连接到我们的部署，这意味着您可以连接到任何端口，您不必选择要连接到哪个端口，Kubernetes 会为您完成这项工作。

这里我们看到，我们打开了端口 3000，暴露了端口 3000。

让我们尝试连接到这个集群 IP 和端口 3000。

让我来看看这个群集 IP，当然，我将无法从本地计算机连接到这个群集 IP。

这就是为什么让我们像一个圣人 Docker 一样在这个 IP 50 911 上快速连接到我们的迷你立方体节点。

而你的情况，这个 IP 就不一样了。

给你。

我们的密码是 DC 用户。

现在，我们来看看群集 IP 和端口 3000 的 URL。

这是从部署中暴露端口。

让我们继续，我看到来自 gate six web hello 的消息 Hello，以及实际运行 Express no GS 应用程序的服务器的完整名称。

这就是来自快速网络服务器的信息。

在这里，我们从会话的和 name 主机名将它发送回客户端 hello。

这种义务在哪里运行。

这意味着一切都很完美。

我们基于定制构建的映像创建了一个部署，并将其推送到 Docker Hub。

这是它的结果，我们可以看到来自 web 服务器应用程序的响应。

太棒了。

顺便说一下，如果您输入这样的 CRL 命令，您将自动转到新的提示符，并且您将停留在这一行。

如果你想移动到新的一行，你可以输入一个 C URL，然后添加分号和 add here。

现在你将被转移到新的生产线上。

太棒了。

现在我们得到了来自同一个端口的响应。

在这里，我们看到了与这里相同的主机名。

现在，让这扇窗户开着。

让我们在部署中增加投票数量。

让我们扩展我们的部署。

我将在项目应用程序中打开一个新标签，您可以打开一个新的终端窗口。如果您在 Windows 上，我将使用组合键、命令 T 来打开新标签。

这里是新标签页。

如果我输入键，我会说错误命令找不到，因为别名只在这个标签。

这就是为什么让我们再次创建 alias，alias k 等号立方 CTL。

顺便说一下，如果一个命令只包含一个单词，你可以省略双引号。

所以让我去掉那些双重目标。

别名已创建。

现在让我们一起去找豆荚吧。

这里我看到了相同的电路板名称，这是我在 web 服务器的回答中看到的。

让我们知道如何扩展这一部署。

回顾一下。

我们部署的名称是 K eight s web Hello。

这是部署的名称。

现在它只有一个吊舱。

让我们将它扩展到 K 级部署。

k8s 网。

你好。

我想将部署扩展到四个副本。

让我们继续，部署是成比例的。

让我们现在得到吊舱 K 得到吊舱。

现在有四个端口，其中一个仍在创建中。

我们再回来看看。

现在四个端口都在运行。

都属于同一个部署 K 八 s web Hello。

当然，每个端口都有自己唯一的 IP 地址。

让我们详细了解端口、千兆端口、破折号或白色端口。

这里我看到每个端口的不同 IP 地址。

当然，它们不同于为特定服务创建的集群 IP。

使用列表服务获取 SVC。

和之前一样，我们在这里看到了集群 IP，4k 八 s web Hello 服务。

每个螺栓现在都可以通过这个集群 IP 使用，Kubernetes 将决定为每个特定请求选择哪个端口。

现在让我们回到这一步，我们在 Kubernetes 节点内部，尝试再次连接到这个集群 IP 和这个端口。

让我们清除这里的终端并查看 URL。

现在我看到了来自这个端口的响应。

如果我重复命令是另一个端口的响应。

让我们重复命令一次，一次，等等。

我发现现在不同端口之间的负载是平衡的。

因为这里我看到了来自不同端口的响应。

不同的名字出现在这里的回应。

不同的民意测验服务于不同的要求。

这是不同的投票名称。

这就是主的分配是如何运作的。

现在使用搜索定制建立 Docker 图像，我们能够证明这一点。

好吧，我们继续。

现在，让我们修改我们为部署创建的服务类型，因为现在有了群集 IP，它只能从群集内部使用。

让我们到这里，让我们删除目前的服务 K 八 s 网络你好。

简单地取它的名字被清除终端和 antigay 删除 SVC 代表服务和基于服务的名字我们想要删除服务被删除得到 SVC 没有这样的服务了。

如果我尝试使用我们之前使用的集群 IP 再次连接到部署，我肯定会得到一个错误。

所以我没看到回应。

太好了。

现在让我们再次创建一个服务。

但是现在我们将把它的类型设置为节点端口。

我们用 send 命令 K，expose deployment，K 八 s web Hello。

这里是 type，它将被设置为 node port。

用帕斯卡格符号表示的节点端口。

让我们在这里添加端口选项，并将端口设置为 3000。

与我们之前使用的端口相同，它是我们的容器实际运行的端口，表示没有 GS 应用程序。

让我们继续创建这种类型的服务节点端口部署已公开让我们列出服务获取 SVC。

现在又有了名为 gate s web Hello 的服务，它现在的类型是 note port。

这里也是集群 IP 和端口。

但在这里，我看到的是使用端口选项指定的端口。

在列 I 之后，我还看到随机创建的端口 32，142。

现在，我能够使用节点 IP 地址连接到部署，我可以通过输入 mini cube IPL 获得节点 IP 地址，我们只有单个节点摘要。

我的情况是这样的。

我可以在这个端口获取这个 IP。

我将连接到此部署中的一个端口。

就这么办吧。

让我抓住这个 IP，例如去网络浏览器。

因为现在我将能够从我的计算机连接到部署，让我粘贴此 IP，在列之后，我将像这样添加此端口。

在我的例子中，连接字符串在这里。

这里是 AP 地址，它是节点的 IP 地址，这里是随机生成的端口，它是在我们为部署创建服务时由 Kubernetes 自己创建的。

让我们继续并尝试连接。

我看到其中一个端口的响应。

让我们刷新一下。

我看到来自其他带有 RS 或 name 的报告的响应，再次刷新，我在这里看到来自其他端口的响应。

这就是我们如何能够使用节点端口服务连接到我们的部署。

此外，更简单的方法是使用 mini cube service 命令 mini cube service 来获取连接到此部署的 URL。

在这里输入服务的名称，在我们的例子中，gay eight s web Hello。

让我们输入，网络浏览器中的新标签页将自动打开。

请注意，这里的 URL 与我刚才使用的节点和端口的 IP 地址相同，是由 Kubernetes 自动生成的。

这是服务的节点端口类型。

当你进入一个迷你立方体服务网站时，你也可以在这里看到这个实际的 URL。

如果您只想获取 URL，您可以在此处添加该 URL 选项，您将只看到 URL，您可以获取它并将其基于您想要的任何位置。

这是一种节点端口服务类型。

它公开了节点端口的部署。

在我的示例中有这个特定的端口，在您的情况下，这个 prod 将完全不同。

还有一个选项是负载平衡器，我将向您展示如何创建服务。

让我们创建一个负载平衡器服务，为此，删除现有服务网关删除 SVC 服务网关的 web Hello。

服务被删除门礼品 SVC 不再有这样的服务。

让我们创建一个负载平衡器类型的服务。

大门暴露部署。

盖茨的网络你好。

在这里，让我们再次添加类型负载平衡器协议 Pascal Case Foundation，并添加默认选项，其值将为 3000。

和以前一样。

让我们创建这样的服务。

现在我看到了负载平衡器类型的服务。

这里是群集 IP，但这里的外部 IP 是待定的。

如果您使用 mini cube，您会看到此处待定，但是当您使用 Amazon、Google Cloud 等云提供商在云中的某个位置部署应用程序时。

在这里，您将看到自动分配的负载平衡器 IP 地址。

但是在我们的例子中，使用 mini cube 的行为类似于 note port。

在这里，我们仍然能够使用节点的 IP 地址连接到我们的部署。

如果我现在输入 mini cube，service，gate 的 web Hello，我将看到针对该节点 IP 地址的连接。

这是一个随机产生的游戏。

这是一个随机的港口。

好吧，我们继续。

让我们保持这种服务和部署。

回顾一下，我们在这里有一个单一服务，它是在 k eight s web hello 之前创建的，现在的类型是负载平衡器。

只有一个部署门被部署。

这个名字是 K 八 s 网络你好。

现在，这个部署有四个不同的端口可供我们使用。

我们可以阅读关于这个部署的详细信息，描述部署，gait 的 web Hello。

这是这次部署的细节。

顺便说一下，在这里的最后，我看到了与副本集扩展相关的日志，最初，副本的数量是 1，后来我们将其扩展到 4。

如果你愿意，你可以试着把它调整到任何一个数字。

在上面我看到这个部署有一个昵称 web Hello。

命名空间是默认标签注记选择器复本需要更新为可用于。

现在让我们试着形成。

让我们尝试更新部署中的映像版本。

请注意，这里的策略类型是滚动更新。

这是什么意思？当您发布应用程序的新版本时，您当然希望在生产环境中顺利推出这个新版本，而不中断服务。

Kubernetes 允许开箱即用。

这很简单。

这种策略类型的滚动更新意味着将使用新映像创建新端口，而以前的端口仍将运行。

所以两者都会被一一取代。

最后，在某个时候，或者两者都将在您更新的映像中运行。

现在让我们在行动中尝试一下。

我们将更新一点我们的应用程序，并用 NASA 技术建立新的图像，例如，版本二点 0.0。

之后，我们将在部署中修改图像，看看会发生什么，Kubernetes 将如何推出此更新。

所以让我们开始吧。

顺便说一下，我不再需要这一步了，在这一步中，我创建了到 node 的 SSH 连接。

因此，让我退出这个连接并关闭这个步骤，我将只打开一个选项卡。

所以让我们回到 Visual Studio 代码。

这是索引点 MJS 文件的内容。

我们已经有了这个版本的应用程序的图像，服务器用这样的字符串回答我们。

现在让我们修改一下这个 twink，比如，让我们在这里加上 br 伦理第二版，就像这样。

让我们知道构建一个带有新标签的新映像，将其推送到 Docker Hub，然后在我们的部署中修改映像。

让我们保存这个文件中的更改，打开更好的终端。

让我们建立图像，并分配另一个标签吃。

现在图像只有一个标签，它是最新的。

所以让我们建立一个新的形象。

如果你想把这个版本的图片发到你的 Docker Hub 账户，请在前面加上你的名字。

所以把糖放在底部，这将是图像的名字，gay eight s web Hello。

平静之后。

我将添加标记，例如像这样添加两个点 0.0。

让我们建立网站图像重述，我修改了索引点 NGS 文件，我更新了这个字符串，所以它应该建立新的图像。

让我们继续构建它构建导出层映像已构建，现在让我们将其推送到 Docker Hub。

我会复制这个名字，包括技术。

现在我进入 docker push。

我的应用程序的一个新版本将使用单独的技术为同一个 k eight s web Hello 图像推送。

让我们继续推送推送，我看到一些层已经存在，只有一个层被推送至映像推送成功，让我验证一下，转到我的 Docker Hub 帐户刷新它，这里仍然只看到一个映像。

注意，让我点击它。

在这里，我应该找到最新的税收，并做点 0.0。

现在让我们部署这个映像的新版本。

为此，我们将使用以下命令。

我们去这里的终点站。

让我们为部署键集映像设置一个新的映像。

我们正在为特定部署设置新映像，接下来将是部署 K 八 s web Hello 的部署名称。

然后，我们需要选择要设置新映像的端口。

我们将到达八号登机口。

在等号后面，我们将指定一个新的图像。

在我的情况下，它是比特鞋斜线同性恋 ID s 网络你好，两列点 0.0。

这是我们在将新版本的图像推送到 Docker Hub 之前分配的新技术。

输入此命令后，映像将被更改，并开始更新。

在 1k 展示状态部署之后，准备好输入 follow in 命令。你可以在文本编辑器中的某个地方准备这个命令，然后很快进行 basted。

在这个命令之后，我将尝试手动输入它。

让我们继续并更改图像图像更新关键卷展栏状态部署 gay eight s web Hello 等待部署允许完成。

现在，我看到部署成功推出。

在我看到这样的消息之前，四分之三的新副本已经更新，一个旧副本正在等待终止，等等。

最后，终止所有以前的副本，并推出新的副本。

让我们知道至少机器人同性恋得到球。

现在我看到有四个端口。

请注意，这些端口的年龄从 30 秒到 40 秒不等，这意味着以前的端口被完全终止，新端口被创建。

现在，在所有这四个螺栓中，我们正在运行新版本的应用程序。

通过使用服务访问我们的部署，我们可以非常容易地验证这一点，并且仍然有服务获得 SVC 类型，它是一个负载平衡器。

他被集群 IP 带到了这里。

通过输入 command mini cube service，K eight s Webb Hello，我可以打开与其中一个运行端口的连接。

让我们继续，实际上已经打开，现在我看到了响应，其中包括版本 2。

这就是错误更新的工作方式，你可以在这里刷新页面，然后你应该会看到来自其他服务器的响应。

举个例子，这个。

同样，这里我看到的是版本 2，这意味着我们的新应用版本已成功部署到部署中的所有船只上。

太棒了。

这就是滚动更新的地方，这就是你如何通过输入命令 K 卷展状态来检查滚动更新的状态。

这一个，如果你愿意，你可以为你的图像创建一个 Motek，把它推到 Docker Hub，并再次验证 rollout 如何工作。

或者，如果你愿意，你可以回滚到以前的版本。

顺便说一下，我们可以一起快速尝试一下。

让我们转到该命令，在这里我将删除 deck，这意味着我想只利用这个 deck，让我们检查如何再次修改图像。

实际上，我们将回到应用程序的前一个版本。

让我们修改映像让我们检查或允许状态我们的默认新副本已更新，等待部署或允许完成。

最后，部署成功展开。

我将再次看到四个全新的端口，这是这四个端口的时代。

让我们再次连接到我们的部署，迷你立方服务 gay 它作为 web Hello。

我再次从没有版本 2 的服务器上看到 hello。

这就是滚动更新的地方。

太棒了。

现在，让我们试着盖牌。

现在我们有四个螺栓启动并运行。

但是，如果我只是手动删除其中一个端口，会发生什么呢？让我们试试那个。

让我们以端口的名称为例，注意这四个端口的 H，然后输入键 delete port 并粘贴您喜欢的任何端口的名称。

在这个命令之后，让我们再次得到豆荚。

我将看到新端口将自动创建容器。

因为我们告诉 Kubernetes，部署中所需的端口数量是四个。

这就是为什么它会尽最大努力为其特定部署创建所需数量的副本。

现在，我将看到又有四个端口启动并运行。

这个端口的年龄是 33 秒。

好吧，我们试试滚动更新。

我们还尝试删除其中一个端口。

不要让我向你演示如何休息室 Kubernetes 仪表板。

如果你正在使用一个社区立方体，这是非常容易的，只需一个命令。

但是如果您在自己的场所或云中的某个地方运行 Kubernetes，可能会有点困难，因为您需要保护对 dashboard 的 web 访问。

但是在这里，再次，只有一个单一的命令迷你立方体仪表板。

就像这样，让我们启用这个广泛的代理验证代理地狱。

这个宽广的网页将在这里打开。

正如您在这里看到的，没有提示输入用户名和密码。

这个仪表板就是这样启动的，因为我们使用的是 mini cube。

在这里，您可以观察到有关 Kubernetes 集群的详细信息。

例如，您可以转到“deployments ”,您会在此处找到一个部署，请注意，让我缩小一下大小。

这是此次部署的元数据。

这是标签。

策略滚动更新，这是我们观察到的。

两种状态均可用于更新。

这是新副本集的条件，这是此部署创建的副本集的 ID。

您可以单击这个超链接，阅读关于特定副本集的详细信息。

请注意，副本集部署和端口都属于同一个名称空间 default，但是当然，您可以为该副本集分配不同的自定义名称空间标签，端口状态为 running for desired，这里是属于该特定副本集的所有船只的链接。

下面还有为此部署类型的副本集创建的服务，这里是负载平衡器。

如果您单击“specific port ”,您可以阅读有关特定端口的详细信息，这里是创建端口时端口命名空间的名称。

这里是关于创建此船的节点的信息状态是运行端口的 IP 地址。

在下面，您还可以找到实际控制这个特定端口的副本集的详细信息。

请注意，此端口的标签在 Golang K eight s web Hello 上。

这里发现相同的标签由副本集控制，这里是副本集中的标签。

此外，在下面您可能会发现在这个特定端口发生的事件的详细信息。

例如，这里有一步拉图像先生。

徐 K 八 s 网你好。

这是关于不在港口内运行的集装箱的交易。

每个港口都不只有一个集装箱。

顺便说一下，如果我转到副本集，我会发现实际上有两个不同的副本集，它们是为该映像和该映像的不同映像创建的。

现在，在该副本集中有 0 个点，因为我们从该映像回滚到标签为“latest”的映像，这就是为什么现在我在这里看到 4 个端口，在这里看到 0 个端口。

好的，这个图形用户界面，你可以点击其他菜单项，并观察，例如，哪些节点属于教室。

现在有一个单独的迷你立方体音符。

如果你点击它，你可以看到这个特殊节点的详细信息。

那是 Kubernetes 仪表板。

您可以利用它来观察 Kubernetes 部署和服务的状态，等等。

让我关上它。

现在让我们继续，按下左边的 Ctrl+C 键来中断这个过程。

现在迷你魔方将不再出售。

现在，请注意，我们刚刚使用了强制性方法来创建部署和服务。

我们使用不同的 cube CTL 命令创建部署和服务。

但是通常，这不是创建部署和服务的方式。

并且在大多数情况下，使用声明性方法。

在声明式方法中，您必须创建莫亚配置文件，这些文件描述了部署和服务的所有细节。

然后，使用 cube CTL 应用这些配置文件。

应用命令。

这实际上是在 Kubernetes 中创建不同资源和对象的声明性方法。

这就是我们现在要做的。

现在，让我们删除之前创建的部署和服务。

为此，您可以执行别名命令 cube CTL，删除部署，然后删除服务。

但也有一个删除默认命名空间中所有资源的简短版本，它是带选项的 gate delete all，就像所有资源都将被删除一样，您会看到两者都被删除，服务被删除，部署也被删除。

我们去拿豆荚。

两个都还在被终止。

我们再检查一遍。

还是心狠手辣的被等了一下。

现在在默认命名空间中没有找到任何资源。

所有端口都被终止了，让我们得到服务得到 SVC。

现在只有一个默认的系统服务 Kubernetes。

当然，没有部署，没有找到资源。

现在让我们为部署创建莫亚配置文件。

对于严肃的英雄，我们将创建两个独立的配置文件。

我们来看看 Visual Studio 代码。

而在这里，让我顺便提一下，高度暂时也由终端决定。

让我关上那些旧窗户。

现在在这里，让我们折叠这个文件夹 gay eight s web Hello，因为这个文件夹专用于我们的 Node js Express web 应用程序。

现在，在 k8s 文件夹的根目录下，让我们创建以下文件部署莫亚。

此外，让我们创建文件服务点莫亚。

就像那样。

所以两个文件部署莫亚和服务点莫亚。

让我们来看看部署点莫亚文件中的字段。

如果您在这里用 VS 代码安装了 Kubernetes 扩展，我要求您在快速创建这样的配置文件之前做的事情。

让我展示给你看。

因此，只需在这里键入 deployment，您将看到我们选择建议 Kubernetes 部署，您将看到莫亚配置文件将自动为您创建。

您将看到“我的应用程序”的所有外观都将突出显示，您只需键入要设置的部署的名称，并将“设置名称”保留为“K 八”,与我们之前所做的一样。

但是现在我们使用的是莫亚配置文件。

所以 K 八 s 网你好。

就像那样。

此处设置的部署名称是此部署的实际名称。

他是一个转移行动斜线 v1。

这是带有匹配标签方案的选择器。

通过这个匹配标签方案，我们指定了哪些极点将由这个部署来管理。

下面是嵌套模板，该模板实际上描述了端口，但在这里您不需要像那样指定模板的种类，因为部署模板的嵌套模板总是购买的。

因此，这里不需要电流。

接下来，对于属于此部署的端口，我们在这里设置标签。

此处的标签与选择器匹配标签中的标签相同。

所以这个标签和这个标签在这里匹配。

接下来在 spec give 中，我们指定我们想要在这个端口中创建哪些容器。

只有一个具有此名称图像的容器需要填充，我们现在将用真实图像替换此图像占位符。

同样在下面，您可以指定您想要在特定的容器中打开哪些端口。

在下面的端口部分，您可以指定一个容器端口列表，它将在端口 IP 地址上打开。

现在让我们来感受一下这部分的细节。

图像将基于 Ashok 斜线 K 八 s 网络你好。

这两者都包含在端口 3000 中。

就像那样。

还要注意，VS code Kubernetes 扩展在这里添加了资源部分。

在这一部分中，有 limit skip，它指定了每个板的内存和 CPU 限制，这将由该部署创建。

这里将限制内存量和 CPU 资源量。

500 m 意味着 CPU 核心的一半。

如果要修改 500 到 250，比如 CPU 核的 1/4，还是保持那样吧。

这就是部署的规格。

让我们将更改保存到该文件中。

现在，让我实际展示如何找到关于如何创建特定莫亚配置文件的文档。

让我们转到 web 浏览器，在这里我们转到 kubernetes.io。

然后到这里看文档。

而且这里还是去参考一下。

在这里，选择 Kubernetes API。

例如，在 Kubernetes API 中，您可以选择工作负载资源。

您将了解如何描述端口、创建端口模板或创建副本集的详细信息，我们只是创建一个部署。

因此，让我们单击此处的部署部分。

您将找到如何创建莫亚配置文件的细节。

如果要创建部署，必须将分流设置为 apps slash v1。

在下面，您将找到必须存在于部署配置文件中的其他键。

例如，客户端必须设置为部署。

此外，还有元数据部分 spec status status，它是由 Kubernetes 自动填充的，并且将在您基于特定的配置文件创建部署之后添加。

如果我回到这里的配置文件，我会找到 API 版本种类元数据和规范等关键字，这些关键字与这里描述的 API 版本种类元数据和规范相同。

如果您想了解有关部署规范的详细信息，您可以单击此处，您会发现在规范中，您必须指定选择器模板副本、策略意味着无线电秒数等等。

如果我回到这里看一下，我会发现在这个例子中的 spec 内部，这里有一个选择器和一个模板选择器和一个模板，两者都是必需的。

如果您点击模板，您将阅读关于模板规格的详细信息。

让我们点击它。

在这里，您会发现在电路板模板规范中，您必须指定元数据和规范，我们刚刚购买了一个规范。

这就是我们在模板部分为 pod 添加的元数据和规范。

让我们单击 pod 规范并阅读有关 pod 规范容器的详细信息。如果您愿意，可以在 pod 规范中添加多个容器。

在此规范中，我们有容器，让我们单击容器。

在这个容器规范中，您会发现名称是必需的。

这就是为什么我们设置名称为这一切，你也必须为一个特定的容器设置图像。

此处介绍了映像资源和端口，在此推荐页面上也有介绍。

所以这里我们支持 section。

此外，您还可以为特定的容器设置环境变量。

我强烈建议您熟悉文档，以及所有可用的选项，我刚刚向您展示了如何深入文档，并找出如何感受配置文件的不同部分。

好了，我们已经完成了部署配置文件的创建。

所以现在这里是部署。

现在，让我们使用声明性方法应用此配置文件，在适当的位置创建此类文件，您将不再需要输入命令 cube CTL create deployment，您只需输入命令 cube CTL apply 即可。

就这么办吧。

让我们在这里打开嵌入式终端。

现在我还在 gate 的 web Hello 文件夹里。

让我离开这个部署莫亚文件所在的文件夹。

让我们在这里最少文件。

这是部署莫亚的配置文件。

在这里，让我们进入命令立方体 CTL。

Apply 这个 F 代表 File，这里将是文件部署的名称。

dotayamo。

就像应用 Det 文件和创建部署一样简单。

顺便说一下，我没有别名，别名 K，立方体 CTL。

所以 K 得到部署。

现在有了 K 8 的 web Hello 部署。

此部署中只有一个端口获取端口。

这是这个端口，它正在运行。

没错。

但是，我们现在如何扩展此部署并增加副本的数量，很容易通过修改此规范文件来实现。

而是我们如何增加复制品的数量。

此时此刻，我们看不到任何数字。

让我们试着用文档来找出答案。

我想我不知道如何改变这一点。

让我们转到工作负载资源，检查部署并向下滚动到这里。

所以规范状态元数据类型，这里没有选项。

让我们单击部署规范。

在这里，我们将选择或模板复制所需的端口数量。

这是您需要使用的选项，如果您想要将复制副本的数量从默认数字 1 修改为任何其他数字。

您必须在部署规范中添加副本 Skee。

让我们来看看部署规格。

所以我们在这里说明。

在这里，我们添加新的交易副本。

它的价值是第五点。

如果我回到过去，我可以读到它的值是整数 32。

所以你不需要在这里写那样的文件。

没错。

作为一个数字，我们已经保存了更改。

让我们再次应用此部署莫亚配置文件，使用相同命令 cube CTL，应用此 F 部署莫亚。

让我们继续配置，得到豆荚。

现在我看到正在创建四个新容器。

而现在我的部署有五个不同的港口，其中四个已经被周围的五个知道了。

这就是为什么我们能够通过修改部署莫亚配置文件来非常容易地修改我们的部署。

但是现在当然没有服务 K get SVC，让我们用类似的方法创建一个新的服务。

让我们把它们藏在终端旁边。

现在让我们转到服务点莫亚配置文件。

在这里，我们还将加快创建服务配置文件和类型服务的过程，Kubernetes 扩展将为我们提供此选项。

这个规格会自动评分。

客户端是服务 API 版本是最佳版本，它不同于此服务的部署类型元数据名称集名称的 API 版本。

让我们输入名称 gate 的 web hello 和 hero，让我们修改选择器并选择 all，这将是金门八人的 web Hello。

顺便说一下，如果您将鼠标悬停在该配置文件中的任何键上，您可以找到指向每个特定键的文档的超链接，例如，键名 URL 在这里。

或者，如果您将鼠标悬停在种类上，您也可以在这里找到超链接，例如用于元数据种类的转移。

好了，这个系列剩下的就是修改端口部分。

在这里，我看到端口和目标端口是我们自动填充的。

在我们使用之前，我们实际上公开了同一个端口 3000，这是运行 Express web 服务器的端口。

现在，我们可以尝试不同的端口公开端口 3000，这是端口到端口的目标端口，比如 3030，就像这样。

这意味着目标端口 3000 将暴露给外部端口管理机构。

还要注意，在这个规范中，没有这个服务的类型。

假设我们想要创建一个负载平衡器服务。

为此，让我们去文档。

让我们在这里找到服务文档。

Kubernetes，API，服务资源，服务。

这里是我们点击服务规范。

在这里，我们将选择报告。

在下面，您还可以找到服务类型的类型，可以是默认的群集 IP、外部名称、节点端口或负载平衡器。

让我们将类型设置为负载平衡器。

让我们回到我们的配置文件。

在这里检查，让我们像这样设置负载平衡器的类型。

这就是这个服务规范。

让我们将更改保存到该文件中。

让我们使用与 cube CTL 之前相同的命令来应用它。

应用破折号 F 代表文件，这里是类型服务点莫亚。

我还在八号门的文件夹里。

所以让我们应用一个服务莫亚文件应用 GAE 得到 SVC。

现在我看到创建了负载平衡器类型的新服务。

现在类似地，和以前一样，我可以使用命令 mini cube service K eight s Web 打开到我们部署的连接。

你好，让我们继续，页面将被打开。

刷新和来自另一个端口的良好响应。

这意味着现在一切都像以前一样，没有服务和部署。

我们使用配置文件通过声明的方式创建了一切。

他被归档服役，这是他的调遣档案。

我们还可以使用一个命令轻松删除刚刚创建的部署和服务。

让我们这样做，去终端，在这里输入键删除这个 f 这里将是第一个文件部署莫亚的名称。

这里，让我们再次添加破折号 f 选项和莫亚的服务类型。

让我们继续删除部署和服务。

我们将检查好，得到 SVC 无服务，得到部署和不部署。

太好了。

现在让我们做下列动作。

让我们尝试创建两个部署。

让我们把它们联系起来。

因为当您想要将不同的义务连接在一起时，这是非常常见的任务，例如，将前端连接到后端，或者将后端连接到数据库服务等等。

因此，现在我们将做下面让我画一幅画。

因此，与之前类似，我们将创建一个 web 部署，并部署他们的 no GS Express web 应用程序。

让我像这样输入 web。

我们还将再创建一个部署，并将其命名为 Ingenix。

此 Ingenix 部署将运行基本 nginx 映像，无需任何调整，并且此 nginx 部署将使用集群 IP 提供相应的服务。

让我在这里画一条线，在格洛斯特，IBM 将从大写的 C 开始集群 IP。

这两个部署当然是在 Kubernetes 集群中分配的。

此部署也将公开，但每个服务都将具有负载平衡器类型，这意味着我们将能够使用负载平衡器 IP 地址从外部连接到负载平衡器。

现在，在 web 应用程序内部，我们将创建两个端点，第一个是 route 和 point，与之前一样，它将从 web 服务器简单地返回 hello。

这里还有一个端点，比如说 Ingenix。

当连接到 nginx 时，我们将使用集群 IP 连接到 nginx 服务。

或者你会看到使用 nginx 这样的服务名。

因此，从一个部署，我们将连接到另一个部署，并从将在 nginx 应用程序中运行的端口之一获得响应。

然后，我们将把从工程师那里收到的结果和导出的内容返回给客户。

这就是计划。

通过这种方式，我们将实际连接到不同的部署，web 部署和 nginx 部署。

让我们开始吧。

你在 k8 的文件夹里。

让我暂时关闭那些文件。

让我们创建一个 K eight s web Hello 文件夹的副本，它包含所有与 Weber Express 应用程序相关的文件。

让我们复制这个文件夹并粘贴到这里。

让我们重新命名它简单地点击这个名字，按回车键，输入一个新的名字 K 八 s web 到 Ingenix 就像这样。

接下来，让我们保持 Docker 文件不变，Kira Coulter 的这个文件夹中有这个 Docker 文件，所以这里没有修改，但我们会稍微修改索引点 MGS 文件。

我会从这里拿一份修改过的文件。

让我复制并粘贴到这里。

这是第二个应用程序的索引点 MGS 文件的内容。

这里仍然有正斜杠路由 URL，我们仍然是伟大的快递网络卖家。

但是我们在这里增加了一个端点。

它的路由处理器现在是异步函数，因为现在我们将连接到另一个服务器，模拟不同部署之间的连接。

注意这里的 URL，它只是 http 冒号加斜杠加 Nginx。

我们将创建一个名为 Ingenix 的服务。

用于第二次 nginx 部署。

从这个部署，我们将能够使用相应服务的名称连接到另一个部署。

就这么简单。

当然，可以使用集群 IP 进行连接，也可以不使用集群 IP。集群 IP 是动态的，服务名称是静态的。

因此，我们将使用 nginx 服务名连接到 nginx 服务器之一。

这里，我们使用 fetch，它是我们从 node fetch 包中导入的，顺便说一下，现在我们也会把它安装到这个应用程序中。

所以我们在等待引擎 X 服务器的响应。

然后，我们从调用文本方法的响应中获取主体，并简单地返回到客户端，这个主体本质上就是这个端点将做的事情，它将简单地代理对 nginx 服务器的请求，并从 Ingenix 向客户端返回结果响应。

就这么简单。

这里我们从节点 fetch 导入 fetch，因此，我们必须安装这样的外部依赖。

为此，让我们打开另一个终端，在这里确保您看到这个文件夹的深度，gate s web to Nginx。

Web 到 Nginx。

在这里，让我们输入 npm 安装节点获取安装包，您将看到这个包的 JSON 文件将被修改。

现在这里有两个依赖项 Express 和安装了节点获取依赖项。

再次注意，节点模块文件夹已经出现在这里，但我们不需要它。

让我们简单地删除它，因为在我们将立即构建的映像内部，我们有运行 npm 安装的指令。

在这里。

这就是为什么所有必要的依赖项都将安装在 Docker 内部。

形象。

好了，现在我们可以走了。

顺便说一下，这个应用程序也包含在最终的项目文件中，您可以从我的 GitHub 存储库中克隆它。

所以 K 八 s web 到 Nginx。

这是索引点 MJS 文件。

现在，让我们再次构建 Docker 映像，但它将位于该应用程序的 Docker 映像中。

现在让我们使用与 Docker 构建之前相同的命令来构建它。

让我们在这里列出文件和文件夹，这里有一个 Docker 文件。

Docker 文件未被修改，它与以前的应用程序相同。

现在让我们建立 Docker 图像 Docker 建立点。

让我们添加一个标签，先生。

Ashok，slash，姑且称之为 gay 八 s web two Ingenix。

与此文件夹同名。

让我们保持最新的标签。

你不必在这里加上那样的标签。

在这种情况下，它会自动添加。

让我们构建这样的映像映像正在构建请注意 npm 安装命令映像已构建。

现在让我们把它推到 Docker Hub。

让我来取这个名字。

码头工人推。

这里将是我想推送到 Docker Hub 的图像的名称，推送的一些层将从我们的图像中重用。

最后，推出了映像，现在我们可以在 Kubernetes 部署中利用它了。

太好了，让我们把终端和下面的都藏起来。

现在，我将向您演示如何将部署莫亚和服务莫亚配置文件合并到一个文件中。

让我们关闭那些文件。

让我们创建一个新文件，命名为 K 八 s 网络 nginx 点莫亚。

就像那样。

现在，在这个配置文件中，我们将结合创建部署和服务的说明。

让我们先去莫亚服务部。

把这个文件的内容粘贴到莫亚 nginx 网站上。

然后，请加三个破折号正好是三个，然后转到下一行。

现在，我们转到莫亚部署文件，将所有内容粘贴到这三个破折号下面。

现在，仅在一个文件中，我们就有了服务和部署规范。

现在让我们修改部署，因为我们希望利用我们的另一个映像，这里我们将利用我们的另一个名称。

顺便说一下，我们可以在这里选择这个名称，然后右键单击并选择更改所有事件。

让我们将服务和部署命名为 gay eight s web to Ingenix。

就像那样。

让我们将此服务的类型保持为负载平衡器端口，这里可以修改为另一个端口，例如，让我们将它设置为所有三个端口。

在部署规范中，我们将复制副本的数量减少到三个。

让我们修改容器的规范。

我们现在想要使用的图像将是 K 八 s web to engine X，它在我修改 K 八 s web Hello name 时被替换。

因此，他是我们刚刚推送到 Docker Hub 的正确图像，我们希望将此图像用于此特定部署。

集装箱港口将保持不变，这 3000 好吧，这就是新应用程序的部署和服务规范。

现在，让我们为 NJ MCs 部署和服务创建规范，因为我们现在将部署两个不同的应用程序。

一个是基于我们的自定义图像，第二个是基于官方 Docker 图像，称为 Nginx。

让我们简单地复制这个文件并粘贴到这里。

让我们把这个文件命名为 nginx 点莫亚。

现在在这个 nginx 点莫亚文件中。

我们来修改名字。

再次选择此项并更改所有事件。

我们就把它命名为 Ingenix 吧。

请完全按照我刚才的方式打字。

确切地说是 Ingenix，因为我们将在运行 Express no GS web server 的容器内的部署中使用该服务的名称。

我们将使用 Ingenix 服务名连接到此部署。

这就是为什么这个名字在这里非常重要。

现在，我们决定将集群 IP 服务类型用于第二次部署。

这就是为什么让我们从这里删除类型负载平衡器。

默认情况下，将在此分配群集 IP。

让我们修改此处的端口部分，让我们删除目标端口，仅保留端口并将其设置为 8。

这是 Ingenix 运行 web 服务器的默认端口。

同样在部署部分，我们必须修改图像。

现在它只是 Ingenix，没有您的用户名，因为我们希望使用默认的 nginx 图像。

让我们保持这里的资源限制，让我们修改这里的容器端口，以便像这样添加。

因此复制品的数量将是例如五个而不是三个。

让我们在这里保存更改并删除总结我们在这里所做的，我们将创建一个名为 Nginx 的新服务。

这里的名称对我们的设置很重要。

这是一个带有单键端口的端口部分。

这意味着外部端口 A 将被映射到内部端口 80。

这是 nginx web 服务器默认运行的端口。

这里的服务类型是集群 IP，这意味着此类服务在 Kubernetes 集群之外将不可用。

在此部署中，我们使用名为 Nginx 的官方 Docker 映像。

这里，端口容器和容器端口的规格设置为 8。

就是这样。

因此，我们创建了两个莫亚配置文件 nginx 点莫亚和 K 八的 web 两个 Ingenix 利用定制构建的图像。

这是图像名称。

现在让我们应用这两个配置文件，这一个和这一个。

让我们转到终端，验证现在我们没有任何部署 get deploy。

目前没有部署，也没有服务。

现在，让我们只使用一个命令来部署一切。

现在我仍然在 K 8 的 web to engine X 文件夹中。

让我们到莫亚配置文件所在的上一层。

它们在这里，这一个和这一个。

让我们来应用它们。

好的，应用这个 f，这是第一个文件。

这是它的名字。

我们也可以再用一个文件，这个莫亚的图片。

就像那样。

让我们继续创建部署和服务。

服务创建部署创建服务创建和部署创建。

让我们检查部署 gay 得到部署。

现在有两个部署，这一个和这一个。

部分地，他们已经得到了 SVC。

让我们阅读有关服务的信息。

创建了两个服务，一个是负载平衡器类型的服务，另一个是 nginx 类型的集群 IP 摘要服务，我们将使用该服务名称从该 web 连接到 nginx 部署，再连接到 nginx 部署。

或者，我们也可以利用集群 IP 从一个部署连接到另一个部署。

但是集群 IP 是动态的。

此服务名是静态的。

因此，让我们也检查棋盘游戏获得豆荚。

一些投票正在进行，还有一个投票仍在进行中。

现在，我们能够测试我们的设置，并尝试从 web 应用程序连接到 nginx 部署。

让我们打开到 web 服务部署的连接，因为我们在这里为该服务使用了一个负载平衡器类型。

我们可以利用这个端口作为 Kubernetes 节点的 IP 地址。

概括一下，为了使用 mini cube 快速获得特定部署的 URL，您可以输入命令 mini cube service，这里是服务的名称 K eight s web two Ingenix。

网页浏览器页面被打开，我们从一个端口得到响应，这个端口看起来像是 K eight 的 web to nginx 部署。

这是相应副本集的名称。

好了，我们刚刚触发了到根 URL 的连接。

让我们快速回到我们的应用程序。

让我把这个终端藏在这里。

让我们转到这个新的应用程序，打开 index dot m。

JS 文件。

重述一下，这里我们有两个端点根端点，和斜杠 nginx 端点，这两个端点实质上是向 nginx URL 发送请求，并从其他服务器返回客户端代理响应。

该服务器相对于运行该 web 应用程序的服务器是外部的。

我们刚刚从服务器收到这个流，让我们不要试图连接到 Ingenix 端点。

让我们回到我们的浏览器，在这里添加斜杠 Nginx。

按回车键。

我得到的是，欢迎来到 Nginx。

这意味着来自 nginx Sarah 的响应在服务器内部被成功代理，这属于我们的 web 部署。

通过这种方式，我们能够以另一个服务的名称从一个部署连接到另一个部署。

nginx，这是我们在这里指定的另一个服务的名称。

并且这样的服务没有集群 IP，获取 SVC。

这是 nginx 服务的集群 IP。

我们能够通过服务名连接到另一个部署。

这就是为什么您可以非常容易地将不同的部署连接在一起。

这种服务名到 IP 地址的解析是由 Kubernetes 的内部服务执行的，称为 DNS。

我们可以很快验证这一点。

让我们以这里的终端为例。

概括地说，这一周仍然会得到这里的港口 K 获取吊舱列表。

现在，我们可以使用任何 pod，并在 pod 内的运行容器中执行任何命令。

使用立方体 CTL。

Exec 命令，该命令与 Docker exec 命令非常相似。

现在，让我们将属于 k s web 的任何端口的名称添加到 nginx 部署中。

让我把这个名字抄下来，你的情况下名字会完全不同。

让我在这里清空我们的终端，在这里输入 K exec，这将是端口的名称。

接下来是两个破折号。

然后，让我们在 Janux 中输入 NS lookup。

就像那样，让我们按回车键。

我收到了外国信件。

这是什么意思？使用这个命令？我们试图解决新泽西州泄漏的名称从内部的集装箱属于体育和这样的解决是成功的。

这个 IP 地址是我在网上查询时从 DNS 服务器得到的。

但是这个 IP 从何而来？右同性恋获得 SVC。

在这里我看到了这样的景色。

注意这个 IP 和这个是一样的。

我也是这么告诉你的。

现在 Kubernetes 能够将服务的名称解析为相应的集群 IP。

这就是我们在这里看到的。

我们在属于我们的部署和其他服务的端口内部执行解析。

当然，我可以在其中一个端口上执行类似的命令，例如，我可以在这里输入，我们在这里输入 http Ingenix。

这实际上会连接到 Nginx。

萨拉，然后从它那里检索路线网页。

让我们试试那个。

我成功地从一个 Ingenix 端口收到了响应。

这是 nginx 网页。

好了，这就是不同的部署可以非常容易地相互连接的方式。

让我们回到 Visual Studio 代码，让我们删除到目前为止的所有内容。

如果您想更深入地了解这些部署的详细信息，您可以这样做，当然，现在您可以允许它，例如，mini cube dashboard，您可以更深入地了解不同的端口，了解它们内部发生了什么等等。

你有所有必要的知识。

好了，现在让我们删除两个部署和两个服务。

删除这个莫亚的图标，把它的网页改成莫亚的图标。

让我们继续，服务和部署都被删除，gay 得到部署。

没有资源发现同性恋得到，因为我们看到的只是单一的服务。

我想您会同意我的观点，使用莫亚配置文件的部署比使用单独的 cube CTL 命令的部署更令人愉快，也更快。

我们已经完成了本课程的主要实践部分。

还剩一步。

我将向您演示如何将 Kubernetes 群集中当前较暗的容器运行时及时更改为其他容器，例如 CRI o 或容器 D，为了修改容器运行时，我们需要删除当前的迷你立方体设置并创建一个新的。

但是让我们到这里的终端。

让我们输入迷你立方体状态命令。

现在它正在运行 cubelet 正在运行一个屏障服务。

让我们停止，迷你立方体迷你立方体停止停止节点迷你立方体一个节点已停止，现在让我们删除当前设置迷你立方体删除虚拟框中的小迷你立方体在我的情况下，我删除了迷你立方体群集的所有痕迹。

现在让我们再次创造格洛斯特。

迷你立方体开始我将再次使用驱动程序选项，它的值将在我的情况下是虚拟框。

如果你是一个 Windows 用户，你应该在这里输入 Hyper V，就像之前的迷你立方体一样。

但是请注意，Docker 选项至少对我不起作用，我无法在 Docker 容器中运行 CRI o 容器。

所以出于某种原因没有成功。

因此，我利用 VirtualBox，他们不建议你现在使用。

司机码头工人。

因此，在我的情况下，驱动程序是 VirtualBox。

接下来我将添加选项。

运行时有一个容器，这个值是 CRI，还有一个选项是容器 d。

如果你想这样做，你可以两者都试试。

所以我会像这样喊着进入这里。

让我们再次从头开始创建一个迷你立方体集群。

但是现在容器运行时间被设置为 CRI o 让我们继续从教室中的控制平面节点迷你立方体迷你立方体开始再次创建真正的玩偶书。

这将需要一段时间，现在我看到的步骤准备 Kubernetes 上 CRI 哦，终于完成了。

现在，让我们检查迷你立方体的状态。

键入 Ctrl Blaine host 正在运行，一切都和以前一样运行。

但是现在节点内部的容器运行时间是 CRI 0。

让我们检查一下。

让我们 SSH 到 minikube IP 地址，让我们在这里输入抛出 mini cube IBM SSH Docker 在 192 168 59。

一个自动是的，DC 用户。

现在我在迷你立方体节点里面。

现在让我们进入 docker ps。

我所看到的不能和码头联系起来。

这表明 Docker 没有在这个节点中运行，因为我们使用的是 CRI o 容器运行时。

但是如何检查是否有集装箱呢？

我们很容易使用以下命令 sudo CRI CTL PS，这里有一堆不同的容器，它们运行起来像代理核心 DNS 存储供应器等等。

现在，让我们再次尝试部署应用程序 web 应用程序和 nginx 应用程序，并创建这两个服务，看看情况如何。

让我们回到结果。

到代码。

在这里，让我们执行和以前一样的任务。

只需应用配置门，应用此 F 并应用两个莫亚配置文件。

好了，让我们继续创建部署和创建服务门户并开始部署。

还没准备好，但是有两个部署。

再一次，再一次，还没准备好，让我们来获取有关服务的信息。

有两个服务和以前一样，门，得到吊舱。

有些帖子不是创建一个扩展的爱检查游戏的容器。

有些已经在跑了。

gay get deploy for AWS to deployment is radio ingen IX 还没有准备好。

我们再检查一遍。

现在 nginx 已经部分就绪。

现在所有这些容器都是由 CRI o 容器运行时创建的。

让我们输入一个 mini cube 服务和该服务的名称，以便测试是否一切都像以前一样工作。

这是一项民意调查的回应。

我们在这里加上斜杠。

和它工作之前一样。

现在，我们能够从 engine X 部署中获得响应。

太棒了。

我们刚刚修改了容器运行时。

现在它被设置为 CRI。哦，让我们回到我们连接到 node 的 SSH 连接。

让我们再次进入。

Sudo CRI CTL PS。

让我们举个例子，用名字 K 8s web two Ingenix。

我现在看到属于此部署的三个不同的容器。

现在他们通过国际广播电台抵达。

哦。

好吧，让我们不要断开这个服务器。

好了，伙计们，这就是 Kubernetes 初学者课程。

您当然可以让您的迷你立方体集群保持运行。

您可以创建其他部署，可以构建其他 Docker 映像。

换句话说，您可以随心所欲地使用 Kubernetes，并熟悉我们在本课程中讨论过的所有 Kubernetes 工具。

我希望你喜欢这门课，也希望你喜欢和我在一起。

如果是这样的话，你可以在社交媒体网络上找到我在屏幕上找到的所有链接，我会很高兴在其他视频中见到你，我祝你一切顺利。

拜拜。