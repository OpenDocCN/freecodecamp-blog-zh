# Git 分支如何工作

> 原文：<https://www.freecodecamp.org/news/how-git-branches-work/>

分支是 Git 最重要的概念之一。要掌握 Git，对分支如何工作有一个透彻的理解是必不可少的。

我们刚刚在 freeCodeCamp.org YouTube 频道上发布了一个关于 Git 分支的教程。

您将了解您可以对分支执行的许多操作——从创建和删除分支，一直到发布、重命名和比较它们。本教程重点介绍在命令行中使用 Git。你不需要任何图形用户界面软件来跟进。

本教程由 Tobias Günther 从 Tower 创建。Tower 为 Mac 和 Windows 创建了一个强大的 Git 桌面 GUI。

以下是本教程所涵盖的内容:

*   分支是 Git 中的核心概念
*   核心概念:总分行
*   核心概念:本地与远程分支机构
*   创建新分支
*   切换分支
*   重命名分支
*   出版分支机构
*   跟踪分支
*   拉+推树枝
*   删除分支
*   合并分支
*   重建树枝基
*   比较分支
*   使用分支备忘单

在 freeCodeCamp.org YouTube 频道观看完整的课程(33 分钟的观看时间)。

[https://www.youtube.com/embed/e2IbNHi4uCI?feature=oembed](https://www.youtube.com/embed/e2IbNHi4uCI?feature=oembed)

## 副本

(自动生成)

分支是最重要的概念之一。

在本课程中，Tobias 将向您全面介绍 Git 中分支的工作原理。

别忘了点击订阅按钮，这样你就不会错过我们任何精彩的课程。

你好自由代码营的朋友们。

我的名字是 Tobias，我将解释如何在 Git 中使用分支。

Git 和版本控制中最核心也是最重要的主题之一是你如何有效地与你的分支一起工作，以及你可以做些什么来开始。

但是在我们走之前，让我对免费代码营的人们大声疾呼，感谢他们在互联网上教人们如何免费编码。

非常感谢你参与这次任务。

谢谢你让我帮了点忙。

简单介绍一下我的背景，我是 tower tower 团队的一员，这是一个在 Mac 和 Windows 上为 Git 开发的图形用户界面。

我们已经存在了 10 多年了。

在这 10 年里，我们已经帮助了大约 100，000 人，他们来自大大小小的公司，是自由职业者，是世界各地的每一个开发人员，他们使用 good 版本控制系统更加容易地工作，解决了 good 令人头疼的问题，使工作变得更加容易。

今天的研讨会将不是关于塔，不要担心，您不必安装塔，我们将在命令行上做所有事情。

所以不管你用什么，你都可以跟着做。

所以在我们开始之前，这是关于什么的？分支是 Git 的核心概念之一。

你可以用它们做无穷无尽的事情，你可以创建和删除它们，你可以比较，你可以合并和重组它们，你可以发布和跟踪它们。

所以我们正在谈论所有你可以用你的分支做的事情。

在我们深入讨论具体细节之前，让我先简单谈谈两个被反复提及的核心概念。

所以一个是头支。

如果你不知道这个术语，那是非常重要的。

它是当前活动的或签出的分支，您的存储库中可以有许多分支，但您只能有一个分支。

这在一个时间点是活跃的。

因此，如果您在命令行上或在图形用户界面中点击 get status，您将看到您在 branch master 上的某个分支上。

所以师父目前是总支，主动支。

另一个核心概念是本地和远程分支机构之间的区别。

所以当我们处理分支时，我们在 99%或 95%的时间里，我们在本地 Git 存储库中处理分支，对吗？你的 gitHub，git lab，Bitbucket 中的远程分支，作为你的 DevOps，无论你有什么，它们更多的是用于同步，对，大部分实际工作发生在你的本地机器上的本地分支，在你的本地 Git 存储库中。

好的，让我们从创建新的分支开始。

没错。

所以在你使用分支之前，你首先需要在你的库中有一些分支。

要创建一个新的分支，您可以使用 git 分支，命令并提供您的分支的名称。

所以我的新分支就是那个新分支的名字。

当我这样做时，当只给 git branch 命令提供一个名称时，git 会认为我想基于当前检出的修订开始我的新分支。

所以我要在目前的情况下，创建一个新的分支。

因此，如果我想在一个特定的其他版本上创建一个新的分支，比如说，让我们看看这个库中有哪些版本。

顺便说一下，这是这个塔，我们制作的图形用户界面。

这是我的新分支，我刚刚创建的。

这是个好消息。

如果我想在不同的版本上创建我的分支，假设我想从这里开始，我可以在这里复制提交的版本散列。

然后在命令行上，我可以输入 git branch，other branch，这就是名字，我想从这里开始修改。

好吧，让我们看看它做了什么。

好的，新的分支。

所以这招奏效了。

从这里开始修改，对吗？所以你可以很灵活地决定如何开办分行。

正如我刚才简要提到的，在几秒钟前的核心概念领域，您只能在本地存储库中创建新的分支，对吗？在远程存储库中创建分支是通过发布现有的本地分支来实现的，所以我可以在这里上传这些分支，但我不能在远程存储库中创建分支，我们稍后会讨论这一点。

或者写 git 分支，或者不提及具体的修订版，那么它将是你当前的修订版，或者提及一个具体的修订版。

好的，切换分支，当然，另一个你会一直用到的非常重要的动作。

所以当前分支，签出分支，也就是头分支，定义了你的工作当前所处的环境。

和将创建新提交的当前 head 分支，它们将在该上下文中创建。

以及更改您当前工作的分支机构。

这意味着检查另一个分支或切换一个分支。

让我们看看如何做到这一点。

好的，现在，如果我进入 git 状态，我可以看到我在 branch main 上。

所以 main 目前已签出，这是我的头分支。

如果我希望这是一个不同的分支，我可以输入 git checkout。

虽然我们有这么多漂亮的新分支，但还是要有新的分支。

而我切换到了 branch，我的新分支，所以 git checkout 命令非常通用。

它有很多用途。

近年来，Git 命令面板中增加了一个新命令，我建议您以后使用 Git switch。

因为 Git 开关只用于这个目的。

只用于切换分支。

因此，如果我们想切换到我们创建的其他分支，我可以键入 Git switch，other branch 和 get switch，正如我所说的，这样会更明确一些。

因为它只有这个目的。

git checkout 是一个有很多很多含义的命令。

所以我更习惯使用 Git switch，git checkout 和 get switch。

所以你可以在图形用户界面中看到，这是头部指针现在指向的地方。

所以其他分支，目前签出了活动分支。

好的，第三，重命名分支，很容易漏掉 A 型分支的名字，或者事后改变主意。

所以不要担心，你可以重命名分支，当然，get 使得重命名你的本地头分支变得非常容易。

让我们开始吧。

所以我们现在开始。

同样，让我们键入 git status，以确保我们在 branch other branch 上。

如果我对这种命名不满意，我可以使用带有破折号 m 参数的 git branch 来更改它，然后提供一个新名称。

所以更好的分支，就这么叫吧。

看一看。

好，我现在在树枝上，更好的树枝。

这很简单。

如果你想重命名一个不同的分支，不是头分支，也不是当前签出的分支，那么我们必须提供旧分支的名称，以使其不明确，所以现在，让我们看看我们有哪些分支。

我们使用不带任何参数的 git branch。

好吧，那么更好的主分支和我的新分支。

假设我想重命名一个非 head 分支，一个当前没有签出的分支。

假设我想在这里重命名我的新分支。

所以让我们腾出点空间。

好的，让我们把 git 分支，破折号 m，重命名为我的新分支，称它为我的更好的分支。

让我们看看这是否有效。

不带任何参数的 git branch 显示了您当前拥有的分支。

瞧，我们就像这样把一个非分支的名字改了。

因此，这些命令用于更改本地分支名称。

如果您想重命名远程分支，事情会稍微复杂一点，因为 Git 不允许您重命名恶意的远程分支。

所以在实践中，重命名远程分支可以通过删除旧的分支，然后从本地存储库中发布新的分支来完成。

所以让我们再来看看我们有什么。

因此，如果我对 origin 不满意，在这里进行命名，我可以删除它，然后重新上传它，我将在一秒钟内第一次向您展示如何发布上传您的品牌，这样我们就可以看到它是如何工作的。

好了，用 git 分支破折号 m 重命名分支。

命令。

如果您有一个非 head 分支要重命名，请提供旧名称，然后提供新名称。

这是为了重命名远程分支。

我们稍后会这样做，我们正在创建一个新的分支，并首次推动它。

所以我们可以一举两得。

所有出版分支机构。

正如我已经说过的，在远程存储库上创建一个新的分支是不可能的。

然而，我们能做的是在远程存储库上重新发布现有的本地分支。

所以我们可以把本地的东西上传到远程服务器，这样就可以和我们的团队分享了。

所以让我们看看我们有什么，我们可以发表什么。

好的，现在，我们有这个漂亮的功能上传分支，它不在遥控器上。

假设我想第一次发布它，我想把它上传到远程服务器 origin。

让我们在命令行上完成。

所以我可以用 git push dash u，我一会儿会解释新的标志是什么。

在原点遥控器上，它的功能是加载器分支。

对，看起来不错。

好了，开始了。

我们刚刚把它上传到这个分支，本地分支上传到远程存储库。

现在，我们马上就要详细讨论这个你标记的破折号了。

但是简单地说，现在，它告诉 Git 建立一个跟踪连接。

这意味着以后推拉会变得更加容易。

所以我们来详细说说。

因为了解跟踪分支的整个主题非常重要。

默认情况下，本地和远程分支彼此无关，它们作为独立的对象存储和管理在 Git 中。

但是在现实生活中，当然，本地和远程分支经常确实彼此有关系。

例如，远程分支通常类似于本地分支的对应物，对吗？在 Git 中可以建立这样的关系。

所以一个分支通常是远程分支，或者本地分支，抱歉，相反。

另一个，通常是远程的。

在这个小图中，您可以看到我们有一个本地分支，称为“开发”,我们在源远程上有一个远程分支，也称为“开发”,当然，我希望它们彼此之间有关系，它们是彼此的对等物。

随着跟踪关系建立，当我以后拉或推时，当我从我的本地分支推或从我的远程分支拉时，我可以简单地使用普通 Git 命令，我可以使用 git push 和 get pulled，而不需要任何进一步的标志或参数，因为跟踪连接已经知道可以填补空白。

例如，我希望从哪个远程的哪个分支推送或拉取数据，所有这些都已经保存在跟踪连接中。

当我们使用带有 you 选项的 git push 来发布本地分支时，我们已经使用了这样一种方法来建立 so tracking 连接。

在那之后，正如我所说的，我们可以猜测只使用 git push，而不提及远程或目标分支或源分支，这一切都解决了。

反之亦然。

所以我们所做的是将本地分支发布到远程存储库。

但是我们也可以继续跟踪或下载一个远程分支，并将其带到本地存储库，反过来也是可行的。

我们也可以建立这样的追踪联系。

所以让我们看看我们有什么。

这是第五个。

我们目前在远程上有一个功能登录分支，在我的本地分支中没有。

假设有人开发了该功能，登录分支机构，我想加入该工作并与该分支机构一起工作。

所以让我们把那个分支机构拿到我当地的分支机构。

方法是使用 git 分支和 dash dash track 选项。

这将是特色登录。

它来自原始功能，登录。

因此，我创建了一个名为特性登录的本地分支，它基于原始特性登录。

他们互相认识，对吗？我建立了跟踪连接，瞧，我们开始了，我们现在有了本地连接。

在像 tower 这样的图形用户界面中，我可以看到，是的，有一个跟踪连接，对，这个本地分支跟踪远程分支。

另一种方法是，让我们创建另一个分支功能，即 downloader，这样我们就有了另一个本地分支，这是远程上没有的。

我们会很快出版。

然后从我的本地分支中删除它。

好的，所以，我们再次遇到了这种情况，我想在我的本地分支上安装特性下载程序分支。

目前，它只存在于遥控器上。

因此，另一种方法是使用 git checkout 命令，而不是 git branch dash dash track。

同样，对于跟踪选项，也是一样的。

我是基于原始特征，下载器。

通过不命名本地分支，只指定基本的远程分支，get 使用该分支名称作为本地分支名称，所以我现在又有了功能下载器，和以前一样，所以不管你是使用 git 分支 dash dash track 还是 git checkout distressed track，这都是另一种方式。

好的，跟踪分支，非常重要，无论是使用 git 分支，distressed track，还是使用 git checkout，dash dash track，推拉分支。

因此，一旦你有你的跟踪连接设置正确，拉和推真的很简单，实际上几乎很无聊。

这就是为什么我强烈建议使用我之前展示的命令。

当使用 git push dash 发布本地分支时，您是在使用 git checkout dash track 命令从另一端跟踪远程分支，因为同样地，一旦建立了跟踪连接，您需要做的就是使用 Git pull 和 git push 来同步您的分支，正确地获取 pull 以从远程下载新的提交(可能来自您的同事),并获取 push 以将您自己的新工作上传或发布到远程服务器。

你不需要用醒目的连接设置，你不需要任何额外的参数，你不需要指定远程像原点和基分支或者目标分支和源分支。

只要被拉，被推就够了。

这就是使用这些跟踪连接的真正优势。

让我们再看看这里有什么。

看看会发生什么。

好的，现在我们在功能登录分支。

建立这些跟踪连接的另一个好处是 Git 会告诉我本地分支和 tract 远程分支是否有分歧。

这意味着让我们再看一看塔，看看它是什么样子。

所以这个功能登录分支在这里没有多少数字。

这意味着一个提交还没有被推送。

所以该分支的远程版本没有我在本地生成的提交。

反之亦然。

两个提交出现在远程端，可能是同事或队友进行了一些提交。

我还没有把它们拆掉。

我没有下载那些。

因此，如果有我忘记推送或尚未推送的内容，继续跟踪并理解本地和远程分支是如何分化的，这真的很有趣。

或者如果我需要更新什么东西。

并且通过带有 git 分支的命令行，dash v 命令，我可以获得相同的信息。

我看到功能日志记录在前面一个在后面两个在前面意味着我有尚未推送的本地提交，在后面意味着我在远程的后面。

所以远程上有我没有提取的新提交。

非常有趣的信息来了解你在哪里，你如何行动，你的数据有多新，你可以说删除分支是多么正确，大多数分支并不意味着永远存在。

我鼓励你时不时地做点家务。

下面是删除本地分支的方法。

这很简单。

所以让我们转到第七点。

看看我们有什么。

好了，功能上传器和 main 都在。

你要知道的第一件事是你不能删除当前的头分支。

所以如果我输入 git branch，dash D 和 feature uploader，我会得到一个错误消息，因为我说过，我可以删除当前活动的分支，也就是当前 head。

因此，首先，我必须离开 get switch main，使 main 或另一个分支处于活动状态。

然后我可以使用 git 分支破折号 D 和特性上传器来加载和删除分支特性上传器。

所以现在没有了，对，我删除了。

在某些情况下，你会再次得到一个错误信息。

因为让我们说你已经在一个本地特性分支上工作了一段时间，产生了一些提交，然后理解，好的，这，这没有导致任何我需要删除的地方，你已经产生了新的提交，在其他地方没有。

如果你试图删除那个分支，git 会说，好吧，小心点，你将要删除的数据是不存在的，这些提交还没有集成到其他分支中。

那么你真的确定吗，这时候你需要使用破折号 f 选项强制删除。

不用说，我猜这是一个相当具有破坏性的动作，用破折号 F 来表示武力。

所以要小心，你很难收回那些承诺。

你可以不要担心，但它有它的理由，为什么好警告你，这些提交是存在的，你确定你要删除那个分支。

您可能想做的另一件事是删除一个远程分支。

正如您已经知道的，在本地端使用分支不同于在远程端使用分支。

所以是不同的命令 git 分支。

先看看我们有什么。

因此，假设我们想删除遥控器上原始功能下载器分支。

我们可以使用 Git 做到这一点。

再次清除一点 git push，我想从原点移除一些东西。

此处删除标志用于功能下载程序。

让我们看看，好吧，嘭，它不见了。

因此，可能另一件需要记住的重要事情是，当删除一个分支与本地分支的远程分支无关时，请记住检查您是否应该删除其对应分支来写入跟踪分支。

例如，如果您删除了远程要素分支，那么删除其本地追踪分支也是有意义的。

当然，这样可以确保不会留下大量过时的分支和混乱的 Git 库。

所以当我删除一个分支时，请记住，在另一端是否有对应的分支，本地或远程的？我也应该删掉吗？也许吧。

好的，用 git push 在遥控器上删除，破折号，破折号，删除。

合并分支是一个非常有趣的话题。

合并可能是集成变更最常见的方式。

所以本质上，你是从另一个分支引入新的提交到你当前的头分支。

总是这个方向，对吧？你，你正在从另一个分支机构整合到你目前的当地总部分支机构。

与其他版本控制系统不同，在大多数情况下，合并在 Git 中非常容易，非常简单。

所以这是它如此受欢迎的一个原因。

本质上，它只需要两步。

因此，首先，您需要激活您希望更改进入的分支，该分支应该接收更改，然后执行 merge 命令，并使用需要更改的分支的名称，让我们看看我们在示例场景中有什么。

好的，现在缅因州有了一个新的提交，就是这里的这个，错误页面的标题被纠正了。

上传者也有一个不同的提交澄清 CSS 后台规则。

所以他们分道扬镳了。

比方说，我想在这里集成这个提交或这些更改，新的提交功能上传到 main，对，我想把新的更改带到 main 分支，然后我可以切换到 main，使 main 处于活动状态，然后只需键入 Git merge feature，它是什么上传程序？瞧，我得到了一个编辑器，它有一个为什么，因为大多数合并并不总是产生一个合并提交，对吗？把它想象成一个结合或连接两个分支的结。

这是一个新的承诺。

所以我可以提供一个新的提交消息。

我将使用 Git 在这里提供的标准合并分支特性上传程序。

关上它。

让我们看看发生了什么。

在主墙上，我把这两个分支结合起来，我有这两个分支的所有变化。

这就是最终的结果。

正如我所说的，这里有一个合并提交，它合并了来自两个分支的更改。

还有另一种集成变更的方式，那就是重新设置基础，所以这只是将提交从一个分支集成到另一个分支的替代方式。

非常重要的是要强调，这不是更好或更坏，这不是专业版和合并初学者版本，它只是不同。

如果你使用 rebase，主要取决于你的个人偏好以及你的团队和情况的惯例。

所以有些团队喜欢 rebase，有些喜欢 merge，有些在某些情况下喜欢，而在其他情况下不喜欢。

所以这不是好与坏的问题，重要的是理解。

所以我们来比较一下 merge 和 rebase。

所以你明白有什么不同。

这是开始的情况，我们有两个分支，我们有分支 a 和分支 B，两个分支都有不同的变化。

这里有两个提交，这里有一个提交。

他们在这里分支了。

现在有了 merge，你已经看到了，我们最终会收到这个 merge 提交，这个 melting point 或者这个 not，它使用 rebase 合并这两个提交。

另一方面，最终结果看起来会很不一样。

尤其是因为没有单独的合并提交，所以会产生如此大的差异。

使用 rebase。

发展历史似乎是一条直线。

不再有这种分支，它发生了，或者看起来像是一条直线。

这有它的优点和缺点。

但这就是结果，也是最大的不同。

然后开始实际的过程是非常简单的。

但是让我们在实践中这样做。

这是第九起案件。

让我们看看我们有什么。

好的，和之前的情况很相似，在特性上传程序中，我有两个提交，这是其他地方没有的。

总的来说，我拥有的这一年是别处所没有的。

比方说，我想将缅因州的变化整合到我的功能上传分支中，对吧。

因此，第一步将是切换到功能上传器，使其成为头分支，因为与合并一样，我总是集成到我的头分支中。

对，头支是被操纵的那个。

我已经在上传功能。

所以这里无事可做。

但是第二步是 Git rebase。

我想在 Main 上重新开始。

已经是这样了。

让我们看看发生了什么。

现在，你可以看到这个标题的错误页面纠正提交，过去在主现在也出现在上传者这里。

如你所见，没有分支，没有融合，没有合并提交。

这看起来像一条直线。

这就是 merge 和 rebase 的最大区别。

同样，如果你使用的是像 tower 这样的图形用户界面，你可以直接拖放进行合并，或者如果你一直按住 Alt 键，它就会变成 rebase。

所以这些操作在图形用户界面中非常简单。

好的，这又是一个基础，最后一个案例或者最后一个动作，比较分支，有时候比较两个分支是很有帮助的。

例如，在您决定整合或删除一个分支之前，您希望了解它与另一个分支有什么不同。

它包含任何新的提交吗？还是没有？我还需要那些吗？有什么区别？所以让我们在实践中这样做。

看看我们有什么。

所以类似的情况应该就在功能上传者和 main 他们发生分歧之前，他们有不同的提交。

让我们比较一下，看看它们之间到底有什么不同。

所以我可以键入 git log main double dot feature uploader。

这向我显示了哪些提交在我们的特性上传分支中，但不在我们的主分支中。

因此我可以看到，这两个提交在这里，但不在这里。

当然，这也意味着，如果我将这两个提交集成到 main 中，就可以实现集成。

所以我能理解这两者的区别。

如果我想知道本地分支和远程分支有什么不同，我也可以做同样的事情。

所以让我们来比较一下我所在的缅因州和原产地缅因州。

过程非常相似。

git log, Maine.

让我们从缅因州的起源说起，缅因州。

我可以看到，好的，我的本地 main 中当前有一个 commit，它不在我的远程分支 origin main 中。

所以我知道。

好的，如果我现在推送，我会把这个提交上传到这里，因为它不在这里。

好吧。

我想今天就到这里吧。

为了帮助你记住你所学的内容，我准备了一个关于这个主题的小备忘单，关于你在处理分支时可以使用的所有不同的命令。

只需跳上 Bitly，获取 branch 的小抄并免费下载即可。

这在你的日常工作中会派上用场的，我敢肯定。

你可以免费下载小抄。

我希望在本次研讨会和备忘单中能为您提供一些新信息。

享受创建、删除、重命名、跟踪、推、拉、比较分支和使用 Git 的乐趣。

感谢您的关注。

保重