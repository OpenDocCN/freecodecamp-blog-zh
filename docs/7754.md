# 如何编写可读性高的 React 代码——10 个编码风格技巧

> 原文：<https://www.freecodecamp.org/news/10-points-to-remember-thatll-help-you-master-coding-in-reactjs-library-d0520d8c73d8/>

作者 Nirmalya Ghosh

# 如何编写可读性高的 React 代码——10 个编码风格技巧

![1*NlqpTTAM8DbGl4paBmjE_g](img/998ebfe5822b3cf617f6892bcfa497d9.png)

10 points to remember that’ll help you master coding in ReactJS library

当进行代码评审时，开发人员很少有足够的时间来真正理解我们正在评审的每一行代码。相反，我们必须快速思考代码可能失败的不同情况。

所以每次审查代码的时候，我都会寻找某些点来帮助我快速理解代码。

本文将帮助您了解如何编写更好的代码，以便其他开发人员能够更好地理解它。本文将向您快速介绍我在设计组件时使用的某些技术，并向您展示如何做同样的事情。

请注意，我们在这里主要坚持使用 ReactJS，但是其中一些要点可能也适用于使用其他 JavaScript 库。

### 技巧 1:总是使用道具类型来定义组件中的所有道具

[prop-types](https://github.com/facebook/prop-types) 是 React props 和类似对象的运行时类型检查。

prop-types 将帮助您检查所需类型的 prop 是否被传递到您的组件中。

如果一个特定道具的正确类型没有被传递到你的组件中，那么这个包会在你的浏览器的控制台中抛出一个警告。

在上面的笔中，你可以检查控制台，它会抛出如下警告:

```
"Warning: Failed prop type: Invalid prop `message` of type `string` supplied to `Hello`, expected `array`.    in Hello"
```

从上面的警告消息可以清楚地看出，我们正在向 Hello 组件传递一个字符串，但是组件希望 prop 消息的类型是 array。

### 技巧 2:使用 displayName 为组件定义一个特定的名称

[显示名称](https://reactjs.org/docs/react-component.html#displayname)字符串用于调试消息。

如果在组件中不使用 displayName，那么从现在开始应该使用它。

通常，如果您使用 [React 开发工具](https://github.com/facebook/react-devtools)调试您的组件，您将会看到组件，因为它是从定义组件的函数或类的名称中推断出来的。

但是，如果你有两个相同名称的组件(按钮、下拉列表等)。)，那么您可能需要重命名您的组件。否则，你将无法区分它们。

您可以使用 displayName 解决上述问题。

您只需使用 displayName 重命名其中一个组件。

在上面的例子中，您可以看到，尽管类的名称是 Component，但您将在 React developer 工具中看到名称“Hello ”,因为它的显示名称是 Hello。

这对于调试非常有用，但经常被忽略。

### 技巧#3:使用 linter 使你的代码更容易审查

如果你关心你的理智，那么你应该在你的代码库中使用 linter。

Linters 将帮助您使您的代码与您公司的其他开发人员相似。通过遵循一套严格的规则，你可以确保整个代码库是一致的。

例如，您可以强制其他开发人员在行尾使用分号。如果没有，那么 linter 会根据您的设置抛出一个错误或警告。

我最喜欢的是 ESLint，但是你可以选择任何适合你需要的。

### 技巧 4:在创建一个拉请求之前检查你自己的代码

无论您是在修复一个 bug 还是开发一个新特性，当您很匆忙的时候，您可能会很快地推送您的更改并创建一个拉取请求。

问题是你甚至没有机会回顾你自己的改变。因此，您可能会错过一些可以重构并做得更好的地方。

从我的经验来看，在回顾我自己的改变后，有时，我可以使它更有性能，将较大的功能分成多个较小的功能，并使代码更加模块化。

以前，我从来没有检查过自己的代码。但是实践这个习惯，我觉得它改善了我的编码，并且可能对你也有帮助。

### 提示 5:你的初稿并不总是最好的

你们很多人已经知道了这一点。第一次迭代并不总是最好的。

您应该查看您的第一次编码迭代，并思考您可能已经错过的功能。

解决这个问题的一个方法是进行测试驱动开发(TDD ),这是一个很好的实践，但是很少被遵循。如果你遵循 TDD 方法，你的第一次迭代可能是最好的。但是你应该寻找更好的方法。

即使在写一行代码之前，也要花时间考虑你想如何继续，当你完成了一个特性的实现或一个 bug 的修复后，看看你所做的改变，想想你如何能做得更好。

### 技巧 6:将你的代码分成多个更小的函数

将较大的功能拆分成多个较小的功能会使较小的功能更容易重用。它们也将变得更容易测试。

您还可以创建许多实用程序文件，帮助您从多个文件中删除重复的代码。

创建多个文件后，查看它们，您会发现有许多重复的代码行。你可以把这几行都创建成一个实用文件。然后，您可以在多个文件中重用同一个实用程序文件。

### 技巧 7:创建多个文件，而不是写一个大文件

审查一个大文件总是比审查多个小文件更难。

如果您将代码分割成多个较小的文件，并且每个文件只包含一个逻辑，那么审阅者审阅该文件就变得非常容易。

### 提示 8:给文件命名时要非常小心

这里您应该记住的另一件事是，如果您根据文件执行的工作来命名您的文件，这也将在将来帮助您以及其他开发人员理解文件实际上是做什么的。

看了文件名之后，其他开发人员应该明白这个文件应该做什么。

例如，dropdown.js 是一个好名字，但它非常普通，如果在同一个目录的多个地方使用它，您可能会将其命名为 topDropdown.js、bottomDropdown.js，这是不好的。

更好的方法是在它们前面加上它们应该完成的工作。例如，userDropdown.js、fileDropdown.js 等。

### 技巧 9:总是为你的代码编写测试

我怎么强调这一点的重要性都不为过。测试完成您的代码。

开发一个特性后，你可能会觉得它有效，而且确实有效。但是可能会有(而且很有可能会有)它可能不起作用的边缘情况。测试将帮助您识别这些病例。

很明显，编写测试用例会增加你编写代码所需的时间。但是，它将始终帮助您消除将来可能突然出现的潜在错误。

如果您关心您的应用程序，您应该花时间编写测试。

### 提示#10:不要过度使用错误处理生命周期挂钩

React 16 引入了一种更好的方式来处理错误，它使用了一个叫做错误边界的特性。

本质上，错误边界是 React 组件，它捕捉子组件树中任何地方的 JavaScript 错误，记录这些错误，并显示一个回退 UI，而不是崩溃的组件树。

如果回退 UI 的逻辑存在于您的 ErrorBoundary 组件中，那么您可以将组件封装在该 ErrorBoundary 组件中。

```
<ErrorBoundary>  <YourComponent /></ErrorBoundary>
```

这是一种很好的方式，可以显示错误的后备 UI。但是您不需要用一个 ErrorBoundary 组件包装所有的组件。

你可以把你的 ErrorBoundary 组件[只放在你需要它们的几个战略位置](https://reactjs.org/blog/2017/07/26/error-handling-in-react-16.html#where-to-place-error-boundaries)。

### 结论

我希望这几点能帮助你写出更好的 ReactJS 代码和更好的 JavaScript 代码。如果您使用了一些我在这里遗漏的方法，请告诉我。