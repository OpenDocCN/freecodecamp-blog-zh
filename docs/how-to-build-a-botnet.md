# 僵尸网络的定义是什么？如何防御攻击

> 原文：<https://www.freecodecamp.org/news/how-to-build-a-botnet/>

僵尸网络是一组连接互联网的设备(从个人电脑到物联网设备)的集合，这些设备受到相同恶意软件的感染。

黑客使用僵尸网络感染的恶意软件来控制它并发起僵尸网络攻击。当使用数百、数千、甚至数十万台链接设备发起攻击时，攻击会更加有效。

## 建立僵尸网络有什么意义？

僵尸网络可用于多种攻击:

*   制造虚假广告点击来增加网站收入或提高网站在搜索排名中的突出地位
*   为客户端生成垃圾邮件
*   发起 DDoS 攻击(分布式拒绝服务)
*   验证泄露的凭据列表(凭据填充攻击)，以便接管各种帐户。

### 为什么您应该了解僵尸网络是如何工作的

作为安全专业人员，了解僵尸网络极其重要。首先，你的任务可能是防御僵尸网络的攻击。你可能不得不处理你的网络内的系统被感染并被用作僵尸网络的一部分。

为了有效防御僵尸网络，网络防御人员需要了解僵尸牧人使用的策略、技术和程序(TTP ),以便识别他们的攻击和网络内部的妥协迹象。

没有一个安全团队希望发现他们的大量路由器或网络设备已经遭到破坏，并被用于攻击其他组织。

与任何妥协一样，这可能会导致监管机构的潜在问题、声誉受损以及因清理损害而造成的财务损失。

## 一个准骚扰者如何开始？

构建僵尸网络不仅仅是一个技术企业，而是一项业务。

建立一个成功的僵尸网络需要考虑目标是什么，是否是创建一个可持续的商业计划，目标受众(谁的设备将被感染，什么样的诱惑会吸引他们？)，以及确保分发和内部流程安全的流程。

然后，一个潜在的僵尸网络牧人需要从一个采用匿名支付形式的 VPN 服务开始(可能是几个服务之间轮换)。这些服务需要不太可能将客户记录和日志快速移交给任何执法机构(一种“防弹”服务)。

下一步是获得“防弹”主机服务(要么是某种程度上合法的业务，在处理法律投诉方面效率低下，要么是专门针对恶意软件运营商的业务)。

然后，牧民需要注册服务商提供的域名，注册服务商不太可能将客户信息交给执法部门，并且接受匿名支付方式。

可选地，一个牧人可以用一种技术如快速流动来进一步掩饰他们的活动。快速通量可以是单通量或双通量。

单一流量包括将多个 IP 连接到一个域，随着 DNS 记录的变化快速交换 IP 地址(使用非常短的生存时间(TTL)值和循环 DNS)。

Double flux 还通过旋转名称服务器(NS)记录来添加第二层。本质上，fast flux 使 bot herder 能够快速轮换端点和名称服务器，减少任何故障点，并避免安全团队的破坏尝试。

了解 flux 的工作速度可以帮助防御者识别它何时发生并采取保护措施。

例如，安全团队可以联系域注册商，要求他们关闭该域或阻止对其网络中恶意域的访问。

通常，安全团队会试图阻止对其网络中恶意域名的访问，因为说服注册服务商关闭域名通常是一个耗时的过程(而且通常不会成功，因为不道德的注册服务商不可能在没有执法压力的情况下关闭域名)。

然后，牧民需要实际的僵尸网络构建框架(如何控制他们创建的机器人)。它要么是他们自己创建的(非常困难和费时)，要么是他们在一个黑暗的网络论坛上购买的(通常带有客户支持)，要么是网上提供的免费版本(可能更老、更不可靠)。

他们可能还需要一个或两个“注入器”(本质上是告诉机器人做什么的附加模块，如执行点击欺诈、DDoS 等)。

最后，他们需要利用工具或服务来感染设备而不触发安全警报。同样，他们可以自己制作(非常困难和费时)，在黑暗的网络论坛上购买(或租赁)(通常有客户支持)，或使用在线免费版本(可能更老、更不可靠)。

这些通常是可以安装在网络服务器上的软件包，攻击者可以将受害者引向这些软件包(通过网络钓鱼)。

此外，为了逃避检测，牧民可以使用“dropper”恶意软件。该恶意软件将加密该恶意软件，以隐藏其文件签名和任何识别文件。

Crypter 服务(创造“滴管”)可以在网上免费获得，也可以在许多市场上为有抱负的牧民购买。一些将包括“反沙箱”代码，旨在检测恶意软件是否在沙箱机器或虚拟机上打开，以逃避安全团队的分析。

每一个阶段都是防御者识别网络中攻击者的机会。

大多数组织的防御都有多个层次:

*   防病毒和端点检测，根据“签名”和异常行为识别恶意软件，
*   代理阻止流向已知恶意域的流量，
*   安全信息和事件管理(SIEM)工具中的日志，用于识别异常的系统和网络行为等。

这些层旨在捕捉攻击者使用的恶意软件的不同阶段和类型。

## 现在，是传染的时候了

通常情况下，牧民会发送针对大量人群的网络钓鱼或垃圾邮件活动，希望其中一小部分人会点击链接并下载“漏洞工具包”。该工具包会将恶意软件“投放”到设备上，从而允许僵尸网络牧人控制设备。

或者，herder 可以扫描大量 IP 地址块，寻找具有默认用户名和密码的物联网设备(Mirai 未来组合僵尸网络遵循了这一路径)。许多人在设置物联网设备时从来不会费心更改他们的默认凭据。

过于成功的危险在于，如果太多的设备被感染，僵尸网络就有引起各种反病毒(AV)或安全公司注意的风险。

在这一点上，它成为了反病毒公司和僵尸网络牧人之间的一场持续的战斗，双方都试图更新他们的软件以躲避对方。

## 机器人如何与牧人交流？

一旦机器人被感染，它们需要一种方法从它们的牧人那里接收命令。我们可以将这些方法大致分为两类——要么是推模式，要么是拉模式，这两种模式都需要一个命令和控制(C&C 或 C2)服务器来与机器人对话。

服务器可以向所有机器人发送或“推送”命令(例如 IRC 服务器，具有受密码保护的秘密通道)，或者机器人可以向 C&C 服务器(例如 HTTPD 服务器)发送更新请求(拉取)。

近年来，用于代理命令或定位服务器的对等(P2P)网络也有所增加。P2P 的优势在于没有单点故障(任何集中式 C2 服务器都有这种情况)。

一般来说，任何通信方法的最佳选择都是使用标准协议，因为如果正常流量和僵尸网络流量都使用相同的协议，安全工具就很难检测到它们之间的差异(尤其是 HTTP，因为大多数组织都有大量合法的 HTTP 流量)。

近年来，越来越多的机器人牧民利用社交媒体网络托管他们的 C&C 平台，并分发恶意软件，利用大多数人对其社交媒体网络的高度信任。

防御者可以阻止这种类型的通信的一种方法是阻止访问社交媒体网站，并密切监控正常的系统流量。

防御者(和他们的工具)对正常系统流量越熟悉，他们就能越好地识别流量或行为中的异常峰值。

## 如何检测僵尸网络

### 蜜罐

蜜罐是看起来像易受攻击的机器的系统，但是它们缺乏对敏感信息的访问。通常，它们由安全团队/研究人员部署，以便在僵尸牧人试图感染蜜罐时识别和跟踪僵尸网络。

由于蜜罐没有用于任何合法目的，任何试图连接到它们的流量都可能是恶意的。这意味着安全团队可以轻松地将恶意流量与正常流量区分开来，观察行为并采取措施。

### 签名

恶意软件签名是用于识别已知恶意代码的特定模式(如启动恶意软件的几行代码或特定字节序列)。

这仍然被用作一种基本的身份识别形式，但机器人牧人越来越多地使用混淆技术和快速进化的恶意软件(因此，即使已知的恶意软件对扫描器来说也是新的和独特的)以逃避这些检测。

### IDS(入侵检测系统)和 IPS(入侵防御系统)

这些工具旨在识别可疑的网络(或主机)行为，并(在 IPS 的情况下)阻止它或(在 IDS 的情况下)警告安全团队。

### 被动/主动 DNS 监控

DNS 监控可以根据域的词汇特征及其网络特征(如 TTL 和 IP 子网数量)来帮助检测与僵尸网络活动相关的域。

由于机器人必须(定期)启动与 C&C 服务器的连接，这为跟踪和检测提供了机会。

通常，用于僵尸网络的域会很快被回收，不一定是为人类设计的——它们甚至可能是由计算机生成的伪随机字母和数字(而合法的域可能是稳定的，人类可读的)。这些识别特征有助于识别僵尸网络域。

运行良好的僵尸网络很难被永久摧毁。为了打击他们，执法部门和私人组织通常需要合作，通常是跨国合作。

安全团队更有可能承担处理僵尸网络后果的任务，而不是摧毁它们。

他们可能需要防御来自僵尸网络的 DDoS 攻击，或者他们自己的系统被用作僵尸网络的一部分，因此可能需要检测僵尸网络的存在并遏制任何受感染的机器，但不太可能能够关闭僵尸网络(“黑客攻击”在大多数司法管辖区是非法的)。

### 来源/更多信息:

*   [构建僵尸网络的初学者指南](https://arstechnica.com/information-technology/2013/04/a-beginners-guide-to-building-botnets-with-little-assembly-required/3/)
*   [僵尸程序、僵尸网络、DDoS 攻击和 DDoS 攻击缓解](https://engineering.purdue.edu/kak/compsec/NewLectures/Lecture29.pdf)
*   [检测和分类不同的僵尸网络 C & C 通道](http://www.cse.lehigh.edu/~chuah/publications/atc11_botnet.pdf)
*   [基于 DNS 流量分析的 HTTP 僵尸网络检测模型](https://www.uvic.ca/engineering/ece/isot/assets/docs/Holistic%20Model%20for%20HTTP%20Botnet%20Detection%20Based%20on%20DNS.pdf)