# SQL Delete Row 语句——如何使用示例查询从表中删除数据

> 原文：<https://www.freecodecamp.org/news/sql-delete-row-statement-examples/>

我毫不怀疑我是多么喜欢在我的专业和个人项目中使用 SQL。

它的直截了当和简单性吸引了我的愿望，即在语法方面，该语言将会和不会让我“逃脱”。

SQL 的结构具有清晰简洁的操作方式，用户的输入决定了返回的数据。因此，我认为语法应该有明确的界限。

虽然我在开发社区中称赞它的弹性(SQL 创建于 1974 年，最初版本是 1986 年)，但我也知道当处理数据时，甚至连基本原理都让人感到紧张和恐惧。

我在这里(希望)阐明处理数据的一个基本原则:删除一整行数据。

虽然我们不打算回顾用 SQL 或[建立一个表的过程，用数据填充那个表/更新那个数据](https://www.freecodecamp.org/news/sql-update-statement-example-queries-for-updating-table-values/)，我已经链接了那些其他的文章，以防你想了解更多或者只是需要复习。

好了，现在有趣的部分——让我们开始从表中删除数据！

## SQL 删除行概述

这是一个名为 *Cute_Doggos* 的表，我们将使用它作为开始从以下位置删除数据的示例:

|  |
| 名字 | 颜色 | 类型 | 年龄 | 重量 | 高度 | 最喜欢的食物 | Fav_Toy | 厌恶 | 厌恶 |
| 雏菊 | 红色 | 标准腊肠 | 1 年 | Fourteen | six | 鲑鱼味粗粮 | 挤压球 | 飞过院子的鸟 | 猫，洗澡，清洁 |
| 温斯顿 | 黑色/棕褐色 | 罗特韦尔犬 | 3 年 | Forty-one | Seventeen | 几乎任何东西 | 绳索拖船 | 远离沙发 | 倾听，表现，而不是在任何事情上流口水 |
| 三明治 | 淡蜂蜜 | 金毛猎犬 | 9 岁 | Forty-six | Nineteen | 牛肉味粗粮 | 她的床 | 粗暴的小狗 | 未知 |
| 佩内洛普 | 灰色和白色 | 强壮的 | 9 个月 | Sixteen | Twelve | 旧鞋 | 在外面 | 养狗场 | 未知 |

您可能已经猜到了，这是我凭空捏造的一个表格中的虚构数据:)然而，我希望它足够好地说明了我们的目的所需的数据。

与技术性质的大多数方面一样，检查官方文档也无妨。如果你想这么做，微软有一些关于 SQL Delete 语句的非常深入的[信息。](https://docs.microsoft.com/en-us/sql/t-sql/statements/delete-transact-sql?view=sql-server-ver15)

本文的核心——删除数据。操作就像名称本身一样简单，下面是基本语法:

`DELETE FROM *name_of_table*`

### * * *使用此语法，您将删除整个表中的所有数据行。***

因此，对于上面的示例表，查询如下所示:

`DELETE FROM Cute_Doggos`

这可能是您的预期目的，您编写 SQL 的时间越长，您会发现在这种情况下使用 delete 语句的情况越多。

我曾多次使用这个语句在一个表被测试数据填满后清空它。这种方法允许我们保持列名、数据类型、索引和整个表结构的完整性，而无需删除实际的表。

*顺便提一下，如果你的目的是删除一个表中的所有行，更快的方法是使用 [TRUNCATE TABLE](https://docs.microsoft.com/en-us/sql/t-sql/statements/truncate-table-transact-sql?view=sql-server-ver15) 语句，因为它使用的系统资源要少得多。*

## 示例删除查询

在大多数情况下，当您使用删除功能时，您会希望您的方法更有针对性。为此，我们将添加一个条件，语法如下所示:

`DELETE FROM *name_of_table* WHERE *conditions_exist*`

使用上表中的狗，我们的查询如下所示:

`DELETE FROM Cute_Doggos WHERE dbo.Cute_Doggos.Height > 18`

这将从我们的表中删除所有符合条件的条目，条件是*高度大于 18* 。如果你使用的是微软的 SQL Server 管理器，你会得到如下的返回语句:

`(1 row affected)`

如果您想查看被删除的数据行(出于日志记录的目的，对用户的可视化指示，等等)，我们可以使用 OUTPUT 语句来实现。

我们的表现在看起来像这样:

|  |
| 名字 | 颜色 | 类型 | 年龄 | 重量 | 高度 | 最喜欢的食物 | Fav_Toy | 厌恶 | 厌恶 |
| 雏菊 | 红色 | 标准腊肠 | 1 年 | Fourteen | six | 鲑鱼味粗粮 | 挤压球 | 飞过院子的鸟 | 猫，洗澡，清洁 |
| 温斯顿 | 黑色/棕褐色 | 罗特韦尔犬 | 3 年 | Forty-one | Seventeen | 几乎任何东西 | 绳索拖船 | 远离沙发 | 倾听，表现，而不是在任何事情上流口水 |
| 佩内洛普 | 灰色和白色 | 强壮的 | 9 个月 | Sixteen | Twelve | 旧鞋 | 在外面 | 养狗场 | 未知 |

我们设定的条件完全是我们的选择，如果这对你的需求来说太狭隘，还有其他选择。

假设您不关心您删除的具体记录，只关心您需要删除表中一定数量的记录。

`DELETE TOP 2 FROM Cute_Doggos`

您可能认为这个查询会删除表中的前两条记录——这一点差得不远。唯一的问题是因为 SQL 以随机的顺序存储记录，这个语法将从表中删除 2 个随机的记录。

如果您希望删除一定比例的记录，SQL 也可以做到:

`DELETE TOP 25 PERCENT FROM Cute_Doggos`

同样，该查询将随机删除记录。在我们的例子中，由于我们有 4 条记录，这个查询将删除 1 条随机记录(4 * 0.25 = 1)。

最后一点，当使用 TOP 关键字时，由于记录存储的随机性，我们不能使用 ORDER BY 子句的[。](https://docs.microsoft.com/en-us/sql/t-sql/queries/select-order-by-clause-transact-sql?view=sql-server-ver15)

## 包扎

现在您已经看到了 DELETE 语句的运行，您已经准备好去野外从所有的表中挑选所有的数据了！也许不要这样做，因为这将花费一个长周末的时间来恢复备份:)

无论如何，现在你可以开始好好利用它了。

如果你觉得这篇文章很有帮助，看看我的[博客](https://jonathansexton.me/blog)(我目前正在 Gatsby/WordPress 中重建它，所以请关注关于它的文章)，我经常在那里发布关于 web 开发、生活和学习的文章。

既然你在那里，为什么不订阅我的时事通讯呢？你可以在博客主页的右上方这样做。我喜欢不时地为开发人员发送有趣的文章(我的和其他人的)、资源和工具。

如果你对这篇文章有任何疑问，或者只是一般地让我知道——来在 [Twitter](https://twitter.com/jj_goose) 或者我的任何其他社交媒体账户上打招呼，你可以在时事通讯下面找到，在我的博客主页上注册，或者在我在 freeCodeCamp 的个人资料上注册:)

祝你愉快！朋友，学习愉快，编码愉快。