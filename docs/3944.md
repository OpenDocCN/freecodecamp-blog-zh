# 如何用 C++编写干净的代码

> 原文：<https://www.freecodecamp.org/news/how-to-write-clean-code-in-c/>

# **清洁代码指南**

编码时，您遵循的编码风格可能非常重要。尤其是当你和一个团队一起工作或者你计划共享你的代码的时候。

这些指南中的大多数都是标准的，可以应用于大多数编程语言。但是，这里有 C++代码的应用程序和代码片段，所以你可以更容易地熟悉它。

请记住，这些只是实现清晰性的建议，这可能是个人偏好。所以，把这些建议考虑进去，但不要完全照办。有时候，打破这些规则可以得到更干净的代码。

## **使用好的变量名并做注释**

确保您创建了良好的变量名。例如，如果你正在创建一个游戏，避免使用变量“a ”,而是使用类似“p1”的东西来指代玩家 1。

匈牙利符号是常用的，可以给你一些声明变量的指导。

另外，请使用注释。不是开玩笑，只是试着读一些你做的没有注释的旧项目…现在想象一下，你是另一个甚至没有编写代码的人。

## **全局变量**

全局变量可以很容易使用，当你只使用一点点代码时，它可能看起来是一个很好的解决方案。但是当代码变得越来越大时，就很难知道它们何时被使用。

你可以使用函数中声明的变量来代替全局变量。这可以帮助您判断正在传递什么值，以便您可以更快地识别错误。

```
#include <iostream>
using namespace std;

// Global variables are declared outside functions
int cucumber; // global variable "cucumber"
```

## **使用转到、继续等。**

这是程序员们经常讨论的问题。就像全局变量一样，这种类型的语句通常被认为是不好的做法。它们被认为是坏的，因为它们导致[“spaguetti 码”](https://en.wikipedia.org/wiki/Spaghetti_code)。

当我们编程时，我们想要一个线性流程。但是当使用这些语句时，流被修改并导致“扭曲和混乱”的流。

过去使用 Goto。但是，当 while，for，if 函数出现时，随着结构化程序设计的引入，就产生了。一般来说，避免使用 goto，除非你确信它会使你的代码更整洁、更易读。例如在嵌套循环中使用它。

break 和 continue 的用法实际上是相同的。在开关中使用它们，尽量使功能有一个目的，这样你只有一个出口点。

![img](img/237ac88a689bfabed3e1edf4f3d32b30.png)

## **避免在 for 循环中改变控制变量**

通常有一些方法可以解决这个问题，看起来更清晰，不那么混乱，例如 while 循环。执行以下操作:

```
int i=1;
while (i <= 5)
{
    if (i == 2)
        i = 4;

    ++i;
}
```

而不是:

```
for (int i = 1; i <= 5; i++)
{
    if (i == 2)
    {
       i = 4;
    }
    // Do work
}
```

## **在顶部声明常量和类型**

它们通常以库命名。这将它们组合在一起，使它们更容易阅读。对于局部变量也是一样:在顶部声明它们(其他人喜欢尽可能晚地声明它们以节省内存，见:[cplusplus.com](http://www.cplusplus.com/forum/general/33612/))。

## **最后只使用一个返回函数**

就像我之前说的，我倾向于只做一个入口和出口，让流程更清晰。

## **即使在写一行程序时也要用花括号**

系统地做这件事会帮助你做得更快。如果你想在将来更改代码，你将可以无忧无虑地做到这一点。

而不是:

```
for (int i = 1; i <= 5; i++)
    //CODE
```

执行以下操作:

```
for (int i = 1; i <= 5; i++)
{
    //CODE
}
```

## **其他建议**

当你知道迭代次数时使用`for`，但当你不知道时使用`while`和`do while`。

使用 const，适当时通过值/引用传递。这将有助于节省内存。

用大写字母写 const，用小写字母写以 T 开头的数据类型和变量。

```
const int MAX= 100;             //Constant
typedef int TVector[MAX];       //Data type
TVector vector;                 //Vector
```