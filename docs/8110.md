# 如何在 Angular 中验证默认和自定义反应表单

> 原文：<https://www.freecodecamp.org/news/validating-reactive-forms-with-default-and-custom-form-field-validators-in-angular-5586dc51c4ae/>

去找格鲁斯卡

# 如何在 Angular 中验证默认和自定义反应表单

当向用户展示表单时，给他们提供关于他们输入的内容是否正确的即时反馈被认为是非常用户友好的。除此之外，它还可以限制对服务器的请求数量。在将表单提交给服务器之前，您可以捕捉到 99%的错误。

![qLQsIH1hq10Ki5q5JGFTidYla1fKkVsR67EZ](img/781748b787cbcfb8602db0efd756d288.png)

Photo by [Simon Matzinger](https://unsplash.com/photos/twukN12EN7c?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

当使用反应形式时，Angular 只提供了一手非常通用的验证器。默认的表单域验证器有:

*   **min:** 该值应该高于某个数字。
*   **max:** 该值应该低于某个数字。
*   **必填:**值不能为空
*   **必需值:**该值必须为真
*   **电子邮件:**该值应该是电子邮件
*   **minLength:** 该值应该包含最少数量的字符
*   **maxLength:** 该值应该包含最大数量的字符

上述验证器可能无法满足您的服务器需求。因此，你不能给用户他们想要的反馈，帮助他们提交正确的表单。为此，您将需要自定义表单域验证器。

### 创建自定义表单域验证器

表单域验证器是一个接受表单控件(输入域)并根据特定条件验证表单控件值的函数。这个函数要么在一切正常时不返回任何内容，要么返回一个对象来说明哪里出错了。

自定义验证器的一个非常常见的用例是检查表单是否匹配服务器的清理规则。这意味着验证器检查用户输入表单的字符是否被允许。现在让我们创建这个表单验证器。

### 构建表单

要使用这个验证器，我们需要创建一个表单并在那里定义它。为此，我们将创建一个简单的用户注册表单。我们用被动的方式来创造形式。可以这样做:

模板看起来可能是这样的:

我们现在有了一个有效的反应形式。但是，我们没有应用任何表单验证。要添加表单验证，我们只需将验证器传递给表单创建函数，如下所示:

我们使用了 Angular 的 required 和 email 验证器。我们还导入了自定义创建的 validateCharacters 验证器。我们仍然要做的最后一件事是向用户呈现潜在的错误。

### 向用户显示错误

有两个时刻我们希望向用户显示错误:当焦点从一个字段转移到另一个字段时，就在最终表单提交之前。

让我们为此创建一个表单服务。该服务可能如下所示:

`validateForm`方法接受要验证的表单、表单错误对象和是否检查脏字段的布尔值。然后，该函数对所有表单控件进行循环，并检查该控件是否有错误。如果有，我们找到来自`validationMessages`方法的正确的错误消息，并传回表单错误对象。

要在我们的组件中使用这个错误服务，我们必须执行以下操作:

现在，最后一步是在模板中显示错误消息。我们可以这样做:

如果在一个特定的字段上有任何错误，我们显示在`formErrors`对象中的消息。下面是完整的演示。在田野里玩耍。尝试在 name 字段中填入类似于`!#$^`的字符，看看我们的定制表单验证器是否有效。如果没有错误出现，点击注册按钮，并看到成功的消息。

### 结论

我希望这篇文章能帮助您验证表单，并让您的用户在填写表单时有更好的体验。

#### 在阿姆斯特丹找工作？

我在 **Sytac** 工作，是一名高级前端开发人员。我们正在寻找精通 Angular、React、Java 或 Scala 的中高级开发人员。Sytac 是荷兰一家雄心勃勃的咨询公司。

如果你认为自己具备与最优秀的人共事的条件，请发邮件给我，邮箱是 [luuk.gruijs@sytac.io](mailto:luuk.gruijs@sytac.io) ，我很乐意告诉你更多。