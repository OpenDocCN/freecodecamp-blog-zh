# 如何撰写一份好的拉式请求描述，以及为什么它很重要

> 原文：<https://www.freecodecamp.org/news/how-to-write-a-pull-request-description/>

编写一个好的拉请求描述是开发人员必须做的最乏味的工作之一。有时会有适得其反的感觉。

但是发展这种技能有很长的路要走，并且从长远来看，确实有助于你的利益相关者和你的组织。

所以，今天多花 10 分钟总比 6 个月后绞尽脑汁去解释你为什么要这么做要好。

下面的文章解释了拉请求描述的不同部分，以及为什么应该包括它们。

## 什么是公关描述？

拉请求描述描述了拉请求的组成以及您对代码所做的更改。

它解释了您所做的工作，包括任何代码更改、配置更改、包括的迁移、引入的新 API、对旧 API 的更改、系统中引入的任何新 workers/cron、副本更改等等。你明白要点了。

你应该包括这一部分，因为它让不同的利益相关者一瞥 PR 正在做什么。

对于一个非技术人员来说，描述应该解释当这些代码变更被部署到生产中时，会对系统产生什么影响。

它还将帮助评审者理解他们将要评审的内容(类似于序言/预告片)。

最后，它还有助于 QA/SDET 理解 PR 的范围。

因此，公共关系的“是什么”应该让我们对公共关系的变化有所了解。

## “为什么”部分

本节解释了为什么要进行上述更改。

有时候开发人员觉得在描述中写“业务/产品需求”是可以的。这很好，但是这样做违背了本节的目的。

如果有更好的解释来说明为什么建议进行修改，那么附上一个文档参考链接总是好的。一个好的“为什么”部分应该解释任何变化背后的原因。

你应该包括这一部分，因为它解释了你为什么提出修改建议。在短期内包含这一部分可能听起来不合理，但随着产品的成熟和持续几年，这一部分起着至关重要的作用。

开发人员/产品人员来了又走，但是代码仍然存在。当一个新的开发人员处理一段代码并发现其中有差异时，他们可以更深入地挖掘并获得 2 年前做出这些更改的拉请求。

一个好的“为什么”给了他们当时做出的解释和假设。

GoJek 的 CTO 曾经解释说，他们不会挑战他们的遗留代码，也不会质疑为什么产品中会有一些看起来很荒谬的特性。

他们只是回去检查文档。

假设和环境可能已经改变，因此代码也在进化。今天看起来很荒谬的事情在 2 年前可能是相关的。所以最好今天就解释你为什么要做一个特别的改变。

## 测试范围

这一部分应该包括一个你在测试这个特定的 PR 时需要留意的场景列表。(这将包括流、API、crons、workers 等等。)

一个好的测试范围可以让 QA/SDET 团队了解他们需要测试的场景和流程。

当你写这部分的时候，它也能帮助你。我自己也遇到过问题，这促使我回到开发阶段并再次测试它们。

一个完整的测试范围可以帮助开发人员更有效地测试 PR，并且给测试人员一个完整的 PR 图。

## 相关文件

本部分包括需要与 PR 描述一起附上的任何相关文档。

这可能包括产品需求文档、架构图、数据库系统图、使用的设计模式、类图、外部库文档等等。

本节帮助解释您在处理此功能请求时所做的任何假设和参考。从长远来看，它起着重要的作用。

当有人回来看到为什么建议进行这样的更改时，相关的文档部分将带他们到特定的文档，以便他们可以清楚地理解这个问题。或者它可以在开发时将他们带到场景的技术实现细节。

## 从属公关(如有)

有时候一个特定的特性会跨越多个 GitHub 库，按照一定的顺序发布它们是很重要的。

例如，您可能需要在部署一个回购协议之前部署另一个，或者您可能需要并排部署它们。

无论是哪种情况，本节都将解释本 PR 所依赖的任何相关代码。

您应该包括这一部分，因为它确实有助于部署人员理解部署的顺序。如果另一个 repo 的代码需要先执行，那么部署人员将联系负责部署另一个 repo 的人员，以确保他们的部署先进行。总的来说，它有助于简化部署过程。

## 配置变更(如果有)

这一部分应该包括在将 PR 部署到生产环境之前需要添加到机密中的所有配置更改。

有时，部署人员会一次合并 10-20 个 pr，他们很难跟踪所有的配置更改。

因此，最好将它们包含在配置更改部分。(不要把秘钥放在那里，只要包括键名和如何获取秘钥就可以了。)

## 标签/标识

这些在拉式请求描述中非常重要，并且在团队成长时传达了很多含义。

以下是我使用的一些标签，但是你可以根据你的需要添加不同的标签。

*   **开发完成-** 当从开发方完成开发时。
*   **自我审查-** 当拉取请求的开发人员已经审查了他们这边的拉取请求，并且现在可以将其交给他们的同事进行同行审查时。
*   **自检-** 当拉请求的开发人员根据他们在测试范围部分给出的描述对变更进行了自检时。
*   **配置更改-** 此标签表示在将 PR 部署到生产环境之前，需要进行一些配置更改。(这包括需要输入系统的密钥。)
*   **包含迁移—**这表示 PR 包含迁移。如果是长时间运行的迁移，应该事先指定。
*   **Release Ready -** 这向部署人员表明 PR 已准备好进行部署，并将在下一个部署周期中被部署人员提取。
*   **同行评审-** 当同行评审了 PR 并且建议的变更由开发人员做出时。这是由审阅过 PR 的同事张贴的。
*   **QA 测试-** 这表明 QA/SDET 已经测试了 PR，可以部署到生产中。

## 结论

在这篇文章中，我们经历了公关描述的不同部分。您制作的大多数 PRs 不需要所有这些部分和标签，但是您应该尽可能多地包含它们。

当你创建一个公关的时候，写这个描述可能看起来没有什么成效，但是它在将来肯定会被证明是有帮助的。

最后一点:以上是我的观点，可能与你的观点不同。但是我多年来一直在发展这个策略，它包含了我在这个行业中合作过的许多人的意见和经验。因此，知道它经过了高度的实战检验，你会感觉很好。