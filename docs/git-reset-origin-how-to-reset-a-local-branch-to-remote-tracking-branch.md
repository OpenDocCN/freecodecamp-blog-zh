# Git 重置原点–如何将本地分支重置为远程跟踪分支

> 原文：<https://www.freecodecamp.org/news/git-reset-origin-how-to-reset-a-local-branch-to-remote-tracking-branch/>

Git 是一个免费的开源版本控制系统。它是当今最流行的版本控制系统。

Git 跟踪一段时间内对项目所做的更改。这允许多个开发人员在同一项目上并行协作和工作，无论他们在世界的哪个角落。

它让开发人员可以查看项目的历史，了解谁做了哪些更改，以及为什么要做这些更改。此外，使用 Git，如果需要，您可以恢复到旧版本的代码。

从本质上讲，Git 确保开发人员都在同一页面上，并且知道项目中正在发生什么。

在处理一个项目时，您可能面临的挑战之一是尝试同步您的工作——特别是同步本地和远程分支。

在本文中，您将学习如何重置本地 Git 分支并将其精确匹配到远程分支。

以下是我们将要介绍的内容:

1.  [Git 中的分支是什么？](#intro)
    1.  本地、远程和远程跟踪分支机构之间有什么区别？
2.  如何将本地 Git 分支重置为远程？
    1.  [保存本地分支机构的当前状态](#save)
    2.  [做一个`git checkout`](#checkout)
    3.  [取原点](#fetch)
    4.  [重置本地存储库](#reset-local)
    5.  [清除任何未跟踪的更改](#clean)
3.  [结论](#conclusion)

## Git 中的分支是什么？Git 分支对初学者来说很简单

分支是版本控制的一个核心方面，也是需要学习的一个重要概念。

由于分支，开发人员能够以更灵活的方式进行协作。分支使得日常的开发过程更加顺畅和高效。

分支是管理不同版本代码的一种方式，并充当指向更改快照的指针。

当您第一次为项目创建 Git 存储库时，与此同时,**主分支**也被创建。

主分支是项目的主要和默认分支。它代表您的代码的无错误、稳定和可用的版本，可以发布并与公众共享。它是主要的代码库。

但是，当您想在项目中添加一个新特性时，会发生什么呢？

在添加它之前，您需要测试它，并确保它不会引入新的错误或干扰现有的代码。

需要一种在不影响代码库的情况下处理新功能的方法。

这就是分支派上用场的地方。

分支是隔离的空间，用于试验和测试新代码，而不会影响主分支中的代码。

您可以创建一个新分支并进行所需的更改。如果您对这些更改感到满意，您可以通过*合并*它们来将它们添加到主分支中。如果不是，您可以删除该分支，而不会影响项目中的主代码。

分支还允许开发人员同时处理不同的特性，而不会干扰彼此的工作。

要了解更多关于 Git 中的分支，请查看解释它们如何工作的视频，并为提供如何使用它们的备忘单的文章添加书签[。](https://www.freecodecamp.org/news/how-to-use-branches-in-git/)

### Git 中的本地 VS 远程 VS 远程跟踪分支——有什么区别？

本地分支是一个只能在本地机器上访问的分支，它孤立地存在于本地机器上。从这里，您可以添加文件并提交您所做的任何更改。这些更改将保存在本地，并且仅对您可见，只能在您的本地物理机上使用。

其他开发人员将无法查看您的工作和您所做的更改。

您可以使用以下命令创建一个名为`my_branch`的本地分支:

```
git branch my_branch 
```

要列出所有本地分支，可以使用`git branch`命令。

为了在同一个项目上与其他开发人员协作，并让他们查看您所做的任何更改，您需要将更改从本地分支推送到远程存储库。

这将我们引向**远程分支**。

远程分支是指存在于远程存储库中的分支。

远程存储库，也称为 remote，通常是一个存储库，位于互联网上的某个地方，比如 GitHub 服务器上。远程存储库的默认名称是`origin`。

现在，**远程跟踪分支**指的是远程分支状态的本地参考。默认情况下，分支之间没有连接。也就是说，你可以让一个本地分行跟踪一个远程分行。

## 如何将本地 Git 分支重置为远程？

您可能一直在您的本地分支工作，对项目进行各种更改和修改，并且您得出结论，您所做的那些更改不再需要了。

您希望删除它们并将分支重置为远程分支。

除此之外，另一个开发人员可能已经做出了更改并将它们推送到远程分支，因此您需要从远程存储库中获取那些最新的更改以保持最新。

要实现这一点，您需要采取以下步骤:

*   保存本地分支的当前状态(可选)。
*   从遥控器获取最新版本的代码。
*   重置本地分支。
*   清理文件(可选)。

### 保存本地分支的当前状态

开始之前，您可能希望将当前分支的状态保存在另一个分支中。

当将本地 Git 分支重置为远程时，您将会丢失在本地所做的更改。

这一步是可选的，您可以选择这样做，以防出现问题，或者您希望在将来再次回到该工作中。

要保存工作，请使用以下命令:

```
git commit -a -m "I am saving my work"
git branch backup_work 
```

您现在的工作被保存到名为`backup_work`的分支中。

### 做一个`git checkout`

通常，会有一个本地远程跟踪分支与您想要重置到的远程分支同名，比如`main`。

使用以下命令签出本地远程主分支:

```
git checkout main 
```

如果您对此分支使用不同的名称，请用您正在使用的名称替换`main`。

### 获取原点

要获取远程存储库以及远程存储库中代码的最新状态和版本，请输入以下命令:

```
git fetch origin 
```

`origin`是 Git 创建的别名，指定了远程存储库的远程 URL。通常，Git 自动假定远程存储库的名称是`origin`。

如果您有不同的遥控器名称，请用您正在使用的名称替换`origin`。

### 重置本地存储库

现在，使用以下命令将本地`main`分支重置为远程存储库:

```
git reset --hard origin/main 
```

### 清除任何未跟踪的更改

这一步是可选的。

使用上述命令后，您可能会得到一些未被跟踪的文件。

使用以下命令清除任何未跟踪的更改:

```
git clean -xdf 
```

让我们分解一下`-xdf`标志，并解释每个部分的作用:

*   `-x`标志删除被忽略的文件。
*   `-d`标志删除未跟踪的文件夹。
*   `-f`标志删除未被跟踪的文件。

## 结论

现在，您已经将本地分支重置为远程。

希望这篇文章对你有所帮助。

要了解关于 Git 的更多信息，请查看以下免费资源:

*   [Git 和 GitHub 初学者速成班](https://www.youtube.com/watch?v=RGOj5yH7evk)
*   [Git 专业教程-工具&用 Git 掌握版本控制的概念](https://www.youtube.com/watch?v=Uszj_k0DGsg)
*   [高级 Git 教程——交互式 Rebase、Cherry-Picking、Reflog、子模块等](https://www.youtube.com/watch?v=qsTthZi23VE)

感谢您的阅读和快乐编码:)